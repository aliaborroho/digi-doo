define("panels/panelManager/biEvents.json",[],function(){return{PANEL_OPENED:{evid:309,src:38,endpoint:"editor",fields:{panel_name:"string"}},PANEL_CLOSED:{evid:345,src:38,endpoint:"editor",fields:{panel_name:"string"}}}}),define("panels/panelManager/bi",["panels/panelManager/biEvents.json"],function(a){"use strict";function c(a,c){b&&b.event(a,c)}function d(c){b=c,b.register("panels","event",a)}var b;return{events:a,report:c,register:d}}),define("panels/panelManager/panelManager",["lodash","core","util","panels/panelManager/bi"],function(a,b,c,d){"use strict";function e(){function i(a){f=a,j()}function j(){a.forEach(g,function(a){a()})}function k(b,c){return a.assign({},c,{panelName:b,key:b+a.uniqueId()})}var e="58406e7a-1ad0-4105-8e37-c053b529f9d8",f=[],g=[],h=null;return{openPanel:function(b,c,e){e||this.closeAllPanels(),b.indexOf("help")>=0&&console.error("openPanel method is deprecated for help panels. Use openHelpCenter instead");var g=a.find(f,{name:b});if(g&&g.singleInstance)return void this.updatePanelProps(b,c);var h={name:b,props:k(b,c)};i(f.concat(h)),d.report(d.events.PANEL_OPENED,{panel_name:b})},openComponentPanel:function(a,c){this.closeAllPanels();var e={name:a,props:k(a,c),frameType:b.constants.PANEL_TYPES.COMP};i(f.concat(e)),d.report(d.events.PANEL_OPENED,{panel_name:a})},openHelpCenter:function(b,c,d){var f=b;c&&(f+="&appId="+c),a.isEmpty(f)&&(f=e),f+=this.getUserPermissionsUrlParams(),h=a.assign({},d||{},{helpUrl:f,panelName:"panels.helpPanels.helpPanel"}),j()},getUserPermissionsUrlParams:function(){var b="",d=c.editorModel.permissionsInfo;if(d){var e=d.ownerId;b+="&ownerId="+e;var f=a.pluck(d.loggedInUserRoles,"role").join(",");b+="&roles="+f}return b},closeHelpCenter:function(){h=null,j()},getHelpPanelProps:function(){return a.clone(h)},closePanelByName:function(b){i(a.reject(f,{name:b})),d.report(d.events.PANEL_CLOSED,{panel_name:b})},closePanelByPropKey:function(b,c){i(a.reject(f,function(a){return a.props[b]===c})),d.report(d.events.PANEL_CLOSED)},closeAllPanelsOfType:function(b){var c;c=a.isArray(b)?a.groupBy(this.getOpenPanels(),function(c){return a.contains(b,c.frameType)}):a.groupBy(this.getOpenPanels(),{frameType:b}),i(c["false"]||[]),a.forEach(c["true"],function(a){d.report(d.events.PANEL_CLOSED,{panel_name:a.name})})},closePanelsOpenedAfter:function(b){var c=a.findIndex(this.getOpenPanels(),{name:b});i(a.take(this.getOpenPanels(),c+1))},closeAllPanels:function(){var b=a.clone(f);i([]),a.forEach(b,function(a){d.report(d.events.PANEL_CLOSED,{panel_name:a.name})})},getOpenPanels:function(){return a.clone(f)},registerPanelType:function(b,c,d){var e=this.getOpenPanels(),f=a.find(e,{name:b});f&&(f.frameType=c,f.singleInstance=d),i(e)},registerForStageMouseDown:function(b,c){var d=this.getOpenPanels();a.forEach(d,function(a){a.frameType===b&&(a.onMouseDown=c)})},notifyMouseDown:function(b){a.forEach(this.getOpenPanels(),function(a){a.onMouseDown&&a.onMouseDown(b)})},registerObserver:function(a){g.push(a)},unregisterObserver:function(b){var c=a.indexOf(g,b);c>-1&&g.splice(c,1)},updatePanelProps:function(b,c){var d=this.getOpenPanels(),e=a.filter(d,{name:b});a.forEach(e,function(b){a.merge(b.props,c),i(d)},this)},getPanelsOfType:function(b){return a.filter(this.getOpenPanels(),{frameType:b})},initBIHandler:function(a){d.register(a)}}}return e}),define("panels/panelManager/panelManagerFactory",["panels/panelManager/panelManager"],function(a){"use strict";var b=null;return{getManager:function(){return b=b||new a}}}),define("panels/mixins/panelFrameMixin",["react","util","panels/panelManager/panelManagerFactory"],function(a,b,c){"use strict";return{propTypes:{panelName:a.PropTypes.string.isRequired,helpId:a.PropTypes.string,isSingleInstance:a.PropTypes.bool},mixins:[b.blockOuterScrollMixin],getDefaultProps:function(){return{isSingleInstance:!1}},componentWillMount:function(){c.getManager().registerPanelType(this.props.panelName,this.constructor.displayName,this.props.isSingleInstance)},close:function(){c.getManager().closePanelByName(this.props.panelName)},openHelpCenter:function(){this.props.helpId&&c.getManager().openHelpCenter(this.props.helpId),this.props.onHelpClicked&&this.props.onHelpClicked()}}}),define("panels/frames/leftPanelFrame.rt",["react/addons","lodash","symbols"],function(a,b,c){"use strict";function d(a){this.props.onContextMenu&&this.props.onContextMenu(a)}return function(){return a.createElement("div",{className:"left-panel-frame panel-index-"+this.props.panelIndex+" "+this.props.panelClass+(0===this.props.panelIndex?" first-panel":""),style:this.getFrameStyle(),onWheel:this.blockOuterScroll,onContextMenu:d.bind(this)},this.props.label?a.createElement("header",{key:"header",className:"panel-header light"},a.createElement("span",{className:"panel-header-title"},this.props.label),this.props.helpId||this.props.onHelpClicked?a.createElement("button",{key:"headerButton",className:"help",onClick:this.openHelpCenter},"?"):null,a.createElement("button",{className:"close",onClick:this.close},a.createElement(c.symbol,{name:"headerCloseButton"}))):null,a.createElement("div",{id:this.props.id,className:"left-panel-frame-content "+(this.props.className||"")},this.props.children))}}),define("panels/frames/leftPanelFrame",["react","lodash","core","panels/mixins/panelFrameMixin","panels/frames/leftPanelFrame.rt","panels/panelManager/panelManagerFactory"],function(a,b,c,d,e,f){"use strict";return a.createClass({displayName:c.constants.PANEL_TYPES.LEFT,mixins:[d],PropTypes:{panelClass:a.PropTypes.string.isRequired,panelIndex:a.PropTypes.number.isRequired,label:a.PropTypes.string,onClose:function(a,b){return a.title&&"function"!=typeof a[b]?new Error("onClose prop must be of type a function"):void 0},styleOverride:a.PropTypes.object,openPanelBiEvent:a.PropTypes.object,openPanelBiParams:a.PropTypes.object},getFrameStyle:function(){return this.props.styleOverride},componentWillMount:function(){var a=f.getManager(),c=b.filter(a.getOpenPanels(),{frameType:this.constructor.displayName});b.size(c)>1&&a.closePanelByName(b.first(c).name),a.registerForStageMouseDown(this.constructor.displayName,this.close)},render:e})}),define("panels/mixins/disableKeyboardShortcutsMixin",["lodash","util"],function(a,b){"use strict";function f(){return c.CONTEXTS.MODAL_PANEL+"_"+d++}var c=b.keyboardShortcuts,d=0,e=[];return{componentWillMount:function(){var a=!1;c.isEnabled()||(c.enable(),a=!0),e.push(c.getContext()),this.dynamicKeyboardContext=f(),c.registerContext(this.dynamicKeyboardContext,this.getPanelShortcuts()),c.setContext(this.dynamicKeyboardContext),a&&c.disable()},componentWillUnmount:function(){var a=!1;c.isEnabled()||(c.enable(),a=!0),c.unregisterContext(this.dynamicKeyboardContext);var b=e.pop();b!==this.dynamicKeyboardContext&&c.setContext(b),a&&c.disable()},getPanelShortcuts:function(){return this.props.keyboardShortcuts?this.props.keyboardShortcuts:this.getDefaultShortcuts()},getDefaultShortcuts:function(){return{esc:this.props.isBareMode?a.noop:this.onCancel||this.close}}}}),define("panels/mixins/dontShowAgainMixin",[],function(){"use strict";return{getDontShowAgain:function(){return this.props.userPrefType&&this.props.dontShowAgainKey?this.props.editorAPI.userPreferences[this.props.userPrefType].get(this.props.dontShowAgainKey):null},setDontShowAgain:function(a){return this.props.userPrefType&&this.props.dontShowAgainKey?(this.props.editorAPI.userPreferences[this.props.userPrefType].set(this.props.dontShowAgainKey,a),void this.setState({dontShowAgain:a})):null},linkDontShowAgainValue:function(){return{value:this.state.dontShowAgain,requestChange:this.setDontShowAgain}}}}),define("panels/frames/messagePanelFrame.rt",["react/addons","lodash","baseUI","symbols"],function(a,b,c,d){"use strict";function e(a,c){var d=b.assign({},a,c);return a.hasOwnProperty("style")&&(d.style=b.defaults(d.style,a.style)),a.hasOwnProperty("className")&&c.hasOwnProperty("className")&&(d.className=c.className+" "+a.className),d}return function(){return a.createElement("div",{className:"panel-frame-container screen-centered-frame message-panel-frame-z-index"},a.createElement("div",{className:"dark-frame-overlay"}),a.createElement("div",e({className:"message-panel-frame"},this.getPanelProps()),a.createElement("header",{className:"panel-header dark"},this.props.panelTitle?a.createElement("span",{key:"headerTitle",className:"panel-header-title"},this.props.panelTitle):null,a.createElement("button",{className:"close",onClick:this.onCancel},a.createElement(d.symbol,{name:"headerCloseButton"}))),a.createElement("div",{className:"content"},this.props.children),a.createElement("div",{className:"panel-footer"},this.props.footerText?a.createElement("div",{key:"footerText",className:"footer-text"},this.props.footerText):null,this.props.dontShowAgainKey&&this.props.userPrefType?a.createElement(c.toggle,{key:"dont-show-again-toggle",name:"checkbox",labelAfterSymbol:!0,className:"dont-show-again",label:"Notification_Box_Dont_Show_Again",valueLink:this.linkDontShowAgainValue()}):null,a.createElement(c.button,{className:"btn-confirm-primary",onClick:this.onConfirm,label:this.props.confirmLabel}))))}}),define("panels/frames/messagePanelFrame",["react","lodash","core","panels/mixins/panelFrameMixin","panels/mixins/disableKeyboardShortcutsMixin","panels/mixins/dontShowAgainMixin","panels/frames/messagePanelFrame.rt"],function(a,b,c,d,e,f,g){"use strict";return a.createClass({displayName:c.constants.PANEL_TYPES.MESSAGE,mixins:[d,e,f],propTypes:{panelName:a.PropTypes.string.isRequired,panelTitle:a.PropTypes.string,width:a.PropTypes.string,height:a.PropTypes.string,onConfirm:a.PropTypes.func,confirmLabel:a.PropTypes.string,keyboardShortcuts:a.PropTypes.object,dontShowAgainKey:a.PropTypes.string,userPrefType:a.PropTypes.oneOf(["site","session","global"])},getInitialState:function(){return{dontShowAgain:this.getDontShowAgain()}},getDefaultProps:function(){return{confirmLabel:"messagePanelFrame_Confirm"}},getPanelProps:function(){var a=this.props.width,c=this.props.height;return this.props.style={},a&&(this.props.style.width=a),c&&(this.props.style.height=c),b.omit(this.props,"children","width","height")},_closeAndCall:function(a){this.close(),a&&a()},onConfirm:function(){this._closeAndCall(this.props.onConfirm)},onCancel:function(){this._closeAndCall(this.props.onCancel)},render:g})}),define("panels/mixins/panelDragLimitsMixin",["core","jquery"],function(a,b){"use strict";return{getDragLimits:function(c){var d=a.constants.PANELS.PANEL_SIZE_TO_KEEP_IN_VIEW,e=a.utils.stageUtils.getStageLayout(),f=b(c?c.getDOMNode():this.getDOMNode()),g=f.height(),h=f.width(),i=e.left-h+d,j=e.right+h-d,k=e.bottom+g-d;return{x:[i,j],y:[e.top+10,k]}}}}),define("panels/frames/toolPanelFrame.rt",["react/addons","lodash","baseUI","symbols"],function(a,b,c,d){"use strict";function e(a,c){var d=b.assign({},a,c);return a.hasOwnProperty("style")&&(d.style=b.defaults(d.style,a.style)),a.hasOwnProperty("className")&&c.hasOwnProperty("className")&&(d.className=c.className+" "+a.className),d}function f(a){this.startDrag(a,this.getDragLimits(this.refs.contentWrapper),this.refs.contentWrapper)}return function(){return a.createElement("div",{className:"panel-frame-container tool-panel-frame-container tool-panel-frame-z-index"+(this.props.isBlockingLayerFullScreen?" full-screen":""),onWheel:this.blockOuterScrollIfNecessary},a.createElement("div",{className:"transparent-frame-overlay",onClick:this.close}),a.createElement("div",e({ref:"contentWrapper",className:"tool-panel-frame"},this.getContentWrapperProps()),this.props.headerTitle?a.createElement("header",{ref:"header",key:"toolFrameHeader",onMouseDown:f.bind(this),className:"panel-header dragger dark"},this.props.headerTitle?a.createElement("span",{key:"headerTitle",className:"panel-header-title"},this.props.headerTitle):null,a.createElement("button",{className:"close",onClick:this.close},a.createElement(d.symbol,{name:"headerCloseButton"})),a.createElement("button",{className:"help",onClick:this.openHelpCenter},"?")):null,a.createElement("div",{className:"content"+(this.props.contentClass?" "+this.props.contentClass:"")},this.props.children)))}}),define("panels/frames/toolPanelFrame",["react","lodash","jquery","core","util","panels/mixins/panelFrameMixin","panels/mixins/disableKeyboardShortcutsMixin","panels/mixins/panelDragLimitsMixin","panels/frames/toolPanelFrame.rt"],function(a,b,c,d,e,f,g,h,i){"use strict";return a.createClass({displayName:d.constants.PANEL_TYPES.TOOL,mixins:[f,e.draggableMixin,g,h],propTypes:{panelName:a.PropTypes.string.isRequired,headerTitle:a.PropTypes.string,width:a.PropTypes.string,height:a.PropTypes.string,top:a.PropTypes.oneOfType([a.PropTypes.string,a.PropTypes.number]),left:a.PropTypes.oneOfType([a.PropTypes.string,a.PropTypes.number]),isBlockingLayerFullScreen:a.PropTypes.bool,shouldBlockOuterScroll:a.PropTypes.bool,contentClass:a.PropTypes.string},getContentWrapperProps:function(){var a=["width","height","top","left"],c=b.omit(this.props,"children",a);return c.style=b.pick(this.props,a),c},getPanelFramePosition:function(){return c(this.getContentWrapperElement().getDOMNode()).offset()},getContentWrapperElement:function(){return this.refs.contentWrapper},blockOuterScrollIfNecessary:function(){this.props.shouldBlockOuterScroll&&this.blockOuterScroll.apply(this,arguments)},render:i})}),define("panels/frames/focusPanelFrame.rt",["react/addons","lodash","symbols","util"],function(a,b,c,d){"use strict";return function(){return a.createElement("div",{className:"panel-frame-container screen-centered-frame focus-panel-frame-z-index "+(this.props.frameClassName||""),onWheel:this.blockOuterScroll},a.createElement("div",{className:this.getClassName("focus-panel-frame"),style:this.getWidthHeight()},this.shouldHideHeader()?null:a.createElement("header",{className:this.getHeaderClassName()+" panel-header dark",key:"header"},a.createElement("span",{className:"panel-header-title"},this.props.title),a.createElement("button",{className:"close",onClick:this.closeFrameIfNeeded},a.createElement(c.symbol,{name:"headerCloseButton"})),this.props.shouldHideHelp?null:a.createElement("button",{className:"help",onClick:this.openHelpCenter,key:"help"},"?\n            ")),a.createElement("div",{className:this.props.title?"focus-panel-frame-content":"focus-panel-frame-content-no-header"},this.props.children)),a.createElement("div",{className:"dark-frame-overlay",onClick:this.handleBlur}))}}),define("panels/frames/focusPanelFrame",["react","lodash","core","util","panels/mixins/panelFrameMixin","panels/mixins/disableKeyboardShortcutsMixin","panels/frames/focusPanelFrame.rt"],function(a,b,c,d,e,f,g){"use strict";return a.createClass({mixins:[e,f],propTypes:{panelName:a.PropTypes.string.isRequired,width:a.PropTypes.string,height:a.PropTypes.string,title:a.PropTypes.string,helpId:a.PropTypes.string,headerClassName:a.PropTypes.string,frameClassName:a.PropTypes.string,shouldHideHeader:a.PropTypes.bool,shouldHideHelp:a.PropTypes.bool,shouldNotCloseOnBlur:a.PropTypes.bool,keyboardShortcuts:a.PropTypes.object},displayName:c.constants.PANEL_TYPES.FOCUS,getHeaderClassName:function(){return this.props.headerClassName||"panel-header"},getFrameProps:function(){return{style:{width:this.props.width,height:this.props.height}}},shouldHideHeader:function(){return this.props.shouldHideHeader},shouldCloseFrame:function(){return this.props.onClose?this.props.onClose()===!0:!0},closeFrameIfNeeded:function(){this.shouldCloseFrame()&&this.close()},handleBlur:function(){this.props.shouldNotCloseOnBlur||this.closeFrameIfNeeded()},getClassName:function(a){return d.inheritClassName(this.props,a)},getWidthHeight:function(){var a={};return this.props.width&&(a.width=this.props.width),this.props.height&&(a.height=this.props.height),a},render:g})}),define("panels/frames/helpPanelFrame.rt",["react/addons","lodash","symbols","baseUI"],function(a,b,c,d){"use strict";function e(a){this.startDrag(a,this.getDragLimits())}return function(){return a.createElement("div",{className:"help-panel-frame"},a.createElement("header",{ref:"header",onMouseDown:e.bind(this),className:"panel-header dragger dark help-panel-frame-drag-handle"},a.createElement("button",{className:"close",onClick:this.closeHelpCenter},a.createElement(c.symbol,{name:"headerCloseButton"}))),a.createElement("iframe",{id:this.props.id,className:this.props.className||"",src:this.getUrlPrefix()+this.props.helpUrl,ref:"helpIframe"}),a.createElement(d.preloader,{className:b.keys(b.pick({hidden:!this.state.showLoader},b.identity)).join(" ")}))}}),define("panels/frames/helpPanelFrame",["react","util","core","panels/mixins/panelFrameMixin","panels/panelManager/panelManagerFactory","panels/frames/helpPanelFrame.rt"],function(a,b,c,d,e,f){"use strict";return a.createClass({displayName:c.constants.PANEL_TYPES.HELP,mixins:[d,b.draggableMixin,c.mixins.editorAPIMixin],PropTypes:{helpUrl:a.PropTypes.string,closePanelBiEvent:a.PropTypes.object,closePanelBiParams:a.PropTypes.object,openPanelBiEvent:a.PropTypes.object,openPanelBiParams:a.PropTypes.object},getInitialState:function(){return{showLoader:!0}},getUrlPrefix:function(){var a="https://www.wix.com/support/html5/widget/0/cb6480f3-768b-4737-ab8f-10fe2e4fa2ab#/main/view?itemId=",b=this.getEditorAPI().getLanguageCode();return"en"===b?a:a.replace("www",b)},componentDidMount:function(){this.props.openPanelBiEvent&&this.props.openPanelBiParams&&this.getEditorAPI().bi.event(this.props.openPanelBiEvent,this.props.openPanelBiParams),this.refs.helpIframe.getDOMNode().addEventListener("load",this.hideLoader)},componentWillReceiveProps:function(a){a.isMobileEditor!==this.props.isMobileEditor&&this.closeHelpCenter()},getDragLimits:function(){var a=c.utils.stageUtils.getViewPort();return{y:[a.minY]}},componentWillMount:function(){e.getManager().registerPanelType(this.props.panelName,this.constructor.displayName)},componentWillUnmount:function(){this.props.closePanelBiEvent&&this.props.closePanelBiParams&&this.getEditorAPI().bi.event(this.props.closePanelBiEvent,this.props.closePanelBiParams)},closeHelpCenter:function(){e.getManager().closeHelpCenter()},onCancel:function(){this.closeHelpCenter()},hideLoader:function(){this.setState({showLoader:!1})},render:f})}),define("panels/frames/pagesPanelFrame.rt",["react/addons","lodash","symbols"],function(a,b,c){"use strict";return function(){return a.createElement("div",{className:this.generateClassName("pages-panel-frame")},a.createElement("header",{className:"panel-header tag-triangle tag-top dark"},a.createElement("span",{className:"panel-header-title pages-panel-header-title"},this.props.title),a.createElement("button",{className:"close",onClick:this.close},a.createElement(c.symbol,{name:"headerCloseButton"})),a.createElement("button",{className:"help",onClick:this.openHelpCenter},"?")),a.createElement("div",{className:"pages pages-panel-frame-content"},this.props.children))}}),define("panels/frames/pagesPanelFrame",["react","panels/mixins/panelFrameMixin","panels/frames/pagesPanelFrame.rt","panels/panelManager/panelManagerFactory","core","baseUI"],function(a,b,c,d,e,f){"use strict";return a.createClass({displayName:e.constants.PANEL_TYPES.PAGES,mixins:[b,e.mixins.editorAPIMixin,f.classNameMixin],componentWillMount:function(){var a=d.getManager();a.registerForStageMouseDown(this.constructor.displayName,this.close)},render:c})}),define("panels/frames/confirmationPanelFrame.rt",["react/addons","lodash","baseUI","symbols"],function(a,b,c,d){"use strict";function e(a,c){var d=b.assign({},a,c);return a.hasOwnProperty("style")&&(d.style=b.defaults(d.style,a.style)),a.hasOwnProperty("className")&&c.hasOwnProperty("className")&&(d.className=c.className+" "+a.className),d}return function(){return a.createElement("div",{className:"panel-frame-container screen-centered-frame confirmation-panel-frame-z-index"},a.createElement("div",e({className:"confirmation-panel-frame "+this.props.type+"-confirmation"},this.getPanelProps()),this.shouldHideHeader()?null:a.createElement("header",{className:"panel-header dark",key:"header"},this.props.panelTitle?a.createElement("span",{key:"headerTitle",className:"panel-header-title"},this.props.panelTitle):null,a.createElement("button",{className:"close",onClick:this.close},a.createElement(d.symbol,{name:"headerCloseButton"}))),a.createElement("div",{className:"content"},this.props.children),a.createElement("footer",{},a.createElement(c.button,{className:this.getSecondaryButtonClass(),onClick:this.onCancel,label:this.props.cancelLabel}),a.createElement(c.button,{className:this.getConfirmButtonClass(),onClick:this.onConfirm,label:this.props.confirmLabel}))),a.createElement("div",{className:"dark-frame-overlay"}))}}),define("panels/frames/confirmationPanelFrame",["react","lodash","core","panels/mixins/panelFrameMixin","panels/mixins/disableKeyboardShortcutsMixin","panels/frames/confirmationPanelFrame.rt"],function(a,b,c,d,e,f){"use strict";return a.createClass({displayName:c.constants.PANEL_TYPES.CONFIRMATION,mixins:[d,e],propTypes:{panelName:a.PropTypes.string.isRequired,panelTitle:a.PropTypes.string,width:a.PropTypes.string,height:a.PropTypes.string,onConfirm:a.PropTypes.func,onCancel:a.PropTypes.func,confirmLabel:a.PropTypes.string,cancelLabel:a.PropTypes.string,shouldHideHeader:a.PropTypes.bool,type:a.PropTypes.oneOf(["important","normal"])},getDefaultProps:function(){return{type:"normal",confirmLabel:"confirmationPanelFrame_Confirm",cancelLabel:"confirmationPanelFrame_Cancel"}},getPanelProps:function(){var a=this.props.width,c=this.props.height;return this.props.style={},a&&(this.props.style.width=a),c&&(this.props.style.height=c),b.omit(this.props,"children","width","height")},onConfirm:function(){this.close(),this.props.onConfirm&&this.props.onConfirm()},onCancel:function(){this.close(),this.props.onCancel&&this.props.onCancel()},getConfirmLabel:function(){return this.props.confirmLabel},getCancelLabel:function(){return this.props.cancelLabel},getConfirmButtonClass:function(){var a="important"===this.props.type?"btn-danger-primary":"btn-confirm-primary";return a+" btn-md"},getSecondaryButtonClass:function(){var a="important"===this.props.type?"btn-danger-secondary":"btn-confirm-secondary";return a+" btn-md"},shouldHideHeader:function(){return this.props.shouldHideHeader},render:f})}),define("panels/frames/bgSubPanelFrame.rt",["react/addons","lodash","baseUI","symbols","util"],function(a,b,c,d,e){"use strict";function f(a,c){var d=b.assign({},a,c);return a.hasOwnProperty("style")&&(d.style=b.defaults(d.style,a.style)),a.hasOwnProperty("className")&&c.hasOwnProperty("className")&&(d.className=c.className+" "+a.className),d}function g(a){this.startDrag(a,this.getDragLimits())}return function(){return a.createElement("div",f({className:"background-sub-panel-frame"},this.getPanelProps()),this.props.label?a.createElement("header",{ref:"header",key:"header",onMouseDown:g.bind(this),className:"panel-header dragger dark"},this.props.label?a.createElement("span",{className:"panel-header-title",key:"label"},e.translate(this.props.label)):null,a.createElement("button",{className:"close",onClick:this.close},a.createElement(d.symbol,{name:"headerCloseButton"})),a.createElement("button",{className:"help",onClick:this.openHelpCenter},"?")):null,a.createElement("div",{className:"content"+(this.props.contentClass?" "+this.props.contentClass:"")},this.props.children))}}),define("panels/frames/bgSubPanelFrame",["react","lodash","jquery","panels/mixins/panelFrameMixin","panels/mixins/panelDragLimitsMixin","core","util","panels/frames/bgSubPanelFrame.rt"],function(a,b,c,d,e,f,g,h){"use strict";return a.createClass({displayName:f.constants.PANEL_TYPES.BG_SUB_PANEL,mixins:[d,g.draggableMixin,e,f.mixins.editorAPIMixin],propTypes:{panelName:a.PropTypes.string.isRequired,title:a.PropTypes.string,width:a.PropTypes.number,height:a.PropTypes.number,top:a.PropTypes.number,left:a.PropTypes.number,contentClass:a.PropTypes.string},getInitialState:function(){this.getEditorAPI().panelManager.closeAllPanelsOfType(this.constructor.displayName)},getPanelProps:function(){var a=["width","height","top","left"],c={};b.forEach(a,function(a){this.props[a]&&(c[a]=this.props[a])},this);var d=b.omit(this.props,"children",a);return d.style=c,d},getPanelFramePosition:function(){return c(this.refs.frame.getDOMNode()).offset()},render:h})}),define("panels/frames/emptyPanelFrame.rt",["react/addons","lodash"],function(a,b){"use strict";return function(){return a.createElement("div",this.getFrameProps(),a.createElement("div",{className:"content"},this.props.children))}}),define("panels/frames/emptyPanelFrame",["react","lodash","panels/mixins/panelFrameMixin","panels/frames/emptyPanelFrame.rt"],function(a,b,c,d){"use strict";return a.createClass({displayName:"emptyPanelFrame",mixins:[c],propTypes:{panelName:a.PropTypes.string.isRequired},getFrameProps:function(){return this.props},render:d})}),define("panels/frames/frames",["panels/frames/leftPanelFrame","panels/frames/messagePanelFrame","panels/frames/toolPanelFrame","panels/frames/focusPanelFrame","panels/frames/helpPanelFrame","panels/frames/pagesPanelFrame","panels/frames/confirmationPanelFrame","panels/frames/bgSubPanelFrame","panels/frames/emptyPanelFrame"],function(a,b,c,d,e,f,g,h,i){"use strict";return{leftPanelFrame:a,messagePanelFrame:b,toolPanelFrame:c,focusPanelFrame:d,helpPanelFrame:e,pagesPanelFrame:f,confirmationPanelFrame:g,bgSubPanelFrame:h,emptyPanelFrame:i}}),define("panels/mixins/statefulKeyboardContextMixin",["lodash","util"],function(a,b){"use strict";function f(a){return(a||"")+c.CONTEXTS.AUTOMATIC+"_"+d++}var c=b.keyboardShortcuts,d=0,e=[];return{componentWillMount:function(){e.push(c.getContext()),this.myKeyboardContextName=f(this.keyboardShortcutsContextNamePrefix),c.registerContext(this.myKeyboardContextName,this.getCustomKeyboardShortcuts()),c.setContext(this.myKeyboardContextName)},componentWillUnmount:function(){if(c.unregisterContext(this.myKeyboardContextName),this.myKeyboardContextName===c.getContext()){var a=e.pop();c.setContext(a)}e.splice(e.indexOf(this.myKeyboardContextName),1)},getCustomKeyboardShortcuts:function(){return this.getKeyboardShortcuts?this.getKeyboardShortcuts():this.getDefaultShortcuts()},getDefaultShortcuts:function(){return{}}}}),define("panels/mixins/reportBiEventOnUiChangeMixin",["react","lodash","core"],function(a,b,c){"use strict";function e(a,e,f){var g=c.utils.uiControlsBIUtil.getEventDefinition(a);if(!g)return void console.warn(d,a,this.constructor.displayName);var h=c.utils.uiControlsBIUtil.getParams(a,f),i=b.merge({panel_name:this.constructor.displayName,control_name:e},h);this.getEditorAPI().selectedComponent.sendSelectedComponentBI(g,i)}function f(a,b,c){e.call(this,a,b,c)}var d="There is no BI event for the control [%s], in [%s] panel.\n	Dear developer, Please add the control mapping to core/bi/controlsToEvents and the event to core/bi/events.json .";return{childContextTypes:{reportUIChange:a.PropTypes.func},componentDidMount:function(){if(!b.isFunction(this.getEditorAPI))throw new Error("You must use editorAPIMixin to use the reportBiEventOnUiChangeMixin")},getChildContext:function(){return{reportUIChange:f.bind(this)}}}}),define("panels/mixins/mixins",["panels/mixins/panelFrameMixin","panels/mixins/disableKeyboardShortcutsMixin","panels/mixins/statefulKeyboardContextMixin","panels/mixins/panelDragLimitsMixin","panels/mixins/dontShowAgainMixin","panels/mixins/reportBiEventOnUiChangeMixin"],function(a,b,c,d,e,f){"use strict";return{panelFrameMixin:a,disableKeyboardShortcutsMixin:b,statefulKeyboardContextMixin:c,panelDragLimitsMixin:d,dontShowAgainMixin:e,reportBiEventOnUiChangeMixin:f}}),define("panels/helpPanels/helpPanel.rt",["react/addons","lodash","panels/frames/helpPanelFrame"],function(a,b,c){"use strict";return function(){return a.createElement(c,{panelName:this.props.panelName,helpUrl:this.props.helpUrl})}}),define("panels/helpPanels/helpPanel",["react","lodash","util","panels/helpPanels/helpPanel.rt"],function(a,b,c,d){"use strict";return a.createClass({displayName:"exampleHelpPanel",PropTypes:{helpUrl:function(a,b){return c.validate.url(a[b])?void 0:new Error("helpUrl prop must be a string representing a valid url")}},render:d})}),define("panels/helpPanels/helpPanels",["panels/helpPanels/helpPanel"],function(a){"use strict";return{helpPanel:a}}),define("panels/focusPanels/exampleFocusPanel.rt",["react/addons","lodash","panels/frames/focusPanelFrame"],function(a,b,c){"use strict";return function(){return a.createElement(c,{title:"Example Focus Panel",panelName:this.props.panelName,className:"example-focus-panel"},a.createElement("iframe",{className:"content-iframe",src:"http://www.w3schools.com"}))}}),define("panels/focusPanels/exampleFocusPanel",["react","panels/focusPanels/exampleFocusPanel.rt"],function(a,b){"use strict";return a.createClass({displayName:"exampleFocusPanel",render:b})}),define("panels/focusPanels/videoSearchPanel.rt",["react/addons","lodash","baseUI","panels/frames/focusPanelFrame","util","helpIds"],function(a,b,c,d,e,f){"use strict";return function(){return a.createElement(d,{panelName:this.props.panelName,title:e.translate("VIDEOSEARCH_DIALOG_TITLE"),ref:"frame",helpId:f.EXTERNAL.SEARCH_VIDEO,className:"video-search-panel"},a.createElement("div",{style:{display:this.state.showPreviewPanel?"block":"none",left:"0",right:"0",top:"0",bottom:"0",backgroundColor:"black",opacity:"0.5",position:"absolute",zIndex:"-1"}}),a.createElement("iframe",{id:"videoSearch",ref:"iframe",style:{visibility:this.state.translationsPasssed?"visible":"hidden"},onLoad:this.onLoad,src:this.state.src,frameBorder:"0",allowFullScreen:!0}))}}),define("panels/focusPanels/videoSearchPanel",["react","lodash","util","panels/focusPanels/videoSearchPanel.rt","pLoader!santa:utils"],function(a,b,c,d,e){"use strict";function f(a){var b=c.editorModel.editorBase||"/editor-base";return b+"/app/external/VideoSearch/index.html?id="+a+"&lang=en&fontFaceUrl=http%3A%2F%2Fstatic.parastorage.com%2Fservices%2Fwix-public%2F1.149.0%2Fcss%2FHelvetica%2FfontFace.css"}function g(){return this.state.id}function i(){var a=h,b={};return a.forEach(function(a){b[a]=c.translate(a)}),b}function j(){this.setState({showPreviewPanel:!0})}function k(){this.setState({showPreviewPanel:!1})}function l(a){this.props.onVideoSelected&&this.props.onVideoSelected(a)}var h=["VIDEOSEARCH_OK","VIDEOSEARCH_CANCEL","VIDEOSEARCH_SEARCH_PLACEHOLDER","VIDEOSEARCH_LOADMORE","VIDEOSEARCH_SUB_SEARCH_TEXT","VIDEOSEARCH_WELCOME_TEXT","VIDEOSEARCH_NORESULT","VIDEOSEARCH_SEARCH_BUTTON"];return a.createClass({displayName:"videoSearchPanel",mixins:[c.postMessageMixin,e.timerMixins.timeoutsMixin],propTypes:{onVideoSelected:a.PropTypes.func},getInitialState:function(){var a=Date.now().toString();return{src:f(a),translationsPasssed:!1,id:a,showPreviewPanel:!1}},componentWillMount:function(){this.setPostMessageHandler(g.call(this),this.onMessageFromDialog)},onMessageFromDialog:function(a){a.uri&&l.call(this,a.uri),a.action&&("previewItem"===a.action&&a.state?j.call(this):"previewItem"!==a.action||a.state||k.call(this)),a.closeSearchDialog&&this.refs.frame.close()},componentDidMount:function(){this.refs.iframe.getDOMNode().addEventListener("load",this.onLoad)},onLoad:function(){var a=JSON.stringify({translations:i()});this.refs.iframe.getDOMNode().contentWindow.postMessage(a,"*"),this.setTimeout(function(){this.setState({translationsPasssed:!0})}.bind(this),0)},render:d})}),define("panels/focusPanels/blogManagerPanel.rt",["react/addons","lodash","baseUI","panels/frames/focusPanelFrame"],function(a,b,c,d){"use strict";return function(){return a.createElement("div",{className:"blog-manager-panel"},a.createElement(d,{panelName:this.props.panelName,className:"blog-manager-panel",shouldHideHeader:!0},a.createElement("iframe",{id:"blogManager",ref:"iframe",width:"100%",height:"100%",src:this.state.src,frameBorder:"0",allowFullScreen:!0})))}}),define("panels/focusPanels/blogManagerPanel",["react","lodash","util","panels/panelManager/panelManagerFactory","panels/focusPanels/blogManagerPanel.rt"],function(a,b,c,d,e){
"use strict";return a.createClass({displayName:"blogManagerDialog",mixins:[c.postMessageMixin],propTypes:{blogManagerAppPathType:a.PropTypes.string,api:a.PropTypes.object},getInitialState:function(){return{src:this.props.api.frameUrl}},componentWillMount:function(){this.setPostMessageHandler(null,this.onMessageFromDialog)},onMessageFromDialog:function(a){switch(a.type){case"ready":this.onReady();break;case"anchors":a.payload.pageId&&this.onAnchorsRequest(a.payload.pageId);break;case"cancel":this.props.api.reloadAppPartsMethod(),d.getManager().closePanelByName(this.props.panelName)}},onAnchorsRequest:function(a){var b=JSON.stringify({type:"anchors",payload:{anchorsData:this.props.api.getAnchorsByPage(a),pageId:a}});this.refs.iframe.getDOMNode().contentWindow.postMessage(b,"*")},onReady:function(){var a=JSON.stringify({type:"settings",payload:{isOpenFromSantaEditor:!0,themeData:this.props.api.themeData,themeDataSchema:this.props.api.themeDataSchema,WIXAPPS_EDITOR_STYLES:this.props.api.WIXAPPS_EDITOR_STYLES,CK_EDITOR_FONT_STYLES:this.props.api.CK_EDITOR_FONT_STYLES,CustomUsedFontsUrl:this.props.api.CustomUsedFontsUrl,FontsCssUrls:this.props.api.FontsCssUrls,FontsData:this.props.api.FontsData,FontsMetadata:this.props.api.FontsMetadata,pagesData:this.props.api.pagesData,currentPageId:this.props.api.currentPageId,charSet:this.props.api.charSet,siteUrl:this.props.api.siteUrl,isSitePublished:this.props.api.isSitePublished,imageOrganizerUrl:this.props.api.imageOrganizerUrl}});this.refs.iframe.getDOMNode().contentWindow.postMessage(a,"*")},render:e})}),define("panels/focusPanels/aviaryPanel.rt",["react/addons","lodash","baseUI","panels/frames/focusPanelFrame","util"],function(a,b,c,d,e){"use strict";return function(){return a.createElement(d,{panelName:this.props.panelName,shouldHideHelp:!0,title:e.translate("AVIARY_PANEL_TITLE"),className:"aviary-panel",onClose:this.onCloseFrame},a.createElement("div",{className:"aviary-dialog"},a.createElement("div",{ref:"content",id:"aviary_dialog_editor_content_wrapper"}),a.createElement("div",{id:"message",className:b.keys(b.pick({hidden:!this.state.showMessage},b.identity)).join(" ")},a.createElement("div",{className:"message-bg"},a.createElement("span",{className:b.keys(b.pick({hidden:null==this.state.counter},b.identity)).join(" "),id:"progress"},a.createElement("span",{id:"counter"},this.state.counter,"%")),a.createElement("span",{id:"messageContent"},this.state.messageText),a.createElement("span",{id:"cancel-button",className:b.keys(b.pick({hidden:!this.state.showCancelButton},b.identity)).join(" "),onClick:this.onCancelClicked},e.translate("AVIARY_CANCEL_UPLOAD"))))))}}),define("panels/focusPanels/aviaryPanel",["react","lodash","jquery","core","util","panels/focusPanels/aviaryPanel.rt","pLoader!santa:utils"],function(a,b,c,d,e,f,g){"use strict";function r(a){var b={},c=a.imageLink.value,d=c.uri,e=/(^https?)|(^data)/.test(d)?"":"/static/media/",f=/(jpg$)|(jpeg$)/i.test(d)?"image/jpeg":"image/png";return(c.width>i||c.height>i)&&(d=d+"_"+i),b.tmpImageSrc=j+e+d,b.tmpImageType=f,b}function s(a,b,c,d,e,f){a=a||"GET";var g=new XMLHttpRequest,h=function(){4===g.readyState&&(200===g.status||304===g.status?e(g):d(g))};g.open(a,b,!0),g.onreadystatechange=h,g.setRequestHeader("Content-type",f||"text/plain"),g.send(c)}function t(a,b){var c=function(a){try{a=JSON.parse(a.responseText)}catch(c){a.status="error",a.errorDescription="Parse error: ticket returned unexpected response"}b(a)};s("GET",a+"?accept=json",null,c,c,"text/plain")}function u(a,b){t(m+"/media/tickets/get",function(c){var d=c.responseValue;return d?void x.call(this,d,a,b):(J("ERROR_AVIARY_TITLE","ERROR_AVIARY_UPLOAD_MESSAGE","Code: "+p.AVIARY_UPLOAD_GET_TICKET_FAILED.errorCode),I.call(this,!0),!1)}.bind(this))}function v(){var a=this.props.editorAPI.selection.getSelectedComponents(),b=this.props.editorAPI.components.layout.get(a),c=b.width,d=b.height,e=c+":"+d;return e}function w(a){var b,c,d;if("string"==typeof a?(d=new Element("div"),d.innerHTML=a):d=a,d?(b=d.querySelector("upload"),c=b.getAttribute("success")):(b={getAttribute:function(){return"No Response Error"}},c=!1),e.stringUtils.isTrue(c)){var f=d.querySelector("properties"),g=d.querySelector("sys_meta");return{status:b.getAttribute("errorDescription"),originalName:g.getAttribute("original_file"),mimeType:g.getAttribute("mime_type"),fileUrl:g.getAttribute("file_url"),iconUrl:g.getAttribute("icon_url"),fileSize:g.getAttribute("file_size"),width:g.getAttribute("width"),height:g.getAttribute("height"),ver:g.getAttribute("ver"),fileName:f.getAttribute("file_name")}}return{status:"error",origin:b.getAttribute("origin"),errorCode:b.getAttribute("errorCode"),errorDescription:b.getAttribute("errorDescription")}}function x(a,b,c){var h,d=w,e=function(){var a=this.responseXML||this.responseText;c(d(a))},f={datauri:b,ut:a,s:"media"},g=[];for(h in f)f.hasOwnProperty(h)&&g.push(h+"="+f[h]);g=g.join("&");var i={onLoad:e,onError:e,onTimeout:e,onUploadProgress:y.bind(this),onAbort:this.onAbort};z.call(this,"POST",n,g,i,"application/x-www-form-urlencoded",!1)}function y(a){if(a.lengthComputable){var b=Math.round(a.loaded/a.total*100);this.setState({counter:b})}}function z(a,b,c,d,e,f){a=a||"GET",d=d||{};var g=!0,h="undefined"!=typeof XDomainRequest;h?(this._xhrObject=new XDomainRequest,g=void 0):this._xhrObject=new XMLHttpRequest;var i=this._xhrObject;i.open(a,b,g),i.timeout=3e5,i.onload=d.onLoad||function(){},i.onerror=d.onError||function(){},i.ontimeout=d.onTimeout||function(){},i.onprogress=d.onProgress||function(){},h||(i.onabort=d.onAbort||function(){}),i.upload&&i.upload.addEventListener("progress",d.onUploadProgress||function(){},!1),h||(i.setRequestHeader("Content-type",e||"text/plain"),i.withCredentials=Boolean(f)),i.send(c)}function A(a){if(a=a||{},"error"===a.status||"timeout"===a.status)return I.call(this,!1),J("ERROR_AVIARY_TITLE","ERROR_AVIARY_UPLOAD_MESSAGE","Code: "+p.AVIARY_UPLOAD_TO_STATIC_FAILED.errorCode),!1;var b=new Date,c=[b.getFullYear(),b.getMonth()+1,b.getDate(),[b.getHours(),b.getMinutes(),b.getSeconds()].join(":")].join("-");this._newImageUri=a.fileName,a.originalName=(this.props.imageLink.value.title||"Edited Image")+" "+c,C.call(this,a)}function B(a){var b="<mediaItemList>";return b+="<mediaItem",b+=' mediaType="picture',b+='" componentType="photo',b+='" fileName="'+a.fileName,b+='" originalFileName="'+a.originalName,b+='" fileSize="'+a.fileSize,b+='" width="'+a.width,b+='" height="'+a.height,b+='" mimeType="'+a.mimeType,b+='" iconURL="'+a.iconUrl,b+='" version="'+a.ver,b+='" tags="'+o,b+='" />\n',b+="</mediaItemList>"}function C(a){var b=B(a),c=m+"/media/private/add",d=function(){return J("ERROR_AVIARY_TITLE","ERROR_AVIARY_UPLOAD_MESSAGE","Code: "+p.AVIARY_UPLOAD_UPDATE_MEDIA_FAILED.errorCode),!1},e=function(){D.call(this)}.bind(this);s("POST",c,b,d,e,"application/xml")}function D(){G.call(this),F.call(this),E.call(this,{result:"OK"})}function E(a){a=a||{},this.state.disableCloseButton||(this._aviaryCloseCause=a.result||"CANCEL",q.close(),this._forceClose||this.setTimeoutNamed("close",function(){this._forceClose=!0}.bind(this),2e3))}function F(){this.setState({disableCloseButton:!1})}function G(){if(this._newImageSize&&this._newImageUri){var a=this.props.imageLink.value.originalImageDataRef;a||(a=b.cloneDeep(this.props.imageLink.value),delete a.originalImageDataRef),this.props.imageLink.requestChange({height:this._newImageSize.height,width:this._newImageSize.width,uri:this._newImageUri,originalImageDataRef:a}),this._newImageSize=null,this._newImageUri=null}}function H(a,c){var d;d=a?{messageText:a,showMessage:!0}:{showMessage:!1},c?(d.showCancelButton=!0,window.XDomainRequest||(d.counter=0)):b.merge(d,{showCancelButton:!1,counter:null}),this.setState(d)}function I(a,b,c){q&&window.AV&&window.AV.paintWidgetInstance&&(a?(q.disableControls(),q.showWaitIndicator(),this.setState({disableCloseButton:!0}),H.call(this,b,c)):(q.enableControls(),q.hideWaitIndicator(),this.setState({disableCloseButton:!1,showMessage:!1})))}function J(a,b,c){var d=b&&h(b),e=window&&window.confirm||function(){};e(d,c)}function K(a){return function(){L.reactFunctions[a]&&L.reactFunctions[a]()}}function M(){L.reactFunctions={onLoad:this.onLoad,onAviarySave:this.onAviarySave,onAviaryClose:this.onAviaryClose,onAviaryReady:this.onAviaryReady,onAviarySaveButtonClick:this.onAviarySaveButtonClick,onError:this.onError},q?L.onLoad():q=new window.Aviary.Feather({apiKey:"57b23071b",apiVersion:3,tools:"crop,orientation,enhance,effects,frames,brightness,contrast,saturation,warmth,focus,sharpness,draw,redeye,whiten,blemish,stickers,text",maxSize:i,theme:"minimum",noCloseButton:!0,displayImageSize:!0,onLoad:L.onLoad,onSave:L.onAviarySave,onClose:L.onAviaryClose,onReady:L.onAviaryReady,onSaveButtonClicked:L.onAviarySaveButtonClick,onError:L.onError,appendTo:"aviary_dialog_editor_content_wrapper",language:N(this.getEditorAPI().getLanguageCode()),launchDelay:0})}function N(a){return a?a.toLowerCase():"en"}var h=e.translate,i=1500,j=e.serviceTopology.htmlEditorRootUrl;j=j?j.replace(/html\/editor\/?/,""):"http://editor.wix.com/";var q,k=e.serviceTopology.mediaServerRoot,l="//editor.",m=l+k,n="//0.static."+k+"/api/add_file",o="edited image",p={AVIARY_MISSING_ID_IN_SKIN:{errorCode:21030,desc:"Missing an id on this._skinParts.content, it is required for Aviary to work"},AVIARY_DIALOG_WRONG_DATA_TYPE:{errorCode:21031,desc:"Data is missing or Data Type is not an Image Data"},AVIARY_NOT_LOADED:{errorCode:21032,desc:"Aviary.js was not loaded after 5000ms"},AVIARY_FORCE_CLOSED:{errorCode:21033,desc:"Aviary dialog was not closed on first try, forced it to close on second try"},AVIARY_UPLOAD_GET_TICKET_FAILED:{errorCode:21034,params:{c1:"error message"},desc:"Failed on getting ticket for upload."},AVIARY_UPLOAD_TO_STATIC_FAILED:{errorCode:21035,params:{c1:"error message"},desc:"Uploading image to statics failed."},AVIARY_UPLOAD_UPDATE_MEDIA_FAILED:{errorCode:21036,params:{c1:"error message"},desc:"Updating private media with uploaded file failed."},AVIARY_RETURNED_AN_ERROR:{errorCode:21037,params:{c1:"error message",i1:"error code"},desc:"Aviary editor failed on external script error."},AVIARY_REACHED_INNER_SAVE_FUNCTION:{errorCode:21038,desc:"Aviary somehow called its inner save function, this does not supposed to happen."}},L={reactFunctions:{},onLoad:K("onLoad"),onAviarySave:K("onAviarySave"),onAviaryClose:K("onAviaryClose"),onAviaryReady:K("onAviaryReady"),onAviarySaveButtonClick:K("onAviarySaveButtonClick"),onError:K("onError")};return a.createClass({displayName:"aviaryPanel",mixins:[e.postMessageMixin,g.timerMixins.timeoutsMixin,d.mixins.editorAPIMixin],propTypes:{imageLink:a.PropTypes.object,onDialogResult:a.PropTypes.func,editorAPI:a.PropTypes.object.isRequired},getInitialState:function(){var a=r(this.props);return b.merge(a,{tmpImageId:"some_random_id_"+Date.now(),disableCloseButton:!0,showMessage:!0,messageText:null,showCancelButton:!1,counter:null}),a},componentWillReceiveProps:function(a){this.setState(r(a))},componentDidMount:function(){M.call(this),this.setTimeoutNamed("aviaryIsDeadTimer",function(){this.setState({disableCloseButton:!1})}.bind(this),1e4),H.call(this,h("AVIARY_LOAD_MESSAGE","Loading Image Editor..."),!1)},componentWillMount:function(){var a=c("<img/>",{id:this.state.tmpImageId,src:this.state.tmpImageSrc,type:this.state.tmpImageType,crossOrigin:""});this.image=a.get(0)},launchAviary:function(){var a=h("AVIARY_ORIGINAL_ASPECT");q.launch({image:this.state.tmpImageId,cropPresetDefault:a,cropPresets:[[a,v.call(this)],"Custom"]})},onLoad:function(){var a=h("AVIARY_ORIGINAL_ASPECT");q.launch({image:this.image,cropPresetDefault:a,cropPresets:[[a,v.call(this)],"Custom"]})},onAviarySave:function(){return!1},onAviaryClose:function(){this.clearTimeoutNamed("close"),this._forceClose=!1,this.props.onDialogResult&&this.props.onDialogResult(this._aviaryCloseCause)},onAviaryReady:function(){this.clearTimeoutNamed("aviaryIsDeadTimer"),this.setState({showMessage:!1,disableCloseButton:!1})},onAviarySaveButtonClick:function(){var a=JSON.parse(q.getActionList()),b=a&&a.actionlist&&a.actionlist.length>1,c=this.refs.content.getDOMNode().querySelector("#avpw_canvas_element"),d="";return b?(I.call(this,!0,h("AVIARY_WAIT_MESSAGE","Uploading image, please wait..."),!0),d=encodeURIComponent(c.toDataURL(this.state.tmpImageType)),this._newImageSize={width:c.width,height:c.height},u.call(this,d,A.bind(this))):E.call(this,{result:"CANCEL"}),!1},onProgress:function(a){if(a.lengthComputable){var b=Math.round(a.loaded/a.total*100);this.setState({counter:b})}},onAbort:function(){return I.call(this,!1),this._xhrObject=null,!1},onError:function(a){return J("ERROR_AVIARY_TITLE","ERROR_AVIARY_GENERAL_MESSAGE","Codes: "+p.AVIARY_RETURNED_AN_ERROR.errorCode+", "+a.code),!1},onCloseFrame:function(){E.call(this)},componentWillUnmount:function(){E.call(this)},onCancelClicked:function(){this._xhrObject?(this._xhrObject.abort(),window.XDomainRequest&&this.onAbort()):I.call(this,!1)},render:function(){return f.call(this)}})}),define("panels/focusPanels/organizeImagesPanel.rt",["react/addons","lodash","baseUI","panels/frames/focusPanelFrame","util","symbols","experiment!organizeimagesrestyled"],function(a,b,c,d,e,f,g){"use strict";return function(){return a.createElement(d,{panelName:this.props.panelName,title:g?"":this.state.title,helpId:this.state.helpId,className:"organize-images-panel",shouldNotCloseOnBlur:!0,shouldHideHeader:g,onClose:this.onPanelClose,width:Math.round(.8*window.innerWidth).toString(),height:Math.round(.8*window.innerHeight).toString()},a.createElement("iframe",{id:"organizeImages",ref:"iframe",className:b.keys(b.pick({hidden:!this.state.show,transition:!0},b.identity)).join(" "),onLoad:this.onLoad,width:"100%",height:"100%",src:this.getFrameUrl(),frameBorder:"0",allowTransparency:!0}),a.createElement(c.preloader,{ref:"preloader",className:b.keys(b.pick({hidden:this.state.show,transition:!0},b.identity)).join(" ")}))}}),define("panels/focusPanels/organizeImagesPanel",["react","lodash","util","panels/focusPanels/organizeImagesPanel.rt","panels/panelManager/panelManagerFactory","pms","core","helpIds"],function(a,b,c,d,e,f,g,h){"use strict";function l(){var a=this.getEditorAPI();a.bi.event(j.ORGIMAGES_DIALOG_LOADED,{c1:"new Organize Images"}),this._isReady=!0;var b=m.call(this);this._pms.send("set",b)}function m(){return{images:this.props.imageDatas,thumb:{mode:k[this.props.imageMode]},translation:c.imageOrganizerUtils.getTranslation(this.props.galleryType),topology:c.serviceTopology,isPreset:this.props.isPreset,userSets:this.userSets}}function n(a){var b=a.data&&a.data.helpId;b&&e.getManager().openHelpCenter(b)}function o(){var b,d,a=p.call(this);this.props.galleryType===i?(d="6377d68a-a81f-4fd7-a675-f5a79f7e7ea9",b=c.translate("ORGANIZE_ICONS_DIALOG_TITLE")):(d=h.EXTERNAL.ORGANIZE_IMAGES,b=c.translate("OrganizeImages_IMAGES_DIALOG_TITLE")),this.setState({helpId:d,title:b,show:!0}),a.contentWindow.focus()}function p(){return this.refs.iframe.getDOMNode()}function q(a){var c=this.props.createImageDataItem();return b.merge(c,a),c}function r(a,c){var d,e=b.find(a,{id:c.id});return e&&(d=b.merge(e.data,c.data)),d}function s(a){var d,f,c=a.data,e=this.props.imageDatas;d=b.map(c,function(a){return f=-1!==a.id.indexOf("new_")?q.call(this,a.data):r(e,a)},this),this.props.imagesChanged(d)}function t(){e.getManager().closePanelByName(this.props.panelName)}function u(a){var c=this.getEditorAPI(),d=a.data,e=c.bi.event;console.log("bi events",a),b.forOwn(d,function(a,b){e(j[b],d[b])})}function v(a){var b=this.getEditorAPI(),c=a.data,d=c.params||{};console.log("bi events",a),b.bi.event(j[c.name],d)}function w(a){a=a.data;var b=this.getEditorAPI(),d={defaultItemType:"ExternalLink",data:{pages:b.pages.getPagesData(),anchors:b.getAnchors(),menuItems:b.mainMenu.getMenu(),currentPageId:b.pages.getCurrentPageId()},link:a.data.link,createDefaultData:b.data.createItem,callback:function(d){d&&d.type||(d=null),this._pms.send("setLink",{link:d,linkText:d?c.linkRenderer.renderLinkDataItemForPropertyPanel(b,d):"",imgData:a,id:a.id}),b.panelManager.closePanelByName("panels.toolPanels.linkPanel")}.bind(this)};b.panelManager.openPanel("panels.toolPanels.linkPanel",d,!0)}function x(a,d){var e,g,f={title:"ORGANIZE_IMAGES_MEDIA_MNGR_TITLE",submit:"ORGANIZE_IMAGES_MEDIA_MNGR_SUBMIT"},h=this.getEditorAPI().mediaServices.mediaManager;switch(this.props.galleryType){case i:b.forEach(f,function(a,b){f[b]=a.replace("IMAGES","ICONS")}),e=h.categories.ICON_SOCIAL;break;default:e=h.categories.IMAGE}g=a?"_MANY":"_ONE",h.open(e,{multiSelect:a,translation:{title:c.translate(f.title+g),submitButton:c.translate(f.submit+g)},callback:d.bind(this)})}function z(){return"new_"+y++}var i="socialIcons",j=g.bi.events.organizeImages,k={clipImage:"crop",flexibleWidthFixed:"fit"},y=0;return a.createClass({displayName:"organizeImagesPanel",mixins:[c.postMessageMixin,g.mixins.editorAPIMixin],propTypes:{imageDatas:a.PropTypes.arrayOf(a.PropTypes.object).isRequired,isPreset:a.PropTypes.bool.isRequired,imageMode:a.PropTypes.string.isRequired,galleryType:a.PropTypes.oneOf(["images",i]).isRequired,imagesChanged:a.PropTypes.func.isRequired,createImageDataItem:a.PropTypes.func.isRequired},getUserPrefs:function(){return this.getEditorAPI().getUserPreferences()},getInitialState:function(){return this.userSets=this.getUserPrefs().global.get("OrganizeImages"),this._pms=new f({connectionID:"OrganizeImages"}),this._pms.on("ready",l,this),this._pms.on("setup",o,this),this._pms.on("closed",t,this),this._pms.on("openLinkDialog",w,this),this._pms.on("save",s,this),this._pms.on("bi",v,this),this._pms.on("biChanges",u,this),this._pms.on("openHelpCenter",n,this),this._pms.on("openMediaGallery",this.openMediaGallery,this),this._pms.on("openMediaGalleryForReplace",this.openMediaGalleryForReplace,this),{show:!1}},openMediaGallery:function(){x.call(this,!0,function(a){if(a){var c=[];b.forEach(a,function(a){var b=q.call(this,{uri:a.fileName,height:a.height,width:a.width,title:a.title||a.fileName});c.push({id:z(),data:b,linkText:""})},this),this._pms.send("add",c)}})},openMediaGalleryForReplace:function(a){var c=a.data.position;x.call(this,!1,function(a){if(a){var d=[];b.forEach(a,function(a){var b=q.call(this,{uri:a.fileName,height:a.height,width:a.width,title:a.title||a.fileName});d.push({id:z(),data:b,linkText:""})},this),d.length<=0||this._pms.send("replace",{position:c,data:d[0]})}})},getFrameUrl:function(){return c.imageOrganizerUtils.getFrameUrl(this.props.galleryType)},componentDidMount:function(){this._pms.setTargetWindow(p.call(this).contentWindow),p.call(this).addEventListener("load",this.onFrameLoad)},onFrameLoad:function(){this._pms.on("setUserSets",this.setUserSettings,this)},setUserSettings:function(a){var c=this.userSets=a.data;this.getUserPrefs().global.set("OrganizeImages",b.assign(c,{saveNow:!0}))},onPanelClose:function(){var a=this.getEditorAPI();return this._isReady?(this._pms.send("saveAndClose"),a.bi.event(j.ORGIMAGES_CLICK_CLOSE),!1):!0},render:d})}),define("panels/focusPanels/popupTemplate.rt",["react/addons","lodash","panels/frames/focusPanelFrame","baseUI","symbols","util"],function(a,b,c,d,e,f){"use strict";function g(){var b=f.translate;return a.createElement(c,{shouldHideHeader:!0,panelName:this.props.panelName},a.createElement("div",{className:"popup-template-panel "+this.props.className},a.createElement("div",{className:"panel-header dark"},a.createElement("button",{className:"close",onClick:this.close},a.createElement(e.symbol,{name:"headerCloseButton"})),this.props.h1text?a.createElement("h1",{key:"h1text"},b(this.props.h1text)):null,this.props.h2text?a.createElement("h2",{key:"h2text"},b(this.props.h2text)):null,a.createElement("div",{className:"image"},a.createElement(d.symbol,{name:this.props.symbolName,className:"popup-symbol"}))),a.createElement("div",{className:"content"},a.createElement("div",{className:"panel-text"},a.createElement("span",{},b(this.props.bodyText)+" "),this.props.helpId?a.createElement("span",{key:"learnMoreLink",className:"learn-more-link",onClick:this.openLearnMore},b("Notification_Box_Learn_More")):null),a.createElement("div",{className:"bottom-controls"},a.createElement(d.toggle,{name:"checkbox",labelAfterSymbol:!0,className:"dont-show-again",label:"Notification_Box_Dont_Show_Again",valueLink:this.linkDontShowAgainValue()}),a.createElement(d.button,{className:"btn-ok btn-md",onClick:this.close,label:"Notification_Box_Got_It"})))))}return function(){return g.apply(this,[])}}),define("panels/focusPanels/popupTemplate",["react","lodash","panels/mixins/panelFrameMixin","panels/mixins/dontShowAgainMixin","panels/focusPanels/popupTemplate.rt"],function(a,b,c,d,e){"use strict";return a.createClass({displayName:"popupTemplate",propTypes:{editorAPI:a.PropTypes.object.isRequired,panelName:a.PropTypes.string.isRequired,h1text:a.PropTypes.string,h2text:a.PropTypes.string,symbolName:a.PropTypes.string.isRequired,bodyText:a.PropTypes.string,helpId:a.PropTypes.string,dontShowAgainKey:a.PropTypes.string.isRequired,userPrefType:a.PropTypes.oneOf(["site","session","global"])},mixins:[c,d],getInitialState:function(){return{dontShowAgain:this.getDontShowAgain()}},openLearnMore:function(){this.props.editorAPI.help.openHelpCenter(this.props.helpId)},render:e})}),define("panels/focusPanels/outOfGridMobilePanel.rt",["react/addons","lodash","core","panels/focusPanels/popupTemplate"],function(a,b,c,d){"use strict";return function(){return a.createElement(d,{editorAPI:this.getEditorAPI(),panelName:this.props.panelName,h1text:"Notification_Box_Out_Grid_Mobile_Title",h2text:"Notification_Box_Out_Grid_Mobile_Subtitle",symbolName:"outOfGridMobile",bodyText:"Notification_Box_Out_Grid_Mobile_Text",helpId:"769b8807-30b7-4ee4-8a7b-93674099732f",dontShowAgainKey:c.constants.USER_PREFS.OUT_OF_GRID.MOBILE.OUT_OF_GRID_DONT_SHOW_AGAIN,userPrefType:"site"})}}),define("panels/focusPanels/outOfGridMobilePanel",["react","core","panels/focusPanels/outOfGridMobilePanel.rt"],function(a,b,c){"use strict";return a.createClass({displayName:"outOfGridMobilePanel",mixins:[b.mixins.editorAPIMixin],render:c})}),define("panels/focusPanels/outOfGridDesktopPanel.rt",["react/addons","lodash","core","panels/focusPanels/popupTemplate"],function(a,b,c,d){"use strict";return function(){return a.createElement(d,{editorAPI:this.getEditorAPI(),panelName:this.props.panelName,h1text:"Notification_Box_Out_Grid_Desktop_Title",symbolName:"outOfGridDesktop",bodyText:"Notification_Box_Out_Grid_Desktop_Text",helpId:"fe18731a-6371-4fe3-bdb0-718bfd9e5216",dontShowAgainKey:c.constants.USER_PREFS.OUT_OF_GRID.DESKTOP.OUT_OF_GRID_DONT_SHOW_AGAIN,userPrefType:"site"})}}),define("panels/focusPanels/outOfGridDesktopPanel",["react","core","panels/focusPanels/outOfGridDesktopPanel.rt"],function(a,b,c){"use strict";return a.createClass({displayName:"outOfGridDesktopPanel",mixins:[b.mixins.editorAPIMixin],render:c})}),define("panels/focusPanels/dragToHeaderPanel.rt",["react/addons","lodash","core","panels/focusPanels/popupTemplate"],function(a,b,c,d){"use strict";return function(){return a.createElement(d,{editorAPI:this.getEditorAPI(),panelName:this.props.panelName,h1text:"Notification_Box_Header_Added_Title",h2text:"Notification_Box_Header_Added_Subtitle",symbolName:"showOnAllPages",bodyText:"Notification_Box_Header_Added_Text",helpId:"db639aa7-f012-4526-9390-ef466c95f19d",dontShowAgainKey:c.constants.USER_PREFS.DRAG_TO_HEADER.DONT_SHOW_AGAIN,userPrefType:c.constants.USER_PREFS.TYPES.SITE})}}),define("panels/focusPanels/dragToHeaderPanel",["react","core","panels/focusPanels/dragToHeaderPanel.rt"],function(a,b,c){"use strict";return a.createClass({displayName:"dragToHeaderPanel",mixins:[b.mixins.editorAPIMixin],render:c})}),define("panels/focusPanels/spotifySearchFocusPanel.rt",["react/addons","lodash","panels/frames/focusPanelFrame","helpIds"],function(a,b,c,d){"use strict";return function(){return a.createElement(c,{ref:"focusPanelFrame",title:this.translateIfNeeded("Spotify_Player_Settings_Search"),panelName:this.props.panelName,className:"spotify-search-panel",helpId:d.EXTERNAL.SEARCH_SPOTIFY},a.createElement("iframe",{className:"content-iframe",src:this.props.iframeSrc}))}}),define("panels/focusPanels/spotifySearchFocusPanel",["react","lodash","util","panels/focusPanels/spotifySearchFocusPanel.rt"],function(a,b,c,d){"use strict";return a.createClass({displayName:"spotifySearch",mixins:[c.translationMixin,c.postMessageMixin],render:d,componentDidMount:function(){this.setPostMessageHandlerNamed("spotifySearch",this.props.id,this.onMessageFromDialog)},onMessageFromDialog:function(a){b.isFunction(this.props.callback)&&this.props.callback(a),this.refs.focusPanelFrame.closeFrame()}})}),define("panels/focusPanels/iTunsLinkMaker.rt",["react/addons","lodash","panels/frames/focusPanelFrame","helpIds"],function(a,b,c,d){"use strict";return function(){return a.createElement(c,{title:this.translateIfNeeded("iTunes_Link_Maker_Title"),panelName:this.props.panelName,helpId:d.EXTERNAL.SEARCH_ITUNES,className:"itunes-link-maker"},a.createElement("iframe",{className:"content-iframe",src:"https://linkmaker.itunes.apple.com"}))}}),define("panels/focusPanels/iTunsLinkMaker",["react","lodash","util","panels/focusPanels/iTunsLinkMaker.rt"],function(a,b,c,d){"use strict";return a.createClass({displayName:"iTunesLinkMaker",mixins:[c.translationMixin],render:d})}),define("panels/focusPanels/musicPromotionPanel.rt",["react/addons","lodash","panels/frames/focusPanelFrame","util","baseUI","symbols"],function(a,b,c,d,e,f){"use strict";function g(){this.handleAction("image")}function h(){this.handleAction("date kink")}function i(){this.handleAction("submission button")}return function(){return a.createElement(c,{ref:"frame",panelName:this.props.panelName,shouldHideHeader:!0,shouldHideHelp:!0,className:"music-promo-panel"},a.createElement("header",{className:"panel-header dark"},a.createElement("button",{className:"close",onClick:this.refs.frame&&this.refs.frame.close},a.createElement(f.symbol,{name:"headerCloseButton"})),a.createElement("div",{className:"title"},d.translate("MUSIC_PROMOTION_HEADER_2")),a.createElement("div",{className:"image-wrapper",onClick:g.bind(this)},a.createElement("div",{className:"upper-box"}),a.createElement("div",{className:"right-box"}),a.createElement("img",{ref:"image",src:this.getImageSrc()}),a.createElement("div",{className:"lower-box"}))),a.createElement("div",{className:"content"},a.createElement("p",{},d.translate("MUSIC_PROMOTION_BODY_LINE1")+" "+d.translate("MUSIC_PROMOTION_BODY_LINE2")+" ",a.createElement("a",{onClick:h.bind(this)},d.translate("MUSIC_PROMOTION_BODY_B4_ENDS"))),a.createElement("p",{},d.translate("MUSIC_PROMOTION_BODY_EASY")),a.createElement(e.button,{label:"MUSIC_PROMOTION_BUTTON_SUBMIT",onClick:i.bind(this)})))}}),define("panels/focusPanels/musicPromotionPanel",["react","lodash","core","util","staticAssets","panels/focusPanels/musicPromotionPanel.rt"],function(a,b,c,d,e,f){"use strict";return a.createClass({displayName:"musicPromotionPanel",mixins:[c.mixins.editorAPIMixin],getImageSrc:function(){var a=d.browserUtil.getDevicePixelRatio();return a>=2?d.media.getMediaUrl(e.staticAssetsMap["panels/focusPanels/musicPromotionPopupRetina.png"]):d.media.getMediaUrl(e.staticAssetsMap["panels/focusPanels/musicPromotionPopup.png"])},handleAction:function(a){var b=d.translate("MUSIC_PROMOTION_BUTTON_SUBMIT_URL");this.sendSubmitVideoClickedBI(a),window&&window.open(b)},sendSubmitVideoClickedBI:function(a){var b=c.bi.events.musicPromotionPopup.submit_video_clicked,d={origin:a};this.getEditorAPI().bi.event(b,d)},render:f})}),define("panels/focusPanels/sizeRestrictionPanel.rt",["react/addons","lodash","core","panels/focusPanels/popupTemplate"],function(a,b,c,d){"use strict";return function(){return a.createElement(d,{editorAPI:this.getEditorAPI(),panelName:this.props.panelName,h1text:this.props.title,symbolName:"bigtopin",bodyText:this.props.content,dontShowAgainKey:c.constants.PANELS.PIN_TOO_BIG.PIN_TOO_BIG_DONT_SHOW_AGAIN,userPrefType:"site"})}}),define("panels/focusPanels/sizeRestrictionPanel",["react","core","lodash","panels/focusPanels/sizeRestrictionPanel.rt"],function(a,b,c,d){"use strict";return a.createClass({mixins:[b.mixins.editorAPIMixin],displayName:"sizeRestrictionPanel",componentDidMount:function(){var a=this.getEditorAPI();a.bi.event(b.bi.events.pinToScreen.NOTIFICATION_TOO_BIG,{state:this.props.state,component_type:a.getComponentType(a.selection.getSelectedComponents())})},render:d})}),define("panels/focusPanels/focusPanels",["panels/focusPanels/exampleFocusPanel","panels/focusPanels/videoSearchPanel","panels/focusPanels/blogManagerPanel","panels/focusPanels/aviaryPanel","panels/focusPanels/organizeImagesPanel","panels/focusPanels/outOfGridMobilePanel","panels/focusPanels/outOfGridDesktopPanel","panels/focusPanels/dragToHeaderPanel","panels/focusPanels/spotifySearchFocusPanel","panels/focusPanels/iTunsLinkMaker","panels/focusPanels/musicPromotionPanel","panels/focusPanels/sizeRestrictionPanel"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";return{exampleFocusPanel:a,videoSearchPanel:b,blogManagerPanel:c,aviaryPanel:d,organizeImagesPanel:e,outOfGridMobilePanel:f,outOfGridDesktopPanel:g,dragToHeaderPanel:h,spotifySearchFocusPanel:i,iTunsLinkMaker:j,musicPromotionPanel:k,sizeRestrictionPanel:l}}),define("panels/messagePanels/exampleMessagePanel.rt",["react/addons","lodash","panels/frames/messagePanelFrame"],function(a,b,c){"use strict";return function(){return a.createElement(c,{panelName:this.props.panelName,width:"500",height:"500",onConfirm:this.onConfirm,confirmLabel:"OK",title:"Hello"},a.createElement("div",{},"content here"))}}),define("panels/messagePanels/exampleMessagePanel",["react","lodash","panels/messagePanels/exampleMessagePanel.rt"],function(a,b,c){"use strict";return a.createClass({displayName:"exampleMessage",onConfirm:function(){console.log("onConfirm called")},render:c})}),define("panels/messagePanels/saveYourSitePanel.rt",["react/addons","lodash","util","baseUI","panels/frames/messagePanelFrame"],function(a,b,c,d,e){"use strict";return function(){return a.createElement(e,{ref:"frame",panelName:this.props.panelName,className:"save-your-site-panel",panelTitle:c.translate(this.props.title),confirmLabel:"TOPBAR_SETTINGS_BUTTON_SAVE",onConfirm:this.handleSave,keyboardShortcuts:this.keyboardShortcuts},a.createElement("div",{className:"content-wrapper"},a.createElement("div",{className:"logo"},a.createElement(d.symbol,{name:"saveYourWork"})),a.createElement("div",{className:"message"},c.translate(this.props.messageBody))))}}),define("panels/messagePanels/saveYourSitePanel",["react","lodash","core","panels/messagePanels/saveYourSitePanel.rt"],function(a,b,c,d){"use strict";return a.createClass({displayName:"saveYourSitePanel",mixins:[c.mixins.editorAPIMixin],propTypes:{saveMethod:a.PropTypes.func.isRequired,title:a.PropTypes.string.isRequired,messageBody:a.PropTypes.string.isRequired},getInitialState:function(){return this.keyboardShortcuts={enter:this.handleSave,esc:this.close},{}},handleSave:function(){this.close(),this.props.saveMethod()},close:function(){this.refs.frame.close()},render:d})}),define("panels/messagePanels/siteRevisionsPanel.rt",["react/addons","lodash","baseUI","util","panels/frames/messagePanelFrame"],function(a,b,c,d,e){"use strict";return function(){return a.createElement(e,{ref:"frame",panelName:this.props.panelName,panelTitle:d.translate("TOPBAR_SITE_HISTORY_MSG_TITLE"),confirmLabel:"TOPBAR_SITE_HISTORY_MSG_BUTTON",onConfirm:this.onConfirm,className:"site-revisions-panel",onCancel:this.onCloseFrame},a.createElement("div",{className:"content-wrapper"},a.createElement("div",{className:"image-container"},a.createElement(c.symbol,{name:"siteHistoryClipart"})),a.createElement("div",{className:"description-container"},a.createElement("p",{},d.translate("TOPBAR_SITE_HISTORY_MSG_BODY1")),a.createElement("p",{},d.translate("TOPBAR_SITE_HISTORY_MSG_BODY2")))));
}}),define("panels/messagePanels/siteRevisionsPanel",["react","panels/messagePanels/siteRevisionsPanel.rt"],function(a,b){"use strict";return a.createClass({displayName:"siteRevisionsPanel",mixins:[a.addons.LinkedStateMixin],onConfirm:function(){this.props.onButtonClick&&this.props.onButtonClick(!0)},onCloseFrame:function(){this.props.onButtonClick&&this.props.onButtonClick(!1)},render:b})}),define("panels/messagePanels/messagePanels",["panels/messagePanels/exampleMessagePanel","panels/messagePanels/saveYourSitePanel","panels/messagePanels/siteRevisionsPanel"],function(a,b,c){"use strict";return{exampleMessage:a,saveYourSitePanel:b,siteRevisionsPanel:c}}),define("panels/toolPanels/exampleToolPanel.rt",["react/addons","lodash","panels/frames/toolPanelFrame"],function(a,b,c){"use strict";return function(){return a.createElement(c,{panelName:this.props.panelName,headerTitle:"Tools Panel",width:"500",height:"200",top:this.props.top,left:this.props.left},a.createElement("div",{},"content here"))}}),define("panels/toolPanels/exampleToolPanel",["react","lodash","panels/toolPanels/exampleToolPanel.rt"],function(a,b,c){"use strict";return a.createClass({displayName:"exampleToolPanel",getDefaultProps:function(){return{top:"200px",left:"300px"}},render:c})}),define("panels/toolPanels/linkPanel/linkPanel.rt",["react/addons","lodash","panels/frames/toolPanelFrame","baseUI","util","symbols","experiment!wixstaff"],function(a,b,c,d,e,f,g){"use strict";function h(b,c,e,f){return a.createElement(d.dropDown.option,{className:e.level?"level"+e.level:"",key:e.id,value:e.id},e.title,this.getCurrentPageThisTranslate(e.id))}function i(b,c,e,f){return a.createElement(d.dropDown.option,{shouldTranslate:!1,key:e.value,value:e.value},e.label)}function j(a,b,c){this.setState({isValid:c})}function k(a,b,c){this.setState({isValid:c})}function l(a,b,c){this.setState({isValid:c})}function m(b,c,e,f){return a.createElement(d.dropDown.option,{key:e.value,value:e.value},e.label)}function n(){var n=this.isSectionVisible("PageLink"),o=this.isSectionVisible("NoLink");return a.createElement(c,{helpId:"650e4ba4-4aa8-4484-957a-cc9db36be6d9",panelName:this.props.panelName,headerTitle:e.translate("LINK_PANEL_HEADER_PANE_LABEL"),ref:"frame",className:"link-panel"},a.createElement(d.tabs.holder,{valueLink:this.linkSelectedTab(),className:"left radio"},a.createElement(d.tabs.header,{},o?a.createElement(d.tabs.label,{htmlFor:"NoLink",key:"noLinkTabLabel"},this.translateIfNeeded("LINK_PANEL_TAB_NONE")):null,n?a.createElement(d.tabs.label,{htmlFor:"PageLink",key:"pageLinkTabLabel"},this.translateIfNeeded(this.props.pageTabTitle?this.props.pageTabTitle:"LINK_PANEL_TAB_SITE_PAGE")):null,a.createElement(d.tabs.label,{htmlFor:"ExternalLink"},this.translateIfNeeded("LINK_PANEL_TAB_WEB_ADDRESS")),a.createElement(d.tabs.label,{htmlFor:"EmailLink"},this.translateIfNeeded("LINK_PANEL_TAB_EMAIL")),a.createElement(d.tabs.label,{htmlFor:"DocumentLink"},this.translateIfNeeded("LINK_PANEL_TAB_DOCUMENT")),a.createElement(d.tabs.label,{htmlFor:"TopAnchorLink"},this.translateIfNeeded("LINK_PANEL_TAB_Top_Page")),a.createElement(d.tabs.label,{htmlFor:"BottomAnchorLink"},this.translateIfNeeded("LINK_PANEL_TAB_Bottom_Page")),g?a.createElement(d.tabs.label,{htmlFor:"LoginToWixLink",key:"homePageLoginTabLabel"},this.translateIfNeeded("LINK_PANEL_HOME_PAGE_LOGIN")):null),a.createElement(d.tabs.content,{},o?a.createElement(d.tabs.tab,{name:"NoLink",className:"none",key:"NoLinkTab"},a.createElement(f.symbol,{name:"link-panel-none-clipart"}),a.createElement("h3",{},this.translateIfNeeded("LINK_PANEL_PAGE_DROP_DOWN_Title")),a.createElement("p",{},this.translateIfNeeded("LINK_PANEL_PAGE_DROP_DOWN_Text"))):null,n?a.createElement(d.tabs.tab,{name:"PageLink",className:"page",key:"pageLinkTab"},a.createElement.apply(this,[d.dropDown.select,{label:this.props.pageTabPageDropDownTitle?this.props.pageTabPageDropDownTitle:"LINK_PANEL_PAGE_DROP_DOWN_LABEL",valueLink:this.linkToPage()},b.map(this.pagesList,h.bind(this,n,o))]),a.createElement.apply(this,[d.dropDown.select,{label:"LINK_PANEL_PAGE_ANCHOR_DROP_DOWN_LABEL",disabled:!Boolean(this.state.link)||!Boolean(this.state.link.pageId)||!Boolean(this.hasAnchors()),valueLink:this.linkToAnchor()},b.map(this.getDropDownOptions(),i.bind(this,n,o))]),a.createElement(d.tooltip,{value:this.getAnchorTooltipValue(),interactive:!0,alignment:d.uiConstants.TOOLTIP.ALIGNMENT.TOP,width:"300px"},a.createElement(d.button,{className:"btn-text",label:"Anchor_Settings_How_Link_Text"}))):null,a.createElement(d.tabs.tab,{name:"ExternalLink",className:"web"},a.createElement(d.textInput,{ref:"webAddress",key:"webAddress",label:"LINK_PANEL_WEB_ADDRESS_INPUT_LABEL",placeholder:"LINK_PANEL_WEB_ADDRESS_DEFAUL",valueLink:this.linkTo("url"),validator:e.validate.url,invalidMessage:"Validation_V2_URL",focus:!0,onChangeInValidationStatus:j.bind(this,n,o)}),a.createElement(d.radioButtons,{label:"LINK_PANEL_WEB_ADDRESS_OPTIONS_LABEL",options:[{label:"LINK_PANEL_WEB_ADDRESS_OPTION1",value:"_blank"},{label:"LINK_PANEL_WEB_ADDRESS_OPTION2",value:"_self"}],valueLink:this.linkTo("target")})),a.createElement(d.tabs.tab,{name:"EmailLink",className:"email"},a.createElement(d.textInput,{ref:"emailAddress",key:"emailAddress",label:"LINK_PANEL_EMAIL_INPUT_LABEL",placeholder:"LINK_PANEL_EMAIL_INPUT_DEFAULT",valueLink:this.linkTo("recipient"),validator:function(a){return e.validate.email(a)&&e.validate.notEmpty(a)},invalidMessage:"Validation_V1_Email",focus:!0,onChangeInValidationStatus:k.bind(this,n,o)}),a.createElement(d.textInput,{label:"LINK_PANEL_EMAIL_SUBJUCT",placeholder:"LINK_PANEL_EMAIL_SUBJECT_DEFAULT",valueLink:this.linkTo("subject"),validator:e.validate.noHTMLTags,invalidMessage:"Validation_V21_InvalidInput(<>)",onChangeInValidationStatus:l.bind(this,n,o)})),a.createElement(d.tabs.tab,{name:"DocumentLink",className:"document"},a.createElement("label",{},this.translateIfNeeded("LINK_PANEL_DOCUMENT_LABEL")),a.createElement(d.changeMediaInput,{buttonLabelWithItems:"LINK_PANEL_DOCUMENT_BUTTON",buttonLabelWithoutItems:"LINK_PANEL_DOCUMENT_BUTTON",selectionType:"single",value:this.state.link?this.state.link.name:"",onChange:this.documentChanged})),a.createElement(d.tabs.tab,{name:"TopAnchorLink",className:"top-anchor-link"},a.createElement(f.symbol,{name:"link-panel-top-clipart"}),a.createElement("h3",{},e.translate("LINK_PANEL_Top_Page_Title")),a.createElement("p",{className:"firstSentence"},e.translate("LINK_PANEL_Top_Page_Text_1")),a.createElement("p",{className:"secondSentence"},e.translate("LINK_PANEL_Top_Page_Text_2"))),a.createElement(d.tabs.tab,{name:"BottomAnchorLink",className:"bottom-anchor-link"},a.createElement(f.symbol,{name:"link-panel-bottom-clipart"}),a.createElement("h3",{},e.translate("LINK_PANEL_Bottom_Page_Title")),a.createElement("p",{className:"firstSentence"},e.translate("LINK_PANEL_Bottom_Page_Text_1")),a.createElement("p",{className:"secondSentence"},e.translate("LINK_PANEL_Bottom_Page_Text_2"))),g?a.createElement(d.tabs.tab,{name:"LoginToWixLink",className:"home-page-link",key:"homePageLoginTab"},a.createElement(d.textInput,{ref:"postLogin",key:"postLogin",label:"LINK_PANEL_POST_LOGIN_INPUT",valueLink:this.linkTo("postLoginUrl")}),a.createElement(d.textInput,{ref:"postSignup",key:"postSignup",label:"LINK_PANEL_POST_SIGNUP_INPUT",valueLink:this.linkTo("postSignupUrl")}),a.createElement.apply(this,[d.dropDown.select,{label:"LINK_PANEL_VIEW_DROPDOWN",valueLink:this.linkTo("dialog")},b.map([{label:"LINK_PANEL_VIEW_SHOW_LOGIN",value:"showLogin"},{label:"LINK_PANEL_VIEW_LOGIN",value:"login"},{label:"LINK_PANEL_VIEW_SIGNUP",value:"createUser"}],m.bind(this,n,o))]),a.createElement(d.toggle,{ref:"sendMail",key:"sendMail",label:"LINK_PANEL_SEND_MAIL_TOGGLE",valueLink:this.linkTo("sendMail")}),a.createElement(d.textInput,{ref:"welcomeEmail",key:"welcomeEmail",label:"LINK_PANEL_WELCOME_EMAIL_INPUT",valueLink:this.linkTo("mailTemplate")}),a.createElement(d.textInput,{ref:"color",key:"color",label:"LINK_PANEL_USER_COLOR_INPUT",valueLink:this.linkTo("userColor")})):null)),a.createElement("footer",{},a.createElement(d.button,{label:"LINK_PANEL_CANCEL_BUTTON",onClick:this.close,className:"btn-confirm-secondary"}),a.createElement(d.button,{label:"LINK_PANEL_DONE_BUTTON",onClick:this.done,className:"btn-confirm-primary",disabled:this.isOkDisabled()})))}return function(){return n.apply(this,[])}}),define("panels/toolPanels/linkPanel/linkPanel",["react","baseUI","lodash","util","core","panels/panelManager/panelManagerFactory","panels/toolPanels/linkPanel/linkPanel.rt"],function(a,b,c,d,e,f,g){"use strict";function h(a,b){return c.any(b,{id:a.pageId.replace("#","")})?{type:"PageLink",pageId:a.pageId}:null}function i(a,b){return a&&!/^\s*\w+:\/\//.test(a)?b+"://"+a.trim():a}function j(a,b){return"ExternalLink"!==a.type||b.webAddress.isValueValid()}function k(a,b){return"EmailLink"!==a.type||b.emailAddress.isValueValid()}function l(a){return"PageLink"!==a.type||a.pageId}function m(a){return"AnchorLink"!==a.type||a.pageId&&a.anchorDataId}function n(a,b){return"SCROLL_TO_TOP"===a.anchorDataId||"SCROLL_TO_BOTTOM"===a.anchorDataId||c.any(b,{anchorDataId:a.anchorDataId})}function o(a){return"DocumentLink"!==a.type||a.docId}function p(a,b){return j(a,b)&&k(a,b)&&l(a)&&m(a)&&o(a)}function q(a,b){var c;if(a)for("#"===a.charAt(0)&&(a=a.substr(1)),c=0;c<b.length;c++){var d=b[c];if(a===d.id)return d.pageId="#"+a,d}return{pageId:""}}function r(a,b){return q(a,b).repeaterPage}return a.createClass({displayName:"linkPanel",propTypes:{data:a.PropTypes.shape({pages:a.PropTypes.arrayOf(a.PropTypes.shape({id:a.PropTypes.string,title:a.PropTypes.string})),menuItems:a.PropTypes.arrayOf(a.PropTypes.shape({title:a.PropTypes.string,items:a.PropTypes.array,link:a.PropTypes.shape({pageId:a.PropTypes.string,type:a.PropTypes.string})})),anchors:a.PropTypes.arrayOf(a.PropTypes.shape({id:a.PropTypes.string,name:a.PropTypes.string,pageId:a.PropTypes.string})),currentPageId:a.PropTypes.string}),link:a.PropTypes.object,createDefaultData:a.PropTypes.func.isRequired,currentPage:a.PropTypes.string,callback:a.PropTypes.func,visibleSections:a.PropTypes.object},mixins:[a.addons.LinkedStateMixin,d.translationMixin],render:g,getInitialState:function(){var a=this.props.link||null;a&&"AnchorLink"===a.type&&!n(a,this.props.data.anchors)&&(a=h(a,this.props.data.pages));var b;if(this.pagesList=this.cachePagesList(this.props.data.menuItems),a||(this.props.defaultItemType?a=this.props.createDefaultData(this.props.defaultItemType):(a=this.getDefaultDataForPageAnchorLinkTab(this.pagesList[0].id),b=q(this.pagesList[0].id,this.props.data.pages))),!a||"PageLink"!==a.type&&"AnchorLink"!==a.type)b||(b=this.props.createDefaultData("PageLink"));else{var c="#SITE_STRUCTURE"!==a.pageId?a.pageId:this.props.data.currentPageId;b=q(c,this.props.data.pages)}return{selectedTab:this.getDefaultSelectedTab(a),link:a,page:b,isClosing:!1,isValid:!0}},componentWillReceiveProps:function(a){this.pagesList=this.cachePagesList(a.data.menuItems)},componentDidUpdate:function(){var a=this.state.link,b=this.refs,c=a&&p(a,b);if(this.state.isClosing){if(this.shouldHidePageLinkPossibilty()&&(!a||!p(a,b)))return void this.close();c||(a=null),this.save(a),this.close()}else{var d=!a||c;this.state.isValid!==d&&this.setState({isValid:d})}},getDefaultProps:function(){return{title:"Link Panel",panelName:"Link Panel"}},getDefaultSelectedTab:function(a){var b=a?a.type:null,c=["PageLink","AnchorLink",void 0,null];return c.indexOf(b)>-1&&(b="PageLink"),a&&this.isScrollTopAnchor(a.anchorDataId)&&(b="TopAnchorLink"),a&&this.isScrollBottomAnchor(a.anchorDataId)&&(b="BottomAnchorLink"),b},isScrollTopAnchor:function(a){return"SCROLL_TO_TOP"===a},isScrollBottomAnchor:function(a){return"SCROLL_TO_BOTTOM"===a},linkSelectedTab:function(){return{value:this.state.selectedTab,requestChange:function(a){var b={selectedTab:a},c=this.state.link;if(!c&&"NoLink"!==this.state.selectedTab||!c||c.type!==a){if("TopAnchorLink"===a||"BottomAnchorLink"===a){var d;d="TopAnchorLink"===a?this.getAnchorLink("SCROLL_TO_TOP"):this.getAnchorLink("SCROLL_TO_BOTTOM"),d.page&&(b.page=d.page),b.link=d.link}else b.link=this.props.createDefaultData(a),"PageLink"===a&&(b.link=this.getDefaultDataForPageAnchorLinkTab(this.pagesList[0].id),b.page=q(this.pagesList[0].id,this.props.data.pages));this.setState(b)}}.bind(this)}},getDefaultDataForPageAnchorLinkTab:function(a){var b,c=this.getAnchorOptions(this.props.data.anchors,a.substring(1));return this.shouldHidePageLinkPossibilty()?c.length>0&&(b={type:"AnchorLink",anchorDataId:c[0].anchorDataId,pageId:a,anchorName:c[0].anchorName}):b={type:"PageLink",pageId:a},b},linkTo:function(a){var b=this.state.link;return{value:b?b[a]:"",requestChange:function(c){b[a]=c,this.setState({link:b})}.bind(this)}},save:function(a){a&&"ExternalLink"===a.type&&(a.url=i(a.url,"http")),this.props.callback&&this.props.callback(a)},close:function(){this.refs.frame.close()},done:function(){this.setState({isClosing:!0})},linkToPage:function(){return{value:this.state.page.pageId,requestChange:function(a){this.setState({link:this.getDefaultDataForPageAnchorLinkTab(a),page:q(a,this.props.data.pages)})}.bind(this)}},getCurrentPageThisTranslate:function(a){return a==="#"+this.props.data.currentPageId?" "+d.translate("LINK_PANEL_PAGE_THIS"):""},linkToAnchor:function(){return{value:this.state.link?this.state.link.anchorDataId:"SCROLL_TO_TOP",requestChange:function(a){var b=this.getAnchorLink(a),c={link:b.link};b.page&&(c.page=b.page),this.setState(c)}.bind(this)}},getAnchorLink:function(a){var b={};if("TOP_OF_SELECTED_PAGE"===a){var c=this.state.page.pageId;b={link:this.getDefaultDataForPageAnchorLinkTab(c),page:q(c,this.props.data.pages)}}else{var f,e=this.props.data.anchors,g={type:"AnchorLink",anchorDataId:a,pageId:this.state.page.pageId};if(this.isScrollTopAnchor(a))g.anchorName=d.translate("LINK_PANEL_PAGE_ANCHOR_SCROLL_TO_TOP_NAME"),g.pageId="#SITE_STRUCTURE";else if(this.isScrollBottomAnchor(a))g.anchorName=d.translate("LINK_PANEL_PAGE_ANCHOR_SCROLL_TO_BOTTOM_NAME"),g.pageId="#SITE_STRUCTURE";else for(f=0;f<e.length;f++){var h=e[f];if(h.anchorDataId===a){g.anchorName=h.anchorName;break}}b.link=g}return b},cachePagesList:function(a,b){b=b||0;var c=0,d=[];return a.forEach(function(a){var e=a.link||{},f=a.items,g="PageLink"===e.type;if(g&&!r(e.pageId,this.props.data.pages)){var h={id:e.pageId,type:e.type,title:a.label,level:b};c=b+1,d.push(h)}else c=b;f&&f.length&&(d=d.concat(this.cachePagesList(f,c)))},this),d},getAnchorOptions:function(a,b){var c=[];return a.forEach(function(a){var d="#"===a.pageId.charAt(0)?a.pageId.substring(1):a.pageId;d===b&&c.push(a)}),c.sort(function(a,b){return a.y-b.y}),c},documentChanged:function(a){var b=a[0];this.setState({link:{type:"DocumentLink",docId:b.fileName,name:b.title}})},isSectionVisible:function(a){var b=this.props.visibleSections;return!b||b[a]!==!1},shouldHidePageLinkPossibilty:function(){return this.props.hidePageLinks},hasAnchors:function(){return 0!==this.getAnchorOptions(this.props.data.anchors,this.state.page.id).length},openHelpLink:function(){f.getManager().openHelpCenter("0a1de6d7-3f69-4d30-8ddc-7aa99bd12edc")},getDropDownOptions:function(){var a=[];this.shouldHidePageLinkPossibilty()||a.push({value:"TOP_OF_SELECTED_PAGE",label:d.translate("LINK_PANEL_ANCHOR_TOP")});var b=this.getAnchorOptions(this.props.data.anchors,this.state.page.id);return b.length>0&&c.forEach(b,function(b){a.push({value:b.anchorDataId,label:b.anchorName})}),this.shouldHidePageLinkPossibilty()&&!this.hasAnchors()&&a.push({value:"none",label:d.translate("LINK_PANEL_NO_ANCHORS_LABEL")}),a},getAnchorTooltipValue:function(){return{classPath:"baseUI.popoverTemplates.imageAndTextTooltip",props:{image:"linkPanelAnchorTooltip",title:"Anchor_Settings_tooltip_title",text:"Anchor_Settings_tooltip_text",learnMoreText:"mobile_refreshlayout_link",linkAction:this.openHelpLink,imageContainerStyle:{backgroundColor:"#5fcef5"}}}},isOkDisabled:function(){return!this.state.isValid}})}),define("panels/toolPanels/colorPicker/constants",[],function(){"use strict";return{NO_COLOR:"noColor"}}),define("panels/toolPanels/colorPicker/mixins/colorPickerPanelsMixin",["util","core","jquery"],function(a,b,c){"use strict";return{mixins:[a.singlePassDOMReadWriteMixin],measurePhase:function(a){if(a===this.LIFECYCLE_PHASES.MOUNT){var d=c(this.refs.frame.getContentWrapperElement().getDOMNode()),e=b.utils.stageUtils.getStageLayout(),f=d.offset(),g=c(document).scrollTop(),h=f.top,i=g+(e.bottom-d.height()),j=e.right-d.width();return{top:Math.min(h,i),left:Math.min(Math.max(f.left,0),j)}}},patchPhase:function(a,b){if(b===this.LIFECYCLE_PHASES.MOUNT){var d=c(this.refs.frame.getContentWrapperElement().getDOMNode());d.offset({top:a.top,left:a.left})}}}}),define("panels/toolPanels/colorPicker/siteCustomColors.rt",["react/addons","lodash","baseUI","panels/toolPanels/colorPicker/constants"],function(a,b,c,d){"use strict";function e(a,c){var d=b.assign({},a,c);return a.hasOwnProperty("style")&&(d.style=b.defaults(d.style,a.style)),a.hasOwnProperty("className")&&c.hasOwnProperty("className")&&(d.className=c.className+" "+a.className),d}function f(a,b,c){this.props.onPreview(b)}function g(a,b,c){this.props.onPreview(a)}function h(a,b,c){this.selectColor(b,c)}function i(c,d,e){return a.createElement("label",{className:"color-option",key:"colorOption-"+e,onMouseEnter:f.bind(this,c,d,e),onMouseLeave:g.bind(this,c,d,e)},a.createElement("input",{type:"radio",name:this.getRadioGroupId(),value:d,checked:e===this.state.selectedIndex,onChange:h.bind(this,c,d,e)}),a.createElement("div",{className:b.keys(b.pick(this.getColorOptionClasses(d),b.identity)).join(" "),style:{backgroundColor:d}}))}function j(b,c,d){return a.createElement("div",{key:"emptyColorOptions",className:"empty-color-option"})}function k(){var d=this.getValueFromProps();return a.createElement.apply(this,["div",e({className:"site-custom-colors"},this.filteredProps()),this.props.isEditable?a.createElement("label",{key:"addColorButton",ref:"addColorButton",className:"color-option first-color-in-row"},a.createElement("div",{className:"add-color-button",onClick:this.addCustomColor},a.createElement(c.symbol,{name:"add-custom-color-plus"}))):null,b.map(this.getFilteredColors(),i.bind(this,d)),b.isEmpty(this.getFilteredColors())?b.map(b.range(this.NUM_OF_EMPTY_SLOTS),j.bind(this,d)):null])}return function(){return k.apply(this,[])}}),define("panels/toolPanels/colorPicker/siteCustomColors",["react","lodash","jquery","core","util","baseUI","panels/panelManager/panelManagerFactory","panels/toolPanels/colorPicker/siteCustomColors.rt"],function(a,b,c,d,e,f,g,h){"use strict";function j(a){return a.get(d.constants.USER_PREFS.THEME.COLORS.CUSTOM.USER_ADDED)||[]}var i=["#000000","#FFFFFF"];return a.createClass({displayName:"siteCustomColors",mixins:[d.mixins.editorAPIMixin,f.radioButtonsMixin],propTypes:{customColors:a.PropTypes.arrayOf(a.PropTypes.string).isRequired,sessionStorage:a.PropTypes.object,isEditable:a.PropTypes.bool,onPreview:a.PropTypes.func,openAddColorPanel:a.PropTypes.func},NUM_OF_EMPTY_SLOTS:36,getInitialState:function(){return{selectedIndex:this.getSelectedColorIndex(this.getValueFromProps(),j(this.props.sessionStorage))}},getFilteredColors:function(a){a=a||j(this.props.sessionStorage);var c=b.difference(this.props.customColors,i,a);return i.concat(a,c)},selectColor:function(a,b){this.getEditorAPI().bi.event(d.bi.events.colorPicker.CUSTOM_COLOR_SELECT,{}),this.setState({selectedIndex:b},this.callOnChangeIfExists(a))},getSelectedColorIndex:function(a,b){return this.getFilteredColors(b||j(this.props.sessionStorage)).indexOf(a)},getColorBrightnessClass:function(a){var b=e.colors.hexToRgb(a),c=e.colors.rgbToHsb(b);return c.brightness>=80&&c.saturation<50?"bright":"dark"},getColorOptionClasses:function(a){var b={"color-displayer":!0,"white-option":e.colors.getDistanceToWhite(a)<3};return b[this.getColorBrightnessClass(a)+"-color"]=!0,b},componentWillReceiveProps:function(a){var b=this.getValueFromProps(),c=this.getValueFromProps(a);b!==c&&this.setState({selectedIndex:this.getSelectedColorIndex(c)})},addCustomColor:function(){this.getEditorAPI().bi.event(d.bi.events.colorPicker.ADD_COLOR_BUTTON_CLICKED,{}),this.props.openAddColorPanel()},render:h})}),define("panels/toolPanels/colorPicker/colorPickerPanel.rt",["react/addons","lodash","util","baseUI","panels/frames/toolPanelFrame","panels/toolPanels/colorPicker/siteCustomColors","symbols"],function(a,b,c,d,e,f,g){"use strict";function h(a){this.startDrag(a,this.getDragLimits(this.refs.frame.getContentWrapperElement()),this.refs.frame.getContentWrapperElement())}function i(a,b){this.openChooseRootColorPanel(a,b)}function j(c,d){return a.createElement("div",{className:b.keys(b.pick(this.getRootColorBoxClasses(c),b.identity)).join(" "),key:"rootColor-"+d},a.createElement("div",{className:"root-color-arrow",style:{borderBottomColor:c}}),a.createElement("div",{className:"root-color-circle",style:{backgroundColor:c},onClick:i.bind(this,c,d)},a.createElement(g.symbol,{name:"recycle"+this.getColorBrightness(c)})))}function k(){this.openHelpCenter(this.EDIT_PALETTE_LEARN_MORE_HELP_ID)}return function(){return a.createElement(e,{ref:"frame",panelName:this.props.panelName,isSingleInstance:!0,className:"color-picker-panel",isBlockingLayerFullScreen:this.props.isBlockingLayerFullScreen,shouldBlockOuterScroll:this.props.shouldBlockOuterScroll,top:this.props.top,left:this.props.left,contentClass:"color-picker-panel-content-wrapper"},a.createElement("div",{className:"main-content"},a.createElement("div",{className:"panel-section color-picker-header",onMouseDown:h.bind(this)},a.createElement("div",{className:"color-picker-header-content"},this.state.content===this.Content.CHOOSE_COLOR?a.createElement("span",{key:"color-picker-title"},"\n                ",c.translate("ColorPicker_MainPanel_Header"),"\n            "):null,this.state.content===this.Content.CHANGE_PALETTE?a.createElement(d.button,{key:"color-picker-title-back",className:"btn-back",label:"design_panel_back_button_label",icon:"arrowLeftSmall",onClick:this.handleBackEditingPaletteClicked}):null),a.createElement("span",{className:"close-panel-button",onClick:this.close},a.createElement(g.symbol,{name:"headerCloseButton"}))),this.state.content===this.Content.CHOOSE_COLOR?a.createElement("div",{key:"color-picker-content-color",className:"choose-color-content"},a.createElement("div",{className:"panel-section site-colors-section"},a.createElement("div",{className:"section-left"},c.translate("ColorPicker_MainPanel_SitePalette")),a.createElement("div",{className:"section-gap"}),this.props.palettePresets?a.createElement("div",{key:"color-picker-edit-palette-button",className:"section-right"},a.createElement("a",{onClick:this.switchContent.bind(this,this.Content.CHANGE_PALETTE)},"\n                        ",c.translate("ColorPicker_MainPanel_ChangeSiteColors"),"\n                    ")):null),a.createElement(d.paletteDisplayer,{palette:this.getPaletteColors(),isSelectable:!0,onPreview:this.previewColor,valueLink:{value:this.getColorInHex(this.state.selectedColor),requestChange:this.selectColor}}),a.createElement("div",{className:"panel-section custom-colors-title-section"},"\n                ",c.translate("ColorPicker_MainPanel_MoreColors"),"\n            "),a.createElement(d.customScroll,{},a.createElement(f,{className:"custom-colors-section",customColors:this.siteCustomColors,isEditable:!0,onPreview:this.previewColor,paletteColors:this.props.paletteColors,sessionStorage:this.props.sessionStorage,openAddColorPanel:this.openAddColorPanel,valueLink:{value:this.getColorInHex(this.state.selectedColor),requestChange:this.selectColor}})),a.createElement("div",{className:"panel-section footer"},a.createElement("div",{className:"section-left"},a.createElement("span",{},"+"),a.createElement("a",{onClick:this.addColorLinkClicked},"\n                        ",c.translate("ColorPicker_MainPanel_AddColor"),"\n                    ")),a.createElement("div",{className:"section-right"},"\n                    ",this.isThemeColor(this.state.colorToPreview)?this.getPaletteColors()[this.state.colorToPreview]:this.state.colorToPreview,"\n                "))):null,this.state.content===this.Content.CHANGE_PALETTE?a.createElement("div",{key:"color-picker-content-palettes",className:"content-change-palette"},a.createElement("div",{className:"panel-section change-palette-section"},c.translate("ColorPicker_ChangeEditPalette_Title"),"\n            "),a.createElement(d.paletteDisplayer,{palette:this.getPaletteColors(),isSelectable:this.isPaletteInEditPaletteContentSelectable(),valueLink:{value:null,requestChange:this.openChangePaletteColor}}),a.createElement.apply(this,["div",{className:"root-colors-wrapper"},b.map(this.getRootColors(),j.bind(this))]),a.createElement("div",{className:"help-text"},a.createElement("span",{},c.translate("ColorPicker_ChangeEditPalette_HelpText")),a.createElement("a",{onClick:k.bind(this)},c.translate("ColorPicker_ChangeEditPalette_LearnMore"))),a.createElement("div",{className:"footer"},a.createElement(d.button,{className:"cancel-button btn-md btn-confirm-secondary",label:"ColorPicker_ChangeEditPalette_CancelButton",onClick:this.handleCancelEditingPaletteClicked}),a.createElement(d.button,{className:"confirm-button btn-md",label:"ColorPicker_ChangeEditPalette_DoneButton",onClick:this.handleDoneEditingPaletteClicked}))):null),this.state.content===this.Content.CHANGE_PALETTE?a.createElement("div",{className:"secondary-content palette-list-section",key:"colorPickerPaletteListSection"},a.createElement("div",{className:"palette-list-title"},c.translate("ColorPicker_ChangeEditPalette_PalettesStrip")),a.createElement("div",{className:"palette-list-comp-wrapper"},a.createElement(d.customScroll,{heightRelativetoParent:"100%"},a.createElement(d.palettesList,{palettes:this.getPaletteList(),valueLink:{value:this.state.selectedPalette,requestChange:this.setSelectedPalette},onPreview:this.handlePaletteListPreview,className:"change-palette-palette-list"})))):null)}}),define("panels/toolPanels/colorPicker/colorPickerPanel",["react","lodash","jquery","core","util","panels/toolPanels/colorPicker/constants","panels/toolPanels/colorPicker/mixins/colorPickerPanelsMixin","panels/panelManager/panelManagerFactory","panels/mixins/panelDragLimitsMixin","panels/toolPanels/colorPicker/colorPickerPanel.rt","experiment!colorPickerChangeColorOnClickExp","experiment!colorPickerChangePaletteOnClickExp","experiment!editAllSiteColors"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";function o(a){return a&&0!==a.indexOf("#")&&0!==a.indexOf("color")&&a!==f.NO_COLOR?0===a.indexOf("r")?a:"rgba("+a+")":a}function p(a){return{top:a.top-c(document).scrollTop()+15+"px",left:a.left-c(document).scrollLeft()+204+"px"}}function q(a){return{top:a.top-c(document).scrollTop()+115+"px",left:a.left+c(document).scrollLeft()+48+"px"}}var n={color_13:["color_11","color_12","color_13","color_14","color_15"],color_18:["color_16","color_17","color_18","color_19","color_20"],color_23:["color_21","color_22","color_23","color_24","color_25"],color_28:["color_26","color_27","color_28","color_29","color_30"],color_33:["color_31","color_32","color_33","color_34","color_35"]};return a.createClass({displayName:"colorPickerPanel",mixins:[d.mixins.editorAPIMixin,e.valueLinkMixin,e.draggableMixin,g,i],propTypes:{siteCustomColors:a.PropTypes.array.isRequired,paletteColors:a.PropTypes.object.isRequired,displayNoColor:a.PropTypes.bool,sessionStorage:a.PropTypes.object,previewOnHover:a.PropTypes.bool,history:a.PropTypes.object,palettePresets:a.PropTypes.array,updateSitePalette:a.PropTypes.func,top:a.PropTypes.oneOfType([a.PropTypes.string,a.PropTypes.number]),left:a.PropTypes.oneOfType([a.PropTypes.string,a.PropTypes.number]),isBlockingLayerFullScreen:a.PropTypes.bool,shouldBlockOuterScroll:a.PropTypes.bool},Content:{CHOOSE_COLOR:"CHOOSE_COLOR",CHANGE_PALETTE:"CHANGE_PALETTE"},getDefaultProps:function(){return{previewOnHover:!0}},getPaletteColors:function(){var a=this.props.paletteColors;return b.omit(a,"paletteName","paletteTags")},getColorFromProps:function(){return o(this.getValueFromProps())},getInitialState:function(){var a=this.getColorInHex(this.getColorFromProps()),b={selectedColor:a,colorToPreview:a,selectedPalette:this.getPaletteColors(),content:this.Content.CHOOSE_COLOR};return this.initialPalette=b.selectedPalette,this.siteCustomColors=this.getCustomColorsInOrderAndSaveOrder(),b},getCustomColorsInOrderAndSaveOrder:function(){var f,a=this.props.sessionStorage,c=a.get(d.constants.USER_PREFS.THEME.COLORS.CUSTOM.COMPS_ADDED),e=this.props.siteCustomColors;if(c){var g=b.intersection(c,e),h=b.difference(e,c);f=g.concat(h)}else f=e;return a.set(d.constants.USER_PREFS.THEME.COLORS.CUSTOM.COMPS_ADDED,f),f},getColorBrightness:function(a){var b=e.colors.hexToRgb(a),c=e.colors.rgbToHsb(b);return c.brightness>=80&&c.saturation<50?"Dark":"Bright"},isThemeColor:function(a){return b.contains(a,"color_")},getColorInHex:function(a){var c=e.colors.rgbToHex;return a=o(a),b.contains(a,"rgba")?c(e.colors.rgbaStringToObject(a)):b.contains(a,"rgb")?c(e.colors.rgbStringToObject(a)):a},getColorInOriginalFormat:function(a){var c=this.getColorFromProps();c=o(c);var d=e.colors.hexToRgb;if(a===f.NO_COLOR)return a;var g=this.isThemeColor(a)?this.getPaletteColors()[a]:a;if(b.contains(c,"rgba")){var h=d(g);return h.alpha=e.colors.rgbaStringToObject(c).alpha,e.colors.rgbaObjectToString(h)}return b.contains(c,"rgb")?e.colors.rgbObjectToString(d(g)):a},areColorsEqual:function(a,c){return b.contains(a,"color")&&b.contains(c,"color")?a===c:this.getColorInHex(a)===this.getColorInHex(c)},EDIT_PALETTE_LEARN_MORE_HELP_ID:"7b56b01e-1104-485d-8bcc-9690f8c9592a",getRootColors:function(){return b.pick(this.getPaletteColors(),b.keys(n))},getRootColorBoxClasses:function(a){return{"root-color-box":!0,"white-color":e.colors.getDistanceToWhite(a)<3}},getPaletteList:function(){return b.map(this.props.palettePresets,function(a){return b.omit(a,"paletteName","paletteTags")})},isPaletteInEditPaletteContentSelectable:function(){return m},openChangePaletteColor:function(a){if(m){var c=this,d=this.refs.frame.getPanelFramePosition(),e=p(d),f=this.getPaletteColors()[a];h.getManager().openPanel("panels.toolPanels.colorPicker.addColorPanel",{valueLink:{value:f,requestChange:function(d){var e=b.clone(c.state.selectedPalette);e[a]=d,c.setSelectedPalette(e)}},siteCustomColors:this.siteCustomColors,paletteColors:this.props.paletteColors,sessionStorage:this.props.sessionStorage,top:e.top,left:e.left,onPreview:function(d){var e=b.clone(c.state.selectedPalette);e[a]=d,c.setPaletteToDocument(e)},onCancel:this.setPaletteToDocument.bind(this,b.clone(this.state.selectedPalette))},!0)}},selectColor:function(a,b){b&&(this.handleChange(a),this.close());var c=this;this.setState({selectedColor:a},function(){c.handleChange(a),c.addColorHistoryEntryIfNeeded()})},previewColor:function(a){k||(this.isMounted()&&this.setState({colorToPreview:a}),this.props.previewOnHover&&this.handleChange(a))},handleChange:function(a){this.callOnChangeIfExists(this.getColorInOriginalFormat(a))},setSelectedPalette:function(a){this.isMounted()?this.setState({selectedPalette:a},this.setPaletteToDocument.bind(this,a)):this.setPaletteToDocument(a)},setPaletteToDocument:function(a){this.props.updateSitePalette(a)},computeNewPaletteFromRootColor:function(a,c){var d=this.getPaletteColors(),f=e.colors.createGradientColorsFromRoot(c,d,n[a]);return b.assign(d,f)},setSelectedPaletteFromRootColor:function(a,b){var c=this,d=this.computeNewPaletteFromRootColor(a,b);this.isMounted()?this.setState({selectedPalette:d},c.setPaletteToDocument.bind(this,d)):c.setPaletteToDocument(d)},setPaletteToDocumentFromRootColor:function(a,b){var c=this.computeNewPaletteFromRootColor(a,b);this.setPaletteToDocument(c)},addCustomColor:function(a){var c=b.cloneDeep(this.props.sessionStorage.get(d.constants.USER_PREFS.THEME.COLORS.CUSTOM.USER_ADDED));c.unshift(a),
this.props.sessionStorage.set(d.constants.USER_PREFS.THEME.COLORS.CUSTOM.USER_ADDED,c),this.selectColor(a)},openAddColorPanel:function(){var a=this.refs.frame.getPanelFramePosition(),c=q(a);h.getManager().openPanel("panels.toolPanels.colorPicker.addColorPanel",{valueLink:{value:this.state.selectedColor,requestChange:this.addCustomColor},paletteColors:this.props.paletteColors,onPreview:b.debounce(this.previewColor,100),top:c.top,left:c.left,onCancel:this.previewColor.bind(this,this.state.selectedColor)},!0)},addColorLinkClicked:function(){this.getEditorAPI().bi.event(d.bi.events.colorPicker.ADD_COLOR_LINK_CLICKED,{}),this.openAddColorPanel()},openChooseRootColorPanel:function(a,c){var d=this.refs.frame.getPanelFramePosition(),e=p(d);h.getManager().openPanel("panels.toolPanels.colorPicker.addColorPanel",{valueLink:{value:a,requestChange:this.setSelectedPaletteFromRootColor.bind(this,c)},siteCustomColors:this.siteCustomColors,paletteColors:this.props.paletteColors,sessionStorage:this.props.sessionStorage,top:e.top,left:e.left,onPreview:b.debounce(this.setPaletteToDocumentFromRootColor.bind(this,c),100),onCancel:this.setPaletteToDocument.bind(this,b.clone(this.state.selectedPalette))},!0)},handlePaletteListPreview:function(a){l||this.setPaletteToDocument(a)},handleDoneEditingPaletteClicked:function(){this.addPaletteHistoryEntryIfNeeded(),this.initialPalette=this.state.selectedPalette,this.setPaletteToDocument(this.state.selectedPalette),this.close()},handleCancelEditingPaletteClicked:function(){this.setSelectedPalette(this.initialPalette),this.close()},handleBackEditingPaletteClicked:function(){this.setSelectedPalette(this.initialPalette),this.switchContent(this.Content.CHOOSE_COLOR)},arePalettesEqual:function(a,c){var d=b.intersection(b.keys(a),b.keys(c));return b.isEqual(b.pick(a,d),b.pick(c,d))},addPaletteHistoryEntryIfNeeded:function(){this.props.history&&(this.arePalettesEqual(this.state.selectedPalette,this.initialPalette)||this.props.history.add("palette colors updated"))},addColorHistoryEntryIfNeeded:function(){this.props.history&&(this.areColorsEqual(this.state.selectedColor,this.getColorFromProps())||this.props.history.add("new color chosen - "+this.state.selectedColor))},switchContent:function(a){a===this.Content.CHANGE_PALETTE&&this.getEditorAPI().bi.event(d.bi.events.colorPicker.CHANGE_SITE_COLORS_LINK_CLICKED,{}),this.setState({content:a})},resetPaletteIfPanelClosedWithoutPaletteConfirmation:function(){this.state.content===this.Content.CHANGE_PALETTE&&this.setPaletteToDocument(this.initialPalette)},adjustPanelPosition:function(){var a=10,b=204,e=210,f=b+e+a,g=c(this.refs.frame.getContentWrapperElement().getDOMNode()),h=g.offset(),i=d.utils.stageUtils.getStageLayout(),j=h.left,k=i.right-f,l=h.top,m=c(document).scrollTop()+(i.bottom-g.height());g.offset({top:Math.min(l,m),left:Math.min(j,k)})},componentDidUpdate:function(a,b){if(this.state.content===this.Content.CHANGE_PALETTE&&this.props.top!==a.top||this.props.left!==a.left){var c=p(this.refs.frame.getPanelFramePosition());h.getManager().updatePanelProps("panels.toolPanels.colorPicker.addColorPanel",{top:c.top,left:c.left})}this.state.content===this.Content.CHANGE_PALETTE&&b.content!==this.state.content&&this.adjustPanelPosition()},componentWillUnmount:function(){this.props.onClose&&this.props.onClose(),this.resetPaletteIfPanelClosedWithoutPaletteConfirmation()},close:function(){this.state.content===this.Content.CHOOSE_COLOR?this.getEditorAPI().bi.event(d.bi.events.colorPicker.MAIN_PANEL_CLOSED,{}):this.state.content===this.Content.CHANGE_PALETTE&&this.getEditorAPI().bi.event(d.bi.events.colorPicker.CHANGE_SITE_COLOR_CLOSED,{}),this.refs.frame.close()},openHelpCenter:function(a){h.getManager().openHelpCenter(a)},render:j})}),define("panels/toolPanels/colorPicker/addColorContent.rt",["react/addons","lodash","util","baseUI","panels/toolPanels/colorPicker/siteCustomColors"],function(a,b,c,d,e){"use strict";return function(){return a.createElement("div",{className:"add-color-content"},a.createElement("div",{},a.createElement(d.colorSpace,{value:this.state.selectedColor,onChange:this.onHsbColorChanged})),a.createElement("div",{className:"color-indicator"},a.createElement("span",{className:"color-sample initial-color",onMouseDown:this.resetToInitialColor,style:{backgroundColor:this.resolveColor(this.initialColor)}}),a.createElement("span",{className:"color-sample current-color",style:{backgroundColor:c.colors.hsbToHex(this.state.selectedColor)}})),a.createElement("div",{className:"color-format"},a.createElement(d.colorFormat,{value:this.state.selectedColor,onChange:this.onHsbColorChanged,onChangeInValidationStatus:this.onChangeInValidationStatus})),this.props.siteCustomColors?a.createElement("div",{key:"addColorCustomColorsSeperator",className:"custom-colors-separator"}):null,this.props.siteCustomColors?a.createElement("div",{key:"customColorsSectionTitle",className:"custom-colors-section-title"},"\n        ",c.translate("ColorPicker_MainPanel_MoreColors"),"\n    "):null,a.createElement(d.customScroll,{},this.props.siteCustomColors?a.createElement("div",{key:"customColorsSection",className:"custom-colors-section"},a.createElement(e,{className:"custom-colors",onPreview:this.previewColor,customColors:this.props.siteCustomColors,paletteColors:this.props.paletteColors,sessionStorage:this.props.sessionStorage,value:c.colors.hsbToHex(this.state.selectedColor),onChange:this.onCustomColorSelected})):null),a.createElement("div",{className:"footer"},a.createElement(d.button,{className:"cancel-button btn-md btn-confirm-secondary",label:"ColorPicker_ColorSpace_CancelButton",onClick:this.handleCancel}),a.createElement(d.button,{className:"confirm-button btn-md",label:"ColorPicker_ColorSpace_AddButton",onClick:this.callOnChangeAndClose,disabled:!this.state.isValid})))}}),define("panels/toolPanels/colorPicker/addColorContent",["react","lodash","core","util","panels/toolPanels/colorPicker/constants","panels/toolPanels/colorPicker/addColorContent.rt"],function(a,b,c,d,e,f){"use strict";return a.createClass({displayName:"addColorPanel",propTypes:{valueLink:a.PropTypes.shape({value:a.PropTypes.string,requestChange:a.PropTypes.func}).isRequired,paletteColors:a.PropTypes.object.isRequired,closeHandler:a.PropTypes.func.isRequired,onPreview:a.PropTypes.func.isRequired,onCancel:a.PropTypes.func.isRequired,sessionStorage:a.PropTypes.object,siteCustomColors:a.PropTypes.arrayOf(a.PropTypes.string)},mixins:[d.valueLinkMixin],getInitialState:function(){this.initialColor=this.getValueFromProps();var a=this.resolveColor(this.initialColor),b=d.colors.hexToHsbExact(a);return{selectedColor:b,isValid:!0}},resolveColor:function(a){return b.contains(a,"color")?this.props.paletteColors[a]:a&&a!==e.NO_COLOR?a:"#ffffff"},onHsbColorChanged:function(a){this.setState({selectedColor:a},function(){var b=d.colors.hsbToHex(a);this.props.onPreview(b)})},onCustomColorSelected:function(a){this.setState({selectedColor:d.colors.hexToHsbExact(a)},function(){this.props.onPreview(a)})},resetToInitialColor:function(){var a=this.resolveColor(this.initialColor);this.setState({selectedColor:d.colors.hexToHsbExact(a)},function(){this.props.onPreview(this.initialColor)})},previewColor:function(a){this.props.onPreview(a)},componentWillUnmount:function(){this.wasConfirmClicked||this.props.onCancel()},callOnChangeAndClose:function(){this.callOnChangeIfExists(d.colors.hsbToHex(this.state.selectedColor)),this.wasConfirmClicked=!0,this.close()},onChangeInValidationStatus:function(a){this.isMounted()&&this.setState({isValid:a})},handleCancel:function(){this.props.onCancel(),this.close()},close:function(){this.props.closeHandler()},render:f})}),define("panels/toolPanels/colorPicker/addColorPanel.rt",["react/addons","lodash","panels/frames/toolPanelFrame","util","panels/toolPanels/colorPicker/addColorContent"],function(a,b,c,d,e){"use strict";return function(){return a.createElement(c,{ref:"frame",className:"custom-color-picker-panel",panelName:this.props.panelName,title:this.props.title,top:this.props.top,left:this.props.left},a.createElement(e,{siteCustomColors:this.props.siteCustomColors,paletteColors:this.props.paletteColors,sessionStorage:this.props.sessionStorage,valueLink:this.props.valueLink,onPreview:this.props.onPreview,onCancel:this.props.onCancel,closeHandler:this.close}))}}),define("panels/toolPanels/colorPicker/addColorPanel",["react","jquery","lodash","core","util","panels/toolPanels/colorPicker/mixins/colorPickerPanelsMixin","panels/toolPanels/colorPicker/addColorPanel.rt"],function(a,b,c,d,e,f,g){"use strict";return a.createClass({displayName:"addColorPanel",mixins:[d.mixins.editorAPIMixin,f],propTypes:{valueLink:a.PropTypes.shape({value:a.PropTypes.string,requestChange:a.PropTypes.func}).isRequired,paletteColors:a.PropTypes.object.isRequired,sessionStorage:a.PropTypes.object,top:a.PropTypes.string,left:a.PropTypes.string,onPreview:a.PropTypes.func.isRequired,onCancel:a.PropTypes.func.isRequired,siteCustomColors:a.PropTypes.arrayOf(a.PropTypes.string)},close:function(){this.getEditorAPI().bi.event(d.bi.events.colorPicker.ADD_COLOR_PANEL_CLOSED,{}),this.refs.frame.close()},render:g})}),define("panels/toolPanels/colorPicker/colorPicker",["panels/toolPanels/colorPicker/colorPickerPanel","panels/toolPanels/colorPicker/addColorPanel","panels/toolPanels/colorPicker/addColorContent"],function(a,b,c){"use strict";return{colorPickerPanel:a,addColorPanel:b,addColorContent:c}}),define("panels/toolPanels/languageSupport/languageSupport.rt",["react/addons","lodash","panels/frames/toolPanelFrame","baseUI","util","symbols"],function(a,b,c,d,e,f){"use strict";function g(a,b,c){this.update(b,c)}function h(c,e){return a.createElement("div",{className:b.keys(b.pick({"language-option":!0,disabled:c.disabled},b.identity)).join(" "),key:c.label},a.createElement(d.tooltip,{value:c.tooltip,disabled:!c.tooltip,styleType:d.uiConstants.TOOLTIP.STYLE_TYPE.SMALL},a.createElement("span",{},a.createElement(d.toggle,{name:"checkbox",labelAfterSymbol:!0,label:c.label,disabled:c.disabled,value:c.value,onChange:g.bind(this,c,e)}))),c.disabled?null:a.createElement("span",{className:"example-img",key:"example-img"},a.createElement("span",{style:c.style})))}return function(){return a.createElement.apply(this,[c,{panelName:this.props.panelName,headerTitle:this.translateIfNeeded("add_languages_header_label"),isSingleInstance:!0,helpId:"147f770b-8d82-48b9-aea8-2f07d94c0743",ref:"frame",className:"language-support-panel",top:this.props.top,left:this.props.left,contentClass:"language-support-panel-content-wrapper"},a.createElement("div",{className:"label"},this.translateIfNeeded("add_languages_text")),b.map(this.state.charsItems,h.bind(this)),a.createElement("footer",{},a.createElement("div",{className:"copy-right-text"},a.createElement("span",{},this.translateIfNeeded("add_languages_copyright_text")),a.createElement("br",{}),a.createElement("a",{onClick:this.openHelpPanelFrame},this.translateIfNeeded("add_languages_copyright_text_link"))),a.createElement(d.button,{label:"add_languages_save_button",onClick:this.setLanguages,className:"btn-confirm-primary"}))])}}),define("panels/toolPanels/languageSupport/languageSupport",["react","baseUI","lodash","core","util","panels/panelManager/panelManagerFactory","panels/mixins/reportBiEventOnUiChangeMixin","panels/toolPanels/languageSupport/languageSupport.rt"],function(a,b,c,d,e,f,g,h){"use strict";var i=[{characterSet:"latin",position:"0px 0px",label:"add_languages_english",tooltip:"add_languages_english_tooltip",disabled:!0},{characterSet:"latin-ext",position:"-15px -46px",label:"add_languages_eastern_european",tooltip:"add_languages_eastern_european_tooltip"},{characterSet:"cyrillic",position:"-15px -19px",label:"add_languages_cyrillic",tooltip:"add_languages_cyrillic_tooltip"},{characterSet:"japanese",position:"-15px -123px",label:"add_languages_japanese"},{characterSet:"korean",position:"-15px -96px",label:"add_languages_korean"},{characterSet:"arabic",position:"-15px -150px",label:"add_languages_arabic"},{characterSet:"hebrew",position:"-15px -70px",label:"add_languages_hebrew"}];return a.createClass({displayName:"languageSupport",mixins:[e.translationMixin,d.mixins.editorAPIMixin,g],render:h,getBackground:function(){return"url("+e.media.getMediaUrl("textEditor/langs.v1.png")+")"},getInitialState:function(){return{charsItems:this.getCharacterSetsArray()}},setLanguages:function(){this.getEditorAPI().bi.event(d.bi.events.textControls.text_languages_support_dialog_save_click);var a=[];c.forEach(this.state.charsItems,function(b){b.value&&a.push(b.characterSet)}),this.getEditorAPI().theme.fonts.updateCharacterSet(a),this.close()},close:function(){this.refs.frame.close()},update:function(a,b){this.state.charsItems[a].value=b,this.setState(this.state)},getCharactersSets:function(){return this.getEditorAPI().theme.fonts.getCharacterSet()},openHelpPanelFrame:function(){this.getEditorAPI().bi.event(d.bi.events.textControls.text_languages_support_learn_more_click),this.refs.frame.openHelpCenter("147f770b-8d82-48b9-aea8-2f07d94c0743")},getCharacterSetsArray:function(){var a=i,b=[],d=this.getCharactersSets(),e=this.getBackground();return c.forEach(a,function(a){var f={label:a.label,characterSet:a.characterSet,tooltip:a.tooltip,value:c.contains(d,a.characterSet),disabled:a.disabled,style:{backgroundImage:e,backgroundPosition:a.position,height:"18px",width:"72px",display:"inline-block"}};b.push(f)}),b}})}),define("panels/toolPanels/toolPanels",["panels/toolPanels/exampleToolPanel","panels/toolPanels/linkPanel/linkPanel","panels/toolPanels/colorPicker/colorPicker","panels/toolPanels/languageSupport/languageSupport"],function(a,b,c,d){"use strict";return{exampleTool:a,linkPanel:b,languageSupport:d,colorPicker:c}}),define("panels/commonControls/linkTo/linkToMixin",["lodash","react","baseUI","panels/panelManager/panelManagerFactory"],function(a,b,c,d){"use strict";var e=1e3,f={PAGE_LINK:"PageLink",ANCHOR_LINK:"AnchorLink",EXTERNAL_LINK:"ExternalLink",DOCUMENT_LINK:"DocumentLink",EMAIL_LINK:"EmailLink"};return{mixins:[c.inputMixin],propTypes:{pages:b.PropTypes.arrayOf(b.PropTypes.shape({id:b.PropTypes.string,title:b.PropTypes.string})).isRequired,anchors:b.PropTypes.arrayOf(b.PropTypes.shape({id:b.PropTypes.string,name:b.PropTypes.string,pageId:b.PropTypes.string})).isRequired,menuItems:b.PropTypes.arrayOf(b.PropTypes.shape({title:b.PropTypes.string,items:b.PropTypes.array,link:b.PropTypes.shape({pageId:b.PropTypes.string,type:b.PropTypes.string})})),createDefaultData:b.PropTypes.func.isRequired,currentPageId:b.PropTypes.string},ValidationStatus:{NONE:"none",SUCCESS:"success",ERROR:"error"},getInitialState:function(){return{validationStatus:this.ValidationStatus.NONE}},openLinkDialogFromPanel:function(){this.openLinkDialog(!0)},openLinkDialog:function(a){var b=d.getManager();this.isDisabled()||b.openPanel("panels.toolPanels.linkPanel",{data:{pages:this.props.pages,menuItems:this.props.menuItems,anchors:this.props.anchors,currentPageId:this.props.currentPageId},createDefaultData:this.props.createDefaultData,link:this.getValueFromProps(),callback:this.linkUpdated},a)},linkUpdated:function(a){this.setState({validationStatus:this.ValidationStatus.SUCCESS}),this.callOnChangeIfExists(a),setTimeout(function(){this.isMounted()&&this.setState({validationStatus:this.ValidationStatus.NONE})}.bind(this),e)},getLinkValueAsString:function(b){if(!b)return null;switch(b.type){case f.PAGE_LINK:var c=a.find(this.props.pages,{id:b.pageId.replace("#","")});return c&&c.title;case f.ANCHOR_LINK:return b.anchorName;case f.EMAIL_LINK:return b.recipient;case f.DOCUMENT_LINK:return b.name;case f.EXTERNAL_LINK:return b.url;default:throw Error("Unknkown Link Type: "+b.type)}}}}),define("panels/commonControls/linkTo/linkTo.rt",["react/addons","lodash","baseUI","util","symbols"],function(a,b,c,d,e){"use strict";function f(a,c){var d=b.assign({},a,c);return a.hasOwnProperty("style")&&(d.style=b.defaults(d.style,a.style)),a.hasOwnProperty("className")&&c.hasOwnProperty("className")&&(d.className=c.className+" "+a.className),d}function g(a,b,c){this.setState({linkHovered:!0})}function h(a,b,c){this.setState({linkHovered:!1})}function i(){var i=d.translate,j=this.isDisabled(),k=this.getTranslatedLink();return a.createElement("div",f({className:d.inheritClassName(this.props,"input-link-to")+(j?" disabled":"")},this.filteredProps()),this.hasLabel()?a.createElement("label",{key:"linkToLabel",className:b.keys(b.pick({"with-button":this.props.showButton},b.identity)).join(" "),ref:"label"},i(this.props.label)):null,this.props.infoIconText?a.createElement(c.infoIcon,{key:"linkToIconInfo",className:"link-to-icon-info",text:i(this.props.infoIconText),title:i(this.props.infoIconTitle)}):null,a.createElement(c.tooltip,{ref:"tooltip",disabled:this.isTooltipDisabled(),value:k,shouldTranslate:!1},a.createElement("div",{className:"wrapper-to-not-lose-ref"},a.createElement("div",{ref:"linkText",key:"link",className:"link",onClick:this.openLinkDialogFromPanel,onMouseEnter:g.bind(this,i,j,k),onMouseLeave:h.bind(this,i,j,k)},"\n                ",k,"\n            "))),this.shouldShowButton()?a.createElement("button",{key:"btn",ref:"button",className:b.keys(b.pick({"link-bright":this.state.linkHovered,"link-btn":!0},b.identity)).join(" "),onClick:this.openLinkDialogFromPanel},a.createElement(e.symbol,{name:"linkBtnThin"})):null,this.shouldShowSuccessSymbol()?a.createElement("button",{key:"successSymbol",className:"validation-icon validation-icon-success"},a.createElement(e.symbol,{name:"inputValidationSuccess"})):null)}return function(){return i.apply(this,[])}}),define("panels/commonControls/linkTo/linkTo",["react","lodash","util","baseUI","panels/commonControls/linkTo/linkToMixin","panels/commonControls/linkTo/linkTo.rt"],function(a,b,c,d,e,f){"use strict";return a.createClass({displayName:"linkTo",mixins:[e],propTypes:{label:a.PropTypes.string,placeholder:a.PropTypes.string,showButton:a.PropTypes.bool,showIcon:a.PropTypes.bool,infoIconText:a.PropTypes.string,infoIconTitle:a.PropTypes.string},getDefaultProps:function(){return{label:"",placeholder:"Link_To_Control_Label_Placeholder",showButton:!0,showIcon:!1}},getInitialState:function(){return{isTextTruncated:!1}},handleIsTextTruncated:function(){var a=this.refs.linkText.getDOMNode(),b=a.scrollWidth>a.offsetWidth;this.setState({isTextTruncated:b})},componentDidMount:function(){this.handleIsTextTruncated()},componentDidUpdate:function(a){this.getValueFromProps()!==this.getValueFromProps(a)&&this.handleIsTextTruncated()},isTooltipDisabled:function(){return!this.state.isTextTruncated},shouldShowButton:function(){return this.props.showButton&&this.state.validationStatus===this.ValidationStatus.NONE},shouldShowSuccessSymbol:function(){return this.state.validationStatus===this.ValidationStatus.SUCCESS},getTranslatedLink:function(){var a=this.getLinkValueAsString(this.getValueFromProps());return a=a||c.translate(this.props.placeholder)},render:f})}),define("panels/commonControls/linkTo/linkToButton.rt",["react/addons","lodash","baseUI"],function(a,b,c){"use strict";function d(a,c){var d=b.assign({},a,c);return a.hasOwnProperty("style")&&(d.style=b.defaults(d.style,a.style)),a.hasOwnProperty("className")&&c.hasOwnProperty("className")&&(d.className=c.className+" "+a.className),d}return function(){return a.createElement(c.button,d({icon:"link",className:"link-to-button",onClick:this.openLinkDialog},this.filteredProps()))}}),define("panels/commonControls/linkTo/linkToButton",["react","lodash","panels/commonControls/linkTo/linkToMixin","panels/commonControls/linkTo/linkToButton.rt"],function(a,b,c,d){"use strict";return a.createClass({displayName:"linkToButton",mixins:[c],render:d})}),define("panels",["panels/panelManager/panelManagerFactory","panels/frames/frames","panels/mixins/mixins","panels/helpPanels/helpPanels","panels/focusPanels/focusPanels","panels/messagePanels/messagePanels","panels/toolPanels/toolPanels","panels/commonControls/linkTo/linkTo","panels/commonControls/linkTo/linkToButton","panels/commonControls/linkTo/linkToMixin"],function(a,b,c,d,e,f,g,h,i,j){"use strict";return{panelManager:a.getManager(),frames:b,mixins:c,helpPanels:d,focusPanels:e,messagePanels:f,toolPanels:g,commonControls:{linkTo:h,linkToButton:i},linkToMixin:j}});