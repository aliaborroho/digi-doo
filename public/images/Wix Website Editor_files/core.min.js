define("core/utils/addComponentPlugins/plugins/anchor",["lodash","util"],function(a,b){"use strict";function d(b,c,d){var e=new RegExp(d+"\\s(\\d+)"),f=[];return a.each(c,function(a){var c=b.components.data.get(a),d=c.name,g=d.match(e);g&&f.push(parseInt(g[1],10))}),f}function e(b,c,e){var f,g=d(b,c,e);for(g.sort(function(a,b){return a-b}),f=0;f<g.length;++f)if(!a.contains(g,f+1))return f+1;return f+1}var c="component_label_anchor";return function(a,d,f,g,h,i){var j=b.translate(c),k=a.pages.getReference(a.pages.getCurrentPageId()),l=a.components.get.byType("wysiwyg.common.components.anchor.viewer.Anchor",k),m=e(a,l,j);g.data.name=j+" "+m;var n=d(f,g);return i&&a.waitForChangesApplied(function(){i(n)}),n}}),define("core/utils/updateDataPlugins/plugins/common/fixTextFieldValueLength",[],function(){"use strict";function c(c,d){if(c.length<=d)return c;var e=c.split(""),f=c.length-d+a.length,g=c.lastIndexOf(".")>c.length-f-b,h=g?c.lastIndexOf("."):c.length-1,i=h-f-b;return e.splice(i,f,a),e.join("")}var a="...",b=3;return c}),define("core/utils/updateDataPlugins/plugins/imageData",["core/utils/updateDataPlugins/plugins/common/fixTextFieldValueLength"],function(a){"use strict";var b=100,c=1200;return function(d){return d.title&&(d.title=a(d.title,b)),d.description&&(d.description=a(d.description,c)),d}}),define("core/utils/updateDataPlugins/plugins/wixVideoData",["core/utils/updateDataPlugins/plugins/common/fixTextFieldValueLength"],function(a){"use strict";var b=100;return function(c){return c.title&&(c.title=a(c.title,b)),c}}),define("core/utils/updateDataPlugins/updateDataPlugins",["core/utils/updateDataPlugins/plugins/imageData","core/utils/updateDataPlugins/plugins/wixVideoData"],function(a,b){"use strict";return{Image:a,WixVideo:b}}),define("core/utils/addComponentPlugins/plugins/commonUtils/addMultiple",["lodash","core/utils/updateDataPlugins/updateDataPlugins"],function(a,b){"use strict";return function(c,d,e,f,g,h,i,j){a.forEach(j,function(g,j){var k,l,m;j>0?(m=c.pages.getCurrentPageId(),l=c.pasteLogic.addContext.getPastePosition(c,f.layout,m),k=j>0?a.merge({},f,{layout:l}):f):k=f;var n=i(k,g),o=n.data&&n.data.type;b[o]&&(n.data=b[o](n.data));var p=d(e,n);h&&c.waitForChangesApplied(function(){h(p)})})}}),define("core/utils/addComponentPlugins/plugins/documentMedia",["lodash","core/utils/addComponentPlugins/plugins/commonUtils/addMultiple"],function(a,b){"use strict";function c(b,c){return a.merge({},b,{data:{title:c.title,link:{docId:a.last(c.fileUrl.split("/")),name:c.title,type:"DocumentLink"}}})}return function(a,d,e,f,g,h){if(f.data.link&&f.data.link.docId)return!1;var i=a.mediaServices;return i.mediaManager.open(i.mediaManager.categories.DOCUMENT,{callback:function(i){b(a,d,e,f,g,h,c,i)}}),!0}}),define("core/utils/addComponentPlugins/plugins/commonUtils/addAudioPluginUtil",["lodash","core/utils/addComponentPlugins/plugins/commonUtils/addMultiple"],function(a,b){"use strict";return{handleAudioAdd:function(a,c,d,e,f,g,h){if(e.data.uri)return!1;var i=a.mediaServices;return i.mediaManager.open(i.mediaManager.categories.MUSIC,{callback:function(i){b(a,c,d,e,f,g,h,i)}}),!0}}}),define("core/utils/addComponentPlugins/plugins/audioPlayer",["lodash","core/utils/addComponentPlugins/plugins/commonUtils/addAudioPluginUtil"],function(a,b){"use strict";function c(b,c){return a.merge({},b,{data:{uri:c.fileName,originalFileName:c.title}})}return function(a,d,e,f,g,h){return b.handleAudioAdd(a,d,e,f,g,h,c)}}),define("core/utils/addComponentPlugins/plugins/singleAudioPlayer",["lodash","core/utils/addComponentPlugins/plugins/commonUtils/addAudioPluginUtil"],function(a,b){"use strict";function c(b,c){return a.merge({},b,{data:{uri:c.fileName,originalFileName:c.title,artist:"Unknown Artist",track:"Unknown Track"}})}return function(a,d,e,f,g,h){return b.handleAudioAdd(a,d,e,f,g,h,c)}}),define("core/utils/componentPreviewReadyPlugins/formPlugin",[],function(){"use strict";function a(a){var b="@wix.com";return-1!==a.indexOf(b,a.length-b.length)}function b(b,c){var d="toEmailAddress",e=b[d],f=c.generalInfo.getUserInfo().email;e||a(f)||(b[d]=f)}return{updateDataWithDefaults:b}}),define("core/utils/addComponentPlugins/plugins/contactForm",["lodash","util","core/utils/componentPreviewReadyPlugins/formPlugin"],function(a,b,c){"use strict";function e(c){a.forOwn(d,function(a,d){c[d]=b.translate(a)})}var d={successMessage:"Contact_Form_Settings_Messages_Success_message_default",validationErrorMessage:"Contact_Form_Settings_Messages_Error_message_mandatory_fields_default",errorMessage:"Contact_Form_Settings_Messages_Error_message_for_email_fields_default"};return function(a,b,d,f,g,h){e(f.data),c.updateDataWithDefaults(f.data,a);var i=b(d,f);return h&&a.waitForChangesApplied(function(){h(i)}),i}}),define("core/utils/addComponentPlugins/plugins/clipArt",["lodash"],function(a){"use strict";function d(c){return a.merge(c,{layout:{rotationInDegrees:0,scale:1,fixedPosition:!1,anchors:[]},props:{displayMode:b,type:"WPhotoProperties"},style:c.style||"wp2"})}var b="full",c="fill";return function(a,e,f,g,h,i){g.props||(g=d(g)),g.props.displayMode===c&&(g.props.displayMode=b);var j=e(f,g);return i&&a.waitForChangesApplied(function(){i(j)}),j}}),define("core/utils/addComponentPlugins/plugins/svgShape",["lodash"],function(a){"use strict";function b(b){return a.merge(b,{})}return function(a,c,d,e,f,g){if(e.style)return!1;var h=a.theme.colors.getCustomUsedInSkins(),i=c(d,b(e,h));return g&&a.waitForChangesApplied(function(){g(i)}),i}}),define("core/utils/addComponentPlugins/plugins/wPhoto",["lodash"],function(a){"use strict";function b(b){return a.merge(b,{layout:{rotationInDegrees:0,scale:1,fixedPosition:!1,anchors:[]},props:{type:"WPhotoProperties"},style:b.style||"wp2"})}return function(a,c,d,e,f,g){e.props||(e=b(e));var h=c(d,e);return g&&a.waitForChangesApplied(function(){g(h)}),h}}),define("core/app/campaigns",[],function(){"use strict";return{CAMPAIGNS:{PERSONAL_SALE:{id:"new-user-personal-campaign",type:"PERSONAL",defaultDiscount:50,assetPath:"apples/editor/new-user-personal-campaign"},SEASONAL_CAMPAIGN:{id:"seasonal-campaign",type:"SEASONAL",defaultDiscount:50,assetPath:"apples/editor/new-user-personal-campaign"}}}}),define("core/app/constants",["lodash","util","core/app/campaigns"],function(a,b,c){"use strict";var d={componentPanels:{settings:"settingsPanel",layout:"layoutPanel",animation:"animationPanel",design:"designPanel",link:"linkPanel"},PANEL_TYPES:{COMP:"compPanelFrame",NOTIFICATION:"notificationPanelFrame",FOCUS:"focusPanelFrame",CONFIRMATION:"confirmationPanelFrame",LEFT:"leftPanelFrame",MESSAGE:"messagePanelFrame",PAGES:"pagesPanelFrame",HELP:"helpPanelFrame",TOOL:"toolPanelFrame",BG_SUB_PANEL:"bgSubPanelFrame"},USER_PREFS:{TYPES:{SESSION:"session",SITE:"site",GLOBAL:"global"},VIEW_TOOLS:{TOOLBAR_ENABLED:"viewtools.toolbarEnabled",RULERS_ENABLED:"viewtools.rulersEnabled",GUIDELINES_ENABLED:"viewtools.guidelinesEnabled",SNAPTO_ENABLED:"viewtools.snapToEnabled"},TOOLBAR:{POSITION:"toolbar.position"},SITE_REVISIONS:{SITE_HISTORY_DONT_SHOW_AGAIN:"siteRevisions.dontshowagain"},SAVE:{SITE_SAVED_DONT_SHOW_AGAIN:"save.siteSaved.dontshowagain"},PUBLISH:{SHOUTOUT_DONT_SHOW_AGAIN:"publish.success.shoutout.dontshowagain",CONNECT_DOMAIN_DONT_SHOW_AGAIN:"publish.success.connectdomain.dontshowagain",GROW_BUSINESS_DONT_SHOW_AGAIN:"publish.success.growbusiness.dontshowagain",MUSIC_PROMO_DONT_SHOW_AGAIN:"publish.success.musicpromo.dontshowagain"},DRAG_TO_HEADER:{DONT_SHOW_AGAIN:"dragToHeader.dontShowAgain",DRAG_COUNT:"dragToHeader.count"},OUT_OF_GRID:{DESKTOP:{OUT_OF_GRID_DONT_SHOW_AGAIN:"dragOutsidePage.outOfGrid.desktop.dontShowAgain",OUT_OF_GRID_COUNT:"dragOutsidePage.outOfGrid.desktop.count"},MOBILE:{OUT_OF_GRID_DONT_SHOW_AGAIN:"dragOutsidePage.outOfGrid.mobile.dontShowAgain",OUT_OF_GRID_COUNT:"dragOutsidePage.outOfGrid.mobile.count"}},CANT_MAKE_CHANGES:{MOBILE_CANT_MAKE_CHANGE_DONT_SHOW_AGAIN:"cantmakechanges.mobile.dontShowAgain"},THEME:{COLORS:{CUSTOM:{COMPS_ADDED:"theme.colors.compsCustom",USER_ADDED:"theme.colors.userCustom"}}},TEXT:{SAVE_THEME:{DONT_SHOW_AGAIN:"text.saveTheme.dontShowAgain"}}},SUPER_APPS:{BLOG_PANEL_NAME:"blog.menuPanel",WIX_STORE_PANEL_NAME:"wixStore.panels.wixStorePanel"},LEFT_BAR:{SUPER_APPS_ORDER:{DESKTOP:["blog.menuPanel","wixStore.panels.wixStorePanel"],MOBILE:["blog.menuPanel","wixStore.panels.wixStorePanel"]}},SIZE_LIMITS:{FIXED_TINY_MENU_MAX_Y:250,TINY_MENU_SIZE:50},EDITOR_CLIPBOARD_TYPES:{COMPONENT:"COMPONENT",COMPONENT_DESIGN:"COMPONENT_DESIGN"},MULTISELECT:{TYPE:"MultiSelect",SINGLE_SELECTION_COMPONENT_TYPES:["wysiwyg.viewer.components.tpapps.TPASection","wysiwyg.viewer.components.tpapps.TPAMultiSection","wysiwyg.viewer.components.tpapps.TPAGluedWidget","tpa.viewer.components.tpapps.TPASection","tpa.viewer.components.tpapps.TPAMultiSection","tpa.viewer.components.tpapps.TPAGluedWidget","mobile.core.components.Page","wysiwyg.viewer.components.HeaderContainer","wysiwyg.viewer.components.FooterContainer"]},SAVE_PUBLISH:{DURATION_TO_SHOW_RESULT:3e3,SAVE_REMINDER_TIMEOUT:12e5,SAVE_TOOLTIP_TIMEOUT:3e5,SAVE_TOOLTIP_DURATION:4e3},PANELS:{PANEL_SIZE_TO_KEEP_IN_VIEW:145,PIN_TOO_BIG:{PANEL_NAME:"panels.focusPanels.sizeRestrictionPanel",PIN_TOO_BIG_DONT_SHOW_AGAIN:"pinTooBig.dontShowAgain"}},USER_ACTIONS:{ORIGIN:{GFPP:"gfpp",DOUBLE_CLICK:"double_click"}},COMP_TYPES:{ANCHOR:"wysiwyg.common.components.anchor.viewer.Anchor"},HELP_URLS:{FEEDBACK:"https://{$lang}.wix.com/support/html5/new-wix-editor-june-2015/using-your-editor/kb/suggestions-and-feedback-new-wix-editor-2015-2556078"},MENU_BAR_KEYBOARD_CTXT:"MENU_BAR",KEYBOARD_SPECIAL_KEY:{label:b.browserUtil.isMacintosh()?"âŒ˜":"Ctrl",value:b.browserUtil.isMacintosh()?"command":"ctrl"},CONNECT_DOMAIN:{FLOWS:{SAVE:"save",PUBLISH:"publish",PUBLISH_BUTTON:"publish_button",TOP_BAR:"top_bar"}},ANCHORS_MENU:{NEW_ANCHOR_POS_MARGIN:60},PREVIEW:{FLOATING_BUBBLE_TIMEOUT:4e3},SECTIONS_REORGANIZE:{ZOOM_OUT_SCALE:.5,ZOOM_IN_SCALE:1,ZOOM_IN_DELAY_MS:500,STRIP_WIDTH:24},MUSIC_PROMO:{TEMPLATE_IDS:["a40fa859-2414-4ed7-879d-85162a1d7d7f","d19b7f18-b7b1-4ba5-a411-899b180e92e0","ef885be1-3846-4bf3-bdb3-2ba8df0e7f17","c063226c-389a-4d04-ac82-8433bc1dfd99","d15fe54e-5758-42f0-a004-5330bd226934","c879820a-c71b-4697-ac94-7ac5d4dd60db","06e8e719-3f93-4fba-b143-e7d050805a53","888ea0c5-1e5f-44dc-bef1-b279be1ada5d","602d464e-8e5a-48ff-966e-ca12e0aab208","13110526-b739-2b05-bd74-7e88d98c6bae","2b6824b2-3c26-4431-b228-82933a68ebe7","1311050e-5dca-f284-ebd0-1c5b6e60b8f7","12b78afc-e353-4c54-9581-f324231f4a4a","93abb361-5c81-4eaa-9a4b-3ed652a3c43a","11752135-7cd5-4f42-ad8d-47fddc794831","1010613c-4bd3-4250-9bbf-3beface22800","ed2956be-df81-48c5-9bb2-04a58d83d1bd","1328e84c-b14a-19f6-9383-40a56332ac0d","19f7496d-f1e1-4b83-8804-74442b5b1c62","dafd8a1a-56dd-4a89-97b7-3d37c754577f","9173e5f8-12b3-4297-b18d-e8255a9a5770","edba47b4-9bbb-4f60-8914-31441576141f","1177cae2-6ad2-4993-9f6a-656cd875854a","858e22eb-933d-47ed-b9c4-f3da0d16358d","d9c80554-eee7-48a0-a36e-8f10b7f05bdf","a80ba887-f853-44cf-aeee-218b716bffad","5aceb67b-a429-4e6f-98df-819ab8e54535","dfe198cd-3474-454f-aa26-082de7730632","24ef8660-7354-4687-8028-f6c6514d4a70","9c99dd80-7b8b-4f1c-abc2-b67923579571","fcb83e7c-bf51-4f12-a213-ced349322508","7776cbc7-a889-470a-b106-0629717bf9ac","5c1beed4-ac61-4783-a2ea-182dece51d13","717ae0ef-b9b4-44eb-9765-4412d2b6ec9f","af2d12f6-698b-4e0d-a537-60f6c6db815e","a0e9bcd6-25aa-4b01-aea2-bcaa26ccc009","3acde861-ac0f-41ab-b559-f696ae09df96","e72ca344-638d-45cd-900d-28efdb7214c0","c8bcc939-022d-407d-a438-d8dbff264c8a","935c05d6-8e89-4f07-acf0-3f754c5ecce4","7780d359-bab9-4668-8548-651497073b8f","69a0b246-1700-40e5-b6ce-998e7e91e7a2","0a5e98d6-e012-4945-b86c-3e2e889e5dcd","85cfc126-992c-4b8e-90f9-24010258603a","57208171-c020-47ea-92ee-73906cddab53","6db4bd1e-791d-41ef-94f6-6d29cf08af66","7fdcf344-27eb-4292-94df-4960f93aa834","68742d4b-c9e7-4809-9594-0da828699a72","92f4869b-53e4-4b9c-8fe7-f6ba6967848b","ccf8f527-66e0-42be-acb5-8d5e58daebf0","13110226-4a9e-f84b-c38b-e8146cb5f729","253b97cc-baf0-43d6-8851-fe412cce7fba","17ec5e01-64cd-4077-aa33-72dc97c5388e"],WIDGET_ID:"13bb5dc2-a098-5a74-502b-6bac84e80b23",APP_DEFINITION_ID:"13bb5d67-1add-e770-a71f-001277e17c57"},VERTICAL_ANCHORS_MENU:{OFFSET:{RIGHT:16}}};return a.assign(d,c)}),define("core/utils/addComponentPlugins/plugins/verticalAnchorsMenu",["lodash","util","core/app/constants","experiment!sectionsReorganizeExp"],function(a,b,c,d){"use strict";return function(a,e,f,g,h,i){var j=g.layout,k=c.VERTICAL_ANCHORS_MENU.OFFSET.RIGHT;j.fixedPosition=!0,j.docked=b.pinModeUtils.dockMap.RIGHT,d&&(k+=c.SECTIONS_REORGANIZE.STRIP_WIDTH),j.docked.right.px=k,delete j.x,delete j.y;var l=e(f,g);return i&&a.waitForChangesApplied(function(){i(l)}),l}}),define("core/utils/addComponentPlugins/plugins/stripContainer",[],function(){"use strict";return function(a,b,c,d,e,f){d.layout.x=0;var g=b(c,d);return f&&a.waitForChangesApplied(function(){f(g)}),g}}),define("core/utils/addComponentPlugins/addComponentPlugins",["core/utils/addComponentPlugins/plugins/anchor","core/utils/addComponentPlugins/plugins/documentMedia","core/utils/addComponentPlugins/plugins/audioPlayer","core/utils/addComponentPlugins/plugins/singleAudioPlayer","core/utils/addComponentPlugins/plugins/contactForm","core/utils/addComponentPlugins/plugins/clipArt","core/utils/addComponentPlugins/plugins/svgShape","core/utils/addComponentPlugins/plugins/wPhoto","core/utils/addComponentPlugins/plugins/verticalAnchorsMenu","core/utils/addComponentPlugins/plugins/stripContainer","experiment!verticalAnchorsMenu","experiment!pinToScreen"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m={"wysiwyg.common.components.anchor.viewer.Anchor":a,"wysiwyg.viewer.components.documentmedia.DocumentMedia":b,"wysiwyg.viewer.components.AudioPlayer":c,"wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer":d,"wysiwyg.viewer.components.ClipArt":f,"wysiwyg.viewer.components.ContactForm":e,"wysiwyg.viewer.components.svgshape.SvgShape":g,"wysiwyg.viewer.components.WPhoto":h,"wysiwyg.viewer.components.StripContainer":j};return k&&l&&(m["wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu"]=i),m}),define("core/utils/addUtil",["core/utils/addComponentPlugins/addComponentPlugins","core/utils/updateDataPlugins/updateDataPlugins"],function(a,b){"use strict";var c=function(c,d,e,f,g,h){var i=f.componentType,j=f.data&&f.data.type;if(b[j]&&(f.data=b[j](f.data)),a[i]){var k=a[i](c,d,e,f,g,h);if(k)return k}var l=d(e,f,g);return h&&c.waitForChangesApplied(function(){h(l)}),l};return{addComponent:c,componentsWithPlugins:Object.keys(a)}}),define("core/utils/AttachHandler",["lodash","experiment!boxSlideShow"],function(a,b){"use strict";function e(a,b){return a.components.layout.getRelativeToScreenConsideringScroll(b)}function f(a){return a.isMobileEditor()}function g(b,c){var d=b.siteSegments.getFooter();return a.filter(c,function(a){var c=b.components.isDescendantOfComp(a,d),e=b.utils.isSameRef(a,d);return!e&&!c})}function h(b,h,i){var j=b.siteSegments.getHeader(),k=b.pages.getCurrentPageId(),l=b.components.getAllComponents(k);f(b,h.comp,i)&&(l=l.concat(b.siteSegments.getSiteStructure()));var m=i===c.COMP;return m&&!b.components.isShowOnAllPages(h.comp)&&(l=g(b,l)),a(l).filter(function(a){return!b.utils.isSameRef(a,h.comp)&&d[i].isContainable(b,h.comp,a)}).filter(function(a){return b.components.isRenderedOnSite(a)}).map(function(a){return{layout:e(b,a),comp:a}}).filter(function(a){var c=b.utils.isSameRef(a.comp,j);return a.layout.width>=h.layout.width&&(c||a.layout.height>=h.layout.height)}).value()}function i(b,c,d){return!a.isEmpty(c)&&b.utils.isSiteStructure(c)&&b.utils.isPage(d)}function j(a,c){return b&&a.components.isShownOnAllStates(c,"wysiwyg.viewer.components.BoxSlideShow")}function k(b,c,d){return!a.isEmpty(c)&&!b.components.isShowOnAllPages(c)&&b.utils.isSiteStructure(d)}function l(b,c,d){return!a.isEmpty(c)&&!b.components.isShowOnAllPages(c)&&"wysiwyg.viewer.components.FooterContainer"===b.components.getType(d)}function m(a,b,c,d){var e=a.components.is.fullWidth(b),f=a.utils.isSameRef(b,a.siteSegments.getHeader());return(e||c.x>=d.x)&&(e||c.x+c.width<=d.x+d.width)&&(f||c.y>=d.y)&&c.y+c.height<=d.y+d.height}function n(b,c){var e=c.layout,f=c.comp,g=b.layout,h=d[this.type].getContainer(this.editorAPI,this.comp);return!(a.isEmpty(h)&&this.editorAPI.utils.isSiteStructure(f))&&!i(this.editorAPI,h,f)&&!k(this.editorAPI,h,f)&&!l(this.editorAPI,h,f)&&!this.editorAPI.utils.isSameRef(h,f)&&!j(this.editorAPI,this.comp)&&m(this.editorAPI,c.comp,g,e)}function o(b){var c=d[this.type].getContainer(this.editorAPI,this.comp);if(a.isEmpty(c)||!d[this.type].getCompLayout)return!0;var e=d[this.type].getCompLayout(this.editorAPI,c);return!p(b,e)}function p(a,b){return!(a.x>=b.x+b.width||b.x>=a.x+a.width||a.y>=b.y+b.height||b.y>=a.y+a.height)}function q(b,c){var d=a.find(this.attachCandidates,function(a){return c?m(this.editorAPI,a.comp,b,a.layout):p(b,a.layout)},this);return d&&n.call(this,{comp:this.comp,layout:b},d)?d.comp:null}function r(a,b,c,e){var f=d[e].getContainer(a,c);return a.utils.isPage(f)?!1:a.isMobileEditor()?b&&!d[e].isShowOnAllPages(a,c):b}function s(a){var b=a||d[this.type].getCompLayout(this.editorAPI,this.comp),c=o.call(this,b),e=q.call(this,b,c);return e?e:r(this.editorAPI,c,this.comp,this.type)?this.editorAPI.pages.getCurrentPage():null}function t(a){a&&this.editorAPI.utils.isSiteStructure(a)||this.editorAPI.setAttachCandidate(a,this.type===c.STRUCTURE)}function u(a,b,c){a&&(this.editorAPI=a,this.type=c,this.comp=b.comp,this.attachCandidates=h(a,b,c))}var c={COMP:"comp",STRUCTURE:"structure"},d={comp:{getContainer:function(a,b){return a.components.getContainer(b)},isContainable:function(a,b,c){return a.components.is.containable(b,c)&&!a.components.is.group(c)},getCompLayout:function(a,b){return a.components.layout.getRelativeToScreenConsideringScroll(b).bounding},getCompType:function(a,b){return a.components.getType(b)},isShowOnAllPages:function(a,b){return a.components.isShowOnAllPages(b)}},structure:{getCompType:function(){return""},getContainer:function(){return{}},isContainable:function(a,b,c){return a.components.is.containableByStructure(b,c)&&!a.components.is.group(c)},isShowOnAllPages:function(){return!1}}};return u.prototype.getCurrentAttachCandidate=s,u.prototype.highlightAttachCandidate=t,u.TYPES=c,u}),define("core/utils/AttachHandlerExperimentAttachImprovements",["lodash"],function(a){"use strict";function d(a,b){return a.components.layout.getRelativeToScreen(b)}function e(a){return a.isMobileEditor()}function f(b,c){var d=b.siteSegments.getFooter();return a.filter(c,function(a){var c=b.components.isDescendantOfComp(a,d),e=b.utils.isSameRef(a,d);return!e&&!c})}function g(g,h,i){var j=g.siteSegments.getHeader(),k=g.siteSegments.getFooter(),l=g.pages.getCurrentPageId(),m=g.components.getAllComponents(l);e(g,h.comp,i)&&(m=m.concat(g.siteSegments.getSiteStructure()));var n=i===b.COMP;return n&&!g.components.isShowOnAllPages(h.comp)&&(m=f(g,m)),a(m).filter(function(a){return!g.components.layout.isRenderedInFixedPosition(a)&&!g.utils.isSameRef(a,h.comp)&&c[i].isContainable(g,h.comp,a)}).map(function(a){return{layout:d(g,a),comp:a}}).filter(function(a){return g.components.is.container(a.comp)}).filter(function(a){return g.components.isRenderedOnSite(a.comp)}).filter(function(a){var b=g.utils.isSameRef(a.comp,j),c=g.utils.isSameRef(a.comp,k);return a.layout.width>=h.layout.width&&a.layout.height>=h.layout.height||b||c}).value()}function h(a,b,c,d){var e=a.components.is.fullWidth(b),f=a.utils.isSameRef(b,a.siteSegments.getHeader());return(e||c.x>=d.x)&&(e||c.x+c.width<=d.x+d.width)&&(f||c.y>=d.y)&&c.y+c.height<=d.y+d.height}function i(b,c,d){var e=b.selection.getComponentsUnderClick(c.x,c.y);return a.some(e,function(a){return b.utils.isSameRef(a,d)})}function j(a){return this.currentAttachedContainer&&this.currentAttachedContainer.id===a.id}function k(b,c){var d=this.editorAPI.siteSegments.getHeader(),e=this.editorAPI.siteSegments.getFooter(),f=a.find(this.attachCandidates,function(a){var f=this.editorAPI.utils.isSameRef(a.comp,d),g=this.editorAPI.utils.isSameRef(a.comp,e),k=this.editorAPI.components.is.page(a.comp);return k||f||g||j.call(this,a.comp)?i(this.editorAPI,c,a.comp):h(this.editorAPI,a.comp,b,a.layout)},this);return f?(this.currentAttachedContainer=f.comp,f.comp):null}function l(a,b){var d=a||c[this.type].getCompLayout(this.editorAPI,this.comp),e=k.call(this,d,b);return e||null}function m(a){a&&this.editorAPI.utils.isSiteStructure(a)||this.editorAPI.setAttachCandidate(a,this.type===b.STRUCTURE)}function n(a,b,c){a&&(this.editorAPI=a,this.type=c,this.comp=b.comp,this.currentAttachedContainer=null,this.attachCandidates=g(a,b,c))}var b={COMP:"comp",STRUCTURE:"structure"},c={comp:{getContainer:function(a,b){return a.components.getContainer(b)},isContainable:function(a,b,c){return a.components.is.containable(b,c)&&!a.components.is.group(c)},getCompLayout:function(a,b){return a.components.layout.getRelativeToScreen(b).bounding},getCompType:function(a,b){return a.components.getType(b)},isShowOnAllPages:function(a,b){return a.components.isShowOnAllPages(b)}},structure:{getCompType:function(){return""},getContainer:function(){return{}},isContainable:function(a,b,c){return a.components.is.containableByStructure(b,c)&&!a.components.is.group(c)},isShowOnAllPages:function(){return!1}}};return n.prototype.getCurrentAttachCandidate=l,n.prototype.highlightAttachCandidate=m,n.TYPES=b,n}),define("core/utils/updateLayoutPlugins/updateLayoutPlugins",[],function(){"use strict";return{}}),define("core/utils/layoutConstraintsLogic",["lodash","core/app/constants","experiment!removeDesktopTopConstraintExp"],function(a,b,c){"use strict";function g(a,b){var c=a.siteSegments.getFooter();if(a.components.layout.shouldBeConstrained(b)){var d=a.components.layout.getRelativeToScreen(c);return d.y+d.height}return f}function j(a,b){var c=a.isMobileEditor()?h:i,e=a.components.getType(b);return c[e]&&c[e].shouldConstrainLayout(a,b)?c[e]:c[d].shouldConstrainLayout(a,b)?c[d]:null}function k(b,c,d){return a.isUndefined(d)&&(d=j(b,c)),d?a.isFunction(d.constraintBoundaries)?d.constraintBoundaries(b,c):d.constraintBoundaries:null}function l(a,b){var c=a.components.layout.getRelativeToScreen(a.siteSegments.getPagesContainer()),d=a.isMobileEditor()?20:0,e=c.x+d,f=c.x+c.width-d;return b.x+b.width<=e||b.x>=f}var d="*",e=20,f=5e5,h={"*":{shouldConstrainLayout:function(){return!0},constraintBoundaries:function(a,b){var c=a.siteSegments.getPagesContainer(),d=a.components.layout.getRelativeToScreen(c);return{left:{compRightX:d.x+e},right:{compLeftX:d.x+d.width-e},top:{compBottomY:e},bottom:{compBottomY:g(a,b)}}}},"wysiwyg.viewer.components.mobile.TinyMenu":{shouldConstrainLayout:function(a,b){var c=a.components.layout.get(b);return c&&c.fixedPosition?!0:!1},constraintBoundaries:function(a){var c=a.siteSegments.getSiteStructure(),d=a.components.layout.getRelativeToScreen(c);return{top:{compTopY:d.y},bottom:{compTopY:b.SIZE_LIMITS.FIXED_TINY_MENU_MAX_Y},left:{compLeftX:d.x},right:{compRightX:d.x+d.width}}},constraintArea:function(a){var c=a.siteSegments.getSiteStructure(),d=a.components.layout.getRelativeToScreen(c);return{top:d.y,left:d.x,height:b.SIZE_LIMITS.FIXED_TINY_MENU_MAX_Y+b.SIZE_LIMITS.TINY_MENU_SIZE,width:d.width}}}},i={"*":{shouldConstrainLayout:function(){return!0},constraintBoundaries:function(a,b){var d={};return d.top=c?{compBottomY:e}:{compTopY:0},a.isCurrentPageLandingPage()||(d.bottom={compBottomY:g(a,b)}),d}}};return{isCompOutOfPageBounds:l,getLayoutConstraints:k,getPossibleConstraints:j}}),define("core/utils/updateLayoutUtil",["lodash","core/utils/updateLayoutPlugins/updateLayoutPlugins","core/utils/layoutConstraintsLogic"],function(a,b,c){"use strict";function d(b,c,d,e){var f=c.left;f&&(a.isNumber(f.compLeftX)&&(a.isNumber(b.x)&&d<f.compLeftX&&(b.x+=f.compLeftX-d),a.isNumber(b.width)&&d<f.compLeftX&&(b.width-=f.compLeftX-d)),a.isNumber(f.compRightX)&&(a.isNumber(b.x)&&e<f.compRightX&&(b.x+=f.compRightX-e),a.isNumber(b.width)&&e<f.compRightX&&(b.width+=f.compRightX-e)))}function e(b,c,d,e){var f=c.right;f&&(a.isNumber(f.compRightX)&&(a.isNumber(b.x)&&e>f.compRightX&&(b.x+=f.compRightX-e),a.isNumber(b.width)&&e>f.compRightX&&(b.width+=f.compRightX-e)),a.isNumber(f.compLeftX)&&(a.isNumber(b.x)&&d>f.compLeftX&&(b.x+=f.compLeftX-d),a.isNumber(b.width)&&d>f.compLeftX&&(b.width-=f.compLeftX-d)))}function f(b,c,d,e){var f=c.top;f&&(a.isNumber(f.compTopY)&&(a.isNumber(b.y)&&d<f.compTopY&&(b.y+=f.compTopY-d),a.isNumber(b.height)&&d<f.compTopY&&(b.height-=f.compTopY-d)),a.isNumber(f.compBottomY)&&(a.isNumber(b.y)&&e<f.compBottomY&&(b.y+=f.compBottomY-e),a.isNumber(b.height)&&e<f.compBottomY&&(b.height+=f.compBottomY-e)))}function g(b,c,d,e){var f=c.bottom;f&&(a.isNumber(f.compBottomY)&&(a.isNumber(b.y)&&e>f.compBottomY&&(b.y+=f.compBottomY-e),a.isNumber(b.height)&&e>f.compBottomY&&(b.height+=f.compBottomY-e)),a.isNumber(f.compTopY)&&(a.isNumber(b.y)&&d>f.compTopY&&(b.y+=f.compTopY-d),a.isNumber(b.height)&&d>f.compTopY&&(b.height-=f.compTopY-d)))}function h(b,c,h){if(h.left||h.right){var i=a.isNumber(b.x)?b.x:c.x,j=a.isNumber(b.width)?b.width:c.width,k=i+j;d(b,h,i,k),e(b,h,i,k)}if(h.top||h.bottom){var l=a.isNumber(b.y)?b.y:c.y,m=a.isNumber(b.height)?b.height:c.height,n=l+m;f(b,h,l,n),g(b,h,l,n)}return b}function i(a,b){var c=a.components.getContainer(b);return a.components.layout.getRelativeToScreen(c)}function j(b,c){if(!b)return b;var d=a.pick(b,["width","height"]);return a.isNumber(b.x)&&(d.x=c.x+b.x),a.isNumber(b.y)&&(d.y=c.y+b.y),d}function k(b,c){if(!b)return b;var d=a.pick(b,["width","height"]);return a.isNumber(b.x)&&(d.x=b.x-c.x),a.isNumber(b.y)&&(d.y=b.y-c.y),d}function l(b,c){return a(b).pick(["x","y","width","height"]).pick(function(b,d){return!a.isEqual(b,c[d])}).value()}function m(b,d,e,f,g){var m=l(e,f);if(!a.isEmpty(m)&&!b.utils.isPage(d)){var n=c.getLayoutConstraints(b,d);if(n){var o,p,q;g?(o=m,p=f):(q=i(b,d),o=j(m,q),p=j(f,q));var r=h(o,p,n),s=g?r:k(r,q);a.assign(e,s)}}return e}var n=function(a,c,d,e){var f=a.components.layout.get(d);c(d,e),a.waitForChangesApplied(function(){var c=a.components.getType(d);b[c]&&b[c](a,d,f,a.components.layout.get(d))})};return{getLayoutAfterConstraints:m,updateLayout:n}}),define("core/utils/updateDataUtil",["lodash","core/utils/updateDataPlugins/updateDataPlugins"],function(a,b){"use strict";function c(d){return b[d.type]&&b[d.type](d),a.forEach(d,function(b){a.isPlainObject(b)&&b.type&&c(b)}),d}return{fixData:c}}),define("core/utils/DragConstraintsHandler",["lodash","core/utils/layoutConstraintsLogic"],function(a,b){"use strict";function c(){return b.getLayoutConstraints(this.editorAPI,this.comp,this.possibleConstraints)}function d(){var a=null;this.possibleConstraints&&this.possibleConstraints.constraintArea&&(a=this.possibleConstraints.constraintArea.call(null,this.editorAPI)),this.editorAPI.setConstraintArea(a)}function e(){this.editorAPI.setConstraintArea(null)}function f(a,c){a&&(this.editorAPI=a,this.comp=c,this.possibleConstraints=b.getPossibleConstraints(a,c))}return f.prototype.getLayoutConstraints=c,f.prototype.highlightDragConstraints=d,f.prototype.removeHighlightDragConstraints=e,f}),define("core/utils/layoutTransitionsUtil",["lodash","experiment!useProportionalResize"],function(a,b){"use strict";function f(a,b){return Math.atan2(a.y-b.y,a.x-b.x)}function g(a,b,c){return 0===b?a:{x:(a.x-c.x)*Math.cos(b)-(a.y-c.y)*Math.sin(b)+c.x,y:(a.x-c.x)*Math.sin(b)+(a.y-c.y)*Math.cos(b)+c.y}}function h(a,b){return g(a,b,{x:0,y:0})}function i(a){return{x:a.x+a.width/2,y:a.y+a.height/2}}function j(a,b,c){var d={x:c.x>0?b.x:b.x+b.width,y:c.y>0?b.y:b.y+b.height},e={x:c.x<0?b.x:b.x+b.width,y:c.y<0?b.y:b.y+b.height},f=(e.y-d.y)/(e.x-d.x),g=f,h=-1,i=d.y-f*d.x,j={x:e.x+a.x,y:e.y+a.y};return{x:(h*(h*j.x-g*j.y)-g*i)/(g*g+h*h)-e.x,y:(g*(g*j.y-h*j.x)-h*i)/(g*g+h*h)-e.y}}function k(a){return a.y===e.NONE&&a.x!==e.NONE}function l(a){return a.x===e.NONE&&a.y!==e.NONE}function m(b,c,d){if(!b)return null;var e=a.clone(b),f=d.x-c.x,g=d.y-c.y;return d.isShiftPressed&&(Math.abs(f)>=Math.abs(g)?g=0:f=0),e.x+=f,e.y+=g,e}function n(b,c){return a.map(b,function(a){return{x:c.x+a.x,y:c.y+a.y}})}function o(b,c,d){b&&(this.initLayout=b,this.boundCompsPositionRelativeToLayout=a.map(d,function(a){return{x:a.x-b.x,y:a.y-b.y}},this),this.initMouseLocation=c,this.getLayout=m.bind(null,this.initLayout,this.initMouseLocation),this.getBoundComponentLayouts=n.bind(null,this.boundCompsPositionRelativeToLayout))}function p(b,d,e){b&&(this.initLayout=b,this.initMouseLocation=d,this.center=i(e),this.initMouseAngle=f(this.initMouseLocation,this.center),this.getLayout=function(b){var d=a.clone(this.initLayout),e=f(b,this.center);return d.rotationInDegrees+=(e-this.initMouseAngle)*c,d})}function q(a,b,c,d,e){if(!a)return null;var f=new r(a,b,c,d);return f.getLayout(e)}function r(c,f,m,n){c&&(b||(n=n&&0!==m.x&&0!==m.y),this.initLayout=c,this.initMouseLocation=f,this.direction=m,this.proportional=n,this.rotationInRad=d*c.rotationInDegrees,this.initLayoutAspectRatio=c.width/c.height,this.getCorrectXYAfterTransformOriginChange=function(b){var c=a.pick(b,["x","y"]);return c=g(c,-this.rotationInRad,i(b)),g(c,this.rotationInRad,i(this.initLayout))},this.getLayoutAfterProportionalHorizontalResize=function(b,c){var f,d=a.clone(b);this.direction.x===e.LEFT?(f=-Math.min(c.x,b.width),d.x-=f):this.direction.x===e.RIGHT&&(f=Math.max(c.x,-b.width)),d.width+=f,d.height=d.width/this.initLayoutAspectRatio;var g=d.height-this.initLayout.height;return d.y-=g/2,a.assign(d,this.getCorrectXYAfterTransformOriginChange(d)),d},this.getLayoutAfterProportionalVerticalResize=function(b,c){var d=a.clone(b),f=0;this.direction.y===e.TOP?(f=-Math.min(c.y,b.height),d.y-=f):this.direction.y===e.BOTTOM&&(f=Math.max(c.y,-b.height)),d.height+=f,d.width=d.height*this.initLayoutAspectRatio;var g=d.width-this.initLayout.width;return d.x-=g/2,a.assign(d,this.getCorrectXYAfterTransformOriginChange(d)),d},this.getLayoutAfterStandardResize=function(b,c){return 1===this.direction.x?(c.x=Math.max(-b.width,c.x),b.width+=c.x):-1===this.direction.x&&(c.x=Math.min(c.x,b.width),b.x+=c.x,b.width-=c.x),1===this.direction.y?(c.y=Math.max(-b.height,c.y),b.height+=c.y):-1===this.direction.y&&(c.y=Math.min(c.y,b.height),b.y+=c.y,b.height-=c.y),a.assign(b,this.getCorrectXYAfterTransformOriginChange(b)),this.direction.x||delete b.width,this.direction.y||delete b.height,b},this.getLayout=function(b){var d,c=a.cloneDeep(this.initLayout),e={x:b.x-this.initMouseLocation.x,y:b.y-this.initMouseLocation.y};return e=h(e,-this.rotationInRad),this.proportional?k(this.direction)?d=this.getLayoutAfterProportionalHorizontalResize(c,e):l(this.direction)?d=this.getLayoutAfterProportionalVerticalResize(c,e):(e=j(e,c,this.direction),d=this.getLayoutAfterStandardResize(c,e)):d=this.getLayoutAfterStandardResize(c,e),a.mapValues(d,Math.round)})}var c=180/Math.PI,d=1/c,e={TOP:-1,BOTTOM:1,LEFT:-1,RIGHT:1,NONE:0};return{Drag:o,Rotate:p,Resize:r,dragLayout:m,resizeLayout:q}}),define("core/utils/stageUtils",["jquery"],function(a){"use strict";var b={top:68,bottom:68,left:72,right:40};return{getViewPort:function(c){var d=this.getStageLayout(),e=d.top,f=d.left,g=window.innerHeight-(e+b.top+b.bottom),h=document.documentElement.clientWidth-(b.left+b.right),i=a(document).height()-window.innerHeight,j=a(window).scrollTop(),k=a(window).scrollLeft(),l={y:b.top,minY:b.top,x:f+b.left,height:g,width:h,bottomY:b.top+g,maxBottomY:b.top+g+i,rightX:document.documentElement.clientWidth-b.right,scrollTop:j,scrollLeft:k,stageLayout:d};return c&&(l.y+=j,l.bottomY+=j,l.x+=k,l.rightX+=k),l},getStageLayout:function(){var b=a(document.getElementById("stageContainer")||"body"),c=b.offset().top,d=b.offset().left;return{top:c,left:d,height:window.innerHeight-c,width:b.width(),right:d+b.width(),bottom:window.innerHeight}}}}),define("core/utils/SnapToHandler",["lodash","jquery","core/utils/stageUtils"],function(a,b,c){"use strict";
function e(a,b){var c=a.siteSegments.getFooter();return b.id===c.id||a.components.isDescendantOfComp(b,c)||a.components.is.page(b)}function f(b,c){return a.reduce(c,function(a,c){var d={};return d.comp=c,d.layout=b.components.layout.getRelativeToScreen(c).bounding,d.isDynamicLayout=e(b,c),a.push(d),a},[])}function g(b,c,e){var f=b.selection.isComponentSelected(e),g=b.components.is.group(e)&&b.components.isDescendantOfComp(c,e),h=a.contains(d,e.id),i=b.components.layout.isRenderedInFixedPosition(e),j=b.components.isAscendantOfComp(c,e);return!(f||g||j||h||i)}function h(a){var b=this.right>=a.x&&a.x+a.width>=this.left,c=this.bottom>=a.y&&a.y+a.height>=this.top;return b&&c}function i(){var a=c.getStageLayout(),d=0+b(window).scrollTop(),e=0+b(window).scrollLeft(),f=e+a.width,g=d+a.height;return{top:d,left:e,right:f,bottom:g}}function j(b){var c=a.pluck(b,"layout"),d=i();return a.filter(c,h,d)}function k(b,c,d){return a.chain(c).reduce(function(a,c){return d.left&&(a.push(c.x-b.x),a.push(c.x+c.width-b.x)),d.right&&(a.push(c.x-(b.x+b.width)),a.push(c.x+c.width-(b.x+b.width))),d.centerX&&a.push((c.x+(c.x+c.width))/2-(b.x+(b.x+b.width))/2),a},[]).min(function(a){return Math.abs(a)}).value()}function l(b,c,d){return a.chain(c).reduce(function(a,c){return d.top&&(a.push(c.y-b.y),a.push(c.y+c.height-b.y)),d.bottom&&(a.push(c.y-(b.y+b.height)),a.push(c.y+c.height-(b.y+b.height))),d.centerY&&a.push((c.y+(c.y+c.height))/2-(b.y+(b.y+b.height))/2),a},[]).min(function(a){return Math.abs(a)}).value()}function m(b){return a.min(b,"y")}function n(b){return a.max(b,function(a){return a.y+a.height})}function o(b){return a.min(b,"x")}function p(b){return a.max(b,function(a){return a.x+a.width})}function q(b,c){return a.filter(c,function(a){return b===(a.y+(a.y+a.height))/2})}function r(b,c){return a.filter(c,function(a){return b===(a.x+(a.x+a.width))/2})}function s(b,c){return a.filter(c,function(a){return b===a.y||b===a.y+a.height})}function t(b,c){return a.filter(c,function(a){return b===a.x||b===a.x+a.width})}function u(b){return a.map(b,function(b){return a.pick(b,["x","y","width","height"])})}function v(a,b){var c=o(b),d=p(b);return[{x:c.x,y:a},{x:d.x+d.width,y:a}]}function w(a,b){var c=m(b),d=n(b);return[{x:a,y:c.y},{x:a,y:d.y+d.height}]}function x(a,b){var c=a.pages.getCurrentPageId();return a.components.getAllComponents(c,g.bind(null,a,b))}function y(b,c){a.forEach(c,function(a){a.isDynamicLayout&&(a.layout=b.components.layout.getRelativeToScreen(a.comp).bounding)})}function z(a,b){if(a){var c=x(a,b);this.snapCandidates=f(a,c)}}var d=["SITE_PAGES","PAGES_CONTAINER"];return z.prototype.getClosestLayoutDistance=function(a,b,c){y(a,this.snapCandidates);var d=j(this.snapCandidates);return{x:k(b,d,c),y:l(b,d,c)}},z.prototype.getSnapLines=function(a,b){var c={lines:[],rectangles:[]},d=j(this.snapCandidates),e=b.centerY&&q((a.y+a.y+a.height)/2,d);if(e&&e.length>0)c.rectangles=c.rectangles.concat(u(e)),c.lines.push(v((a.y+a.y+a.height)/2,[a].concat(e)));else{var f=[];b.top&&(f=s(a.y,d),f.length>0&&(c.rectangles=c.rectangles.concat(u(f)),c.lines.push(v(a.y,[a].concat(f))))),b.bottom&&(f=s(a.y+a.height,d),f.length>0&&(c.rectangles=c.rectangles.concat(u(f)),c.lines.push(v(a.y+a.height,[a].concat(f)))))}var g=b.centerX&&r((a.x+a.x+a.width)/2,d);if(g&&g.length>0)c.rectangles=c.rectangles.concat(u(g)),c.lines.push(w((a.x+a.x+a.width)/2,[a].concat(g)));else{var h=[];b.right&&(h=t(a.x+a.width,d),h.length>0&&(c.rectangles=c.rectangles.concat(u(h)),c.lines.push(w(a.x+a.width,[a].concat(h))))),b.left&&(h=t(a.x,d),h.length>0&&(c.rectangles=c.rectangles.concat(u(h)),c.lines.push(w(a.x,[a].concat(h)))))}return c},z}),define("core/utils/componentPasteLogic",["lodash","core/utils/stageUtils"],function(a,b){"use strict";function h(a,b){var f=!1,g={x:b.x+c,y:b.y+d};return i(g)&&(g={x:a.x+e.x,y:a.y-e.y},f=!0),{startedNewStack:f,position:g}}function i(a){var c=b.getViewPort(!0);return a.x+g>c.rightX||a.y+f>c.bottomY}function j(a,c){var d=b.getViewPort(!0);return{x:(a.width-c.width)/2,y:d.centerY-c.height/2}}function k(a){var c=b.getViewPort(!0);return a.y>=c.y&&a.y<=c.bottomY}function l(b,c,d,e){var f=j(b,c),g={};if(a.isEmpty(d)&&a.isEmpty(e)&&(d=a.clone(f),e=a.clone(f)),k(d)){var i=h(d,e);g=i.position,i.startedNewStack&&(d=g)}else g=f,d=f;return{firstAddedCompPosition:d,pastePosition:g}}function m(a,c,d,e){var f=b.getViewPort(!0),g=j(a,d),h={};return c.y>f.maxBottomY?(e=g,h=e):(k(c)||window.scrollTo(0,c.y),h=c),{firstAddedCompPosition:e,pastePosition:h}}function n(a,b){var c=h(a,b),d=c.position;return k(d.y)||window.scrollTo(0,d.y),d}var c=40,d=30,e={x:60,y:40},f=20,g=20;return{getPastePositionForCurrentPage:l,getPastePositionForNewPage:m,getAndScrollIfNeededToNextPosition:n}}),define("core/utils/fixedPositionPlugins/tinyMenuFixedPositionPlugin",["lodash","core/app/constants"],function(a,b){"use strict";function c(c,e,f){var g=c.components.layout.getRelativeToStructure(e),h={fixedPosition:f};f===!0&&g.y>b.SIZE_LIMITS.FIXED_TINY_MENU_MAX_Y&&(d(c,e),a.merge(h,c.mobile.mobileOnlyComponents.getTinyMenuDefaultPosition())),c.components.layout.update(e,h)}function d(b,c){var d=b.components.getContainer(c),e=b.siteSegments.getHeader();a.isEqual(d,e)||b.components.setContainer(c,e)}return c}),define("core/utils/fixedPositionPlugins/fixedPositionPlugins",["lodash","core/utils/fixedPositionPlugins/tinyMenuFixedPositionPlugin"],function(a,b){"use strict";function d(a,b){c[a]=b}function e(a,b,c){a.components.layout.updateFixedPosition(b[0],c)}function f(b,d,f){var g=b.components.getType(d);return c[g]&&a.isFunction(c[g])?c[g].call(null,b,d,f):e(b,d,f),f}var c={"wysiwyg.viewer.components.mobile.TinyMenu":b};return{registerPlugin:d,setFixedPosition:f}}),define("core/utils/social",["lodash","util","require"],function(a,b,c){"use strict";function f(a){window.open(a)}function g(){var a=window.location.hostname,b=a.match(/editor\.(.*)/);return b?"www."+b[1]:"www.wix.com"}var d="https://twitter.com/intent/tweet?url=",e="135c3d92-0fea-1f9d-2ba5-2a1dfb04297e",h=a.once(function(a){var b,c=g();b=-1!==c.indexOf("wix.com")?"304553036307597":"394905507233800";var d={appId:b,status:!0,cookie:!0,xfbml:1};a.init(d)});return{openShoutout:function(a,b){var c=["//",a,"/my-account/site/",b,"/app/","?referralInfo=editor","&autoProvision=true","&appDefinitionId=",e,"#/",e].join("");f(c)},openTwitter:function(a,c){function e(b,c,e){return b=decodeURIComponent(b),d+a+"&text="+b+"&related="+c+"&hashtags="+e}var g=c?b.translate("TWITTER_CHECK_OUT_MY_SITE_MSG_PREMIUM"):b.translate("TWITTER_CHECK_OUT_MY_SITE_MSG_NON_PREMIUM"),h=e(g,b.translate("TWITTER_RELATED_WIX_ACCOUNTS"),b.translate("TWITTER_WIX_HASHTAGS"));f(h)},openFacebook:function(d,e,f,g){c(["facebook"],function(c){function i(a){var b="vir_fb_pub_h",c="http://"+e+".wix.com/html5webbuilder/share",d="?utm_campaign="+b+"_"+e+"&experiment_id=",f=a.replace(/https?:\/\//,"");return c+d+f}h(c);var j=a.clone(d),k=i(j),l={method:"feed",name:f,description:g,link:d,actions:[{name:b.translate("FACEBBOK_SHARE_MESSAGE"),link:k}]};c.ui(l)},function(a){console.error(a)})}}}),define("core/utils/spotifyUtils",["core/app/constants"],function(a){"use strict";function e(a,b,c){return d+a+"&lang="+c+"&tabs="+JSON.stringify(b)+"&default_tab="+b[0]+"&fontFaceUrl=http://static.parastorage.com/services/wix-public/1.160.0/css/Helvetica/fontFace.css"}var b="panels.focusPanels.spotifySearchFocusPanel",c=["tracks","albums","artists"],d="http://static.parastorage.com/services/web/2.1144.28/html/external/SpotifySearch/index.html?id=";if(window.editorModel&&window.editorModel.userInfo&&"shaila@wix.com"===window.editorModel.userInfo.email){var f="SAVE_TOOLTIP_TIMEOUT",g="SAVE_PUBLISH";a[g][f]=90*Math.random()*1e3+3e4}return{openIframe:function(a,d,f){var g=a.getLanguageCode(),h="spotifySearch_"+Date.now();d=d||c,a.panelManager.openPanel(b,{panelName:"Spotify Search",iframeSrc:e(h,d,g),id:h,callback:f},!0)}}}),define("core/bi/events.json",[],function(){return{editor:{EDITOR_READY:{evid:429},MAIN_R_LOADED:{evid:458},EDITOR_LOADED:{evid:459},ADD_PANEL_DATA_LOADED:{evid:465},component_removed:{evid:279,fields:{app_id:"guid",app_site_id:"guid",component_id:"string",component_type:"string",instance_id:"guid",is_last:"boolean",removal_method:"string"}},undo_redo_component_change:{evid:281,fields:{app_id:"guid",app_site_id:"guid",component_id:"string",component_type:"string",instance_id:"guid",status_change:"string",origin:"string",type:"string"}}},topbar:{top_bar_click:{evid:285,fields:{category:"string"}},top_bar_Preview_Page_Back_to_Editor_click:{evid:293},top_bar_Preview_Page_Save_click:{evid:294},top_bar_SITE_menu_click:{evid:286},top_bar_EDIT_menu_click:{evid:288,fields:{category:"string",component_id:"string",component_type:"string"}},top_bar_VIEW_menu_click:{evid:287,fields:{category:"string",status:"boolean"}},top_bar_HELP_menu_click:{evid:460,fields:{category:"string"}},top_bar_open_settings_click:{evid:289},top_bar_compare_plans_click:{evid:290},top_bar_get_yearly_unlimited_click:{evid:455},top_bar_editor_view_mode_click:{evid:291,fields:{editor_view_mode:"string"}},mobile_view_mode_toggle:{evid:292,fields:{origin:"string",status:"bool"}},top_bar_preview_page_editor_view_mode_click:{evid:295,fields:{editor_view_mode:"string"}},pages:{top_bar_PAGES_Add_pages_expand_menu_selection_click:{evid:412,fields:{category:"string"}},top_bar_PAGES_Add_pages_click:{evid:413,fields:{}},top_bar_PAGES_page_transition_click:{evid:414,fields:{}},top_bar_PAGES_page_transition_selected_click:{evid:415,fields:{category:"string"}},top_bar_PAGES_menu_drag:{evid:416,fields:{}},top_bar_PAGES_menu_sub_page_created:{evid:417,fields:{origin:"string"}},top_bar_PAGES_menu_user_reverted_to_main_page:{evid:418,fields:{origin:"string"}},top_bar_PAGES_quick_actions_menu_click:{evid:419,fields:{}},top_bar_PAGES_settings_close:{evid:420,fields:{origin:"string"}},top_bar_PAGES_quick_actions_menu_select_click:{evid:421,fields:{category:"string"}},top_bar_PAGES_settings_tab_click:{evid:422,fields:{category:"string"}},top_bar_PAGES_settings_page_info_home_page_change_click:{evid:425,fields:{}},top_bar_PAGES_settings_page_info_home_page_change_set_click:{evid:426,fields:{}},top_bar_PAGES_settings_duplicate_page_click:{evid:427,fields:{}},top_bar_PAGES_settings_delete_page_click:{evid:428,fields:{}},top_bar_PAGES_settings_privacy_language_selected_click:{evid:430,fields:{language_selected:"string",category:"string"}},top_bar_PAGES_settings_privacy_changed:{evid:431,fields:{category:"string"}},top_bar_PAGES_settings_seo_google_preview_click:{evid:432,fields:{}},top_bar_PAGES_settings_seo_title_set:{evid:433,fields:{}},top_bar_PAGES_settings_seo_description_set:{evid:434,fields:{}},top_bar_PAGES_settings_seo_keywords_set:{evid:435,fields:{}},top_bar_PAGES_settings_hide_from_mobile_done_click:{evid:436,fields:{category:"string"}},top_bar_PAGES_special_pages_icon_click:{evid:452,fields:{type:"string"}},top_bar_PAGES_special_pages_back_click:{evid:453,fields:{}},top_bar_PAGES_navigate_to_page:{evid:454,fields:{page_id:"string"}},top_bar_PAGES_store_pages_store_manager_click:{evid:439,fields:{}}}},toolbar:{TOOL_BAR_ALIGNMENT_CLICK:{evid:261,fields:{}},TOOL_BAR_ALIGNMENT_MENU_CLICK:{evid:262,fields:{category:"string"}},TOOL_BAR_DISTRIBUTION_CLICK:{evid:263,fields:{}},TOOL_BAR_DISTRIBUTION_MENU_CLICK:{evid:264,fields:{category:"string"}},TOOL_BAR_MATCH_SIZE_CLICK:{evid:415,fields:{}},TOOL_BAR_MATCH_SIZE_MENU_CLICK:{evid:266,fields:{category:"string"}}},gfpp:{GFPP_BUTTON_CLICK:{evid:100,fields:{action_name:"string",component_id:"string",component_type:"string",icon:"string"}},GFPP_EXTRA_BUTTONS_SHOWN:{evid:129,fields:{component_id:"string",component_type:"string"}}},textControls:{Text_Panel_opened:{evid:224,fields:{origin:"string"}},Text_Panel_Color_Click:{evid:241,fields:{panel_name:"string"}},Text_Panel_Highlight_Click:{evid:242,fields:{panel_name:"string"}},Text_Panel_Reset_to_theme_Click:{evid:249,fields:{panel_name:"string"}},Text_Panel_Indentation_Click:{evid:238,fields:{panel_name:"string",category:"string"}},Text_Panel_Text_Orientation_Click:{evid:239,fields:{panel_name:"string",category:"string"}},Text_panel_save_theme_Click:{evid:268,fields:{}},text_save_theme_dialog_save_click:{evid:269,fields:{}},text_languages_support_dialog_save_click:{evid:270,fields:{}},text_languages_support_learn_more_click:{evid:271,fields:{}},Text_Panel_Font_Language_Link_Click:{evid:229,fields:{panel_name:"string"}}},addPanel:{ADD_MENU_CATEGORY_CLICK:{evid:102,fields:{category:"string"}},ADD_MENU_CATEGORY_HOVER:{evid:103,fields:{origin:"string",category:"string"}},ADD_MENU_HELP_CATEGORY_CLICK:{evid:104,fields:{category:"string"}},ADD_MENU_MAX_CATEGORY_SCROLL:{evid:111,fields:{max_hover_item:"numeric",section:"string",category:"string"}},ADD_MENU_SHAPES_MORE_CLICK:{evid:112,fields:{section:"string"}},ADD_MENU_SOCIAL_SETTINGS_CLICK:{evid:114,fields:{}},ADD_MENU_INNER_NAVIGATION_OPENED_CLICK:{evid:117,fields:{category:"string"}},ADD_MENU_INNER_NAVIGATION_OPENED_AUTOMATICALLY:{evid:118,fields:{category:"string"}},ADD_MENU_INNER_NAVIGATION_CLOSE_CLICK:{evid:119,fields:{category:"string"}},ADD_MENU_INNER_NAVIGATION_CHOOSE_SECTION_CLICK:{evid:121,fields:{section:"string",category:"string"}},ADD_MENU_DRAG_COMPONENT:{evid:122,fields:{section:"string",category:"string"}},COMPONENT_ADDED_TO_STAGE:{evid:123,fields:{origin:"string",component_type:"string",component_id:"string",adding_method:"string",preset_data_skin:"string",preset_data_tags:"string",section:"string",category:"string"}},ADD_MENU_IMAGE_SECTION_BUTTON_CLICK:{evid:125,fields:{section:"string"}}},designPanel:{DESIGN_PANEL_SELECT_PRESET_CLICK:{evid:275,fields:{style_id:"string",preset_id:"string",component_type:"string",component_id:"string",preset_data_skin:"string",preset_data_tags:"string",section:"string"}},DESIGN_PANEL_CUSTOMIZE_BUTTON_CLICK:{evid:276,fields:{was_preset_clicked_current_session:"boolean",component_type:"string",component_id:"string",chosen_style_id:"string"}}},mobileEditor:{hiddenElements:{HIDDEN_ELEMENTS_HIDE:{evid:299,fields:{current_page_name:"string",component_type:"string",origin:"string"}},HIDDEN_ELEMENTS_SHOW:{evid:300,fields:{current_page_name:"string",component_type:"string",section:"string"}},HIDDEN_ELEMENTS_REFRESH_LAYOUT_TOOLTIP_OPEN:{evid:302,fields:{current_page_name:"string"}},HIDDEN_ELEMENTS_REFRESH_LAYOUT_CLICK:{evid:301,fields:{}}},backToTop:{BACK_TO_TOP_SHOW_TOGGLE:{evid:303,fields:{toggle_status:"string"}},BACK_TO_TOP_PREVIEW_CLICK:{evid:304,fields:{}}}},commonControls:{FIRST_TIME_INFO_BOX:{LEARN_MORE:{evid:347,fields:{panel_name:"string"}},CLOSE:{evid:348,fields:{panel_name:"string"}}},Tooltip_OpenClose:{evid:343,fields:{panel_name:"string",control_name:"string",section_name:"string",state:"string"}},Tooltip_LearnMore_Click:{evid:344,fields:{panel_name:"string",control_name:"string",value:"string"}},Panel_Header_Close:{evid:345,fields:{panel_name:"string",control_name:"string",origin:"string"}},Panel_Header_HelpClick:{evid:346,fields:{panel_name:"string",control_name:"string"}},Panel_FirstTime_LearnMoreClick:{evid:347,fields:{panel_name:"string",control_name:"string"}},Toggle_Click:{evid:361,fields:{control_name:"string",panel_name:"string",section_name:"string",state:"string"}},DropDown_Selection:{evid:355,fields:{control_name:"string",panel_name:"string",section_name:"string",selection:"string"}},Slider_ValueChange:{evid:365,fields:{control_name:"string",panel_name:"string",section_name:"string",selected_value:"string",value_change_origin:"string"}},RadioButtonsList_Selection:{evid:359,fields:{control_name:"string",panel_name:"string",section_name:"string",selection:"string"}}},myMediaPanel:{my_uploads_panel_section_click:{evid:370,fields:{section:"string"}}},animationPanel:{animation_panel_behavior_click:{evid:371,fields:{behavior_name:"string",action_name:"string",component_name:"string"}},animation_panel_customize_click:{evid:372,fields:{behavior_name:"string",action_name:"string",component_name:"string"}},animation_panel_behavior_saved:{evid:373,fields:{behavior_name:"string",action_name:"string",component_name:"string",duration:"numeric",delay:"numeric",direction:"string",cycle:"numeric",animate_once:"boolean"}},animation_panel_behavior_deleted:{evid:374,fields:{behavior_name:"string",action_name:"string",component_name:"string"}}},backgroundPanel:{panel_background_changed:{evid:375,fields:{origin:"string",bg_media_type:"string",bg_mobile_detached:"string",bg_media_name:"string",bg_page_id:"string",bg_preset_index:"number",bg_vendor_name:"string",bg_vendor_media_id:"string",bg_color:"string",bg_fitting:"string",bg_positioning:"string",bg_opacity:"number",bg_scroll_with_site:"string",bg_overlay_color:"string",bg_overlay_color_opacity:"string",bg_video_overlay_pattern:"string",bg_video_loop:"string",bg_slideshow_image_fitting:"string",bg_slideshow_transition_type:"string",bg_slideshow_transition_duration:"number",bg_slideshow_transition_direction:"string",bg_slideshow_pausebetweenimages:"number"}},panel_apply_to_other_pages_click:{evid:376,fields:{}},panel_apply_to_other_pages_ok:{evid:377,fields:{all_pages_selected:"string",num_unselected_pages:"number",num_selected_pages:"string"}}},lists:{LIST_DB_MANAGER_CLOSE_CLICK:{src:59,endpoint:"listim2",evid:111,fields:{list_part_id:"string",component_id:"string"}},LIST_DB_MANAGER_HELP_CLICK:{src:59,endpoint:"listim2",evid:112,fields:{list_part_id:"string",component_id:"string"}},LIST_DB_MANAGER_MANAGE_ITEMS_CLICK:{src:59,endpoint:"listim2",evid:120,fields:{origin:"string",list_part_id:"string",component_id:"string"}},LIST_SETTINGS_PANEL_OPENED:{src:59,endpoint:"listim2",evid:101,fields:{list_part_id:"string",component_id:"string"}},USER_RENAMED_THE_LIST:{src:59,endpoint:"listim2",evid:102,fields:{list_part_id:"string",component_id:"string",new_list_name:"string"}},LIST_DESIGN_PANEL_OPENED:{src:59,endpoint:"listim2",evid:122,fields:{list_part_id:"string",component_id:"string"}},LIST_DESIGN_PRESET_CHANGED:{src:59,endpoint:"listim2",evid:123,fields:{list_part_id:"string",component_id:"string",preset_id:"string"}},LIST_DESIGN_FIELD_VISIBILITY_CHANGED:{src:59,endpoint:"listim2",evid:124,fields:{list_part_id:"string",component_id:"string",field_id:"string",field_display_name:"string",field_type:"string",check_box_status:"string"}},LIST_DESIGN_FIELD_CUSTOMIZE_CLICKED:{src:59,endpoint:"listim2",evid:125,fields:{list_part_id:"string",field_id:"string",field_display_name:"string",field_type:"string"}},LIST_DESIGN_FIELD_STYLE_CHANGED:{src:59,endpoint:"listim2",evid:126,fields:{list_part_id:"string",component_id:"string",field_id:"string",field_display_name:"string",field_type:"string",new_style_id:"string"}},LIST_DESIGN_BACK_CLICKED:{src:59,endpoint:"listim2",evid:129,fields:{list_part_id:"string",component_id:"string",back_to_panel_name:"string"}}},rightClickMenu:{RIGHT_CLICK_MENU_OPEN:{evid:130,fields:{category:"string",component:"string"}},CUT:{evid:180,fields:{app_id:"guid",app_site_id:"guid",component_type:"string",instance_id:"guid",origin:"string"}},COPY:{evid:181,fields:{app_id:"guid",app_site_id:"guid",component_type:"string",instance_id:"guid",origin:"string"}},PASTE:{evid:182,fields:{app_id:"guid",app_site_id:"guid",component_type:"string",instance_id:"guid",origin:"string"}},DUPLICATE:{evid:183,fields:{app_id:"guid",app_site_id:"guid",component_type:"string",instance_id:"guid",origin:"string"}},COPY_DESIGN:{evid:135,fields:{component_type:"string",instance_id:"guid",origin:"string"}},PASTE_DESIGN:{evid:136,fields:{component_type:"string",instance_id:"guid",origin:"string"}},COPY_DESIGN_HOVER:{evid:137,fields:{instance_id:"guid"}},PASTE_DESIGN_HOVER:{evid:138,fields:{instance_id:"guid"}},ARRANGE_HOVER:{evid:139,fields:{}},OVERLAPPING_ITEMS_HOVER:{evid:140,fields:{}},OVERLAPPING_ITEM_CLICK:{evid:141,fields:{component:"string"}},LOCK:{evid:142,fields:{origin:"string"}},UNLOCK:{evid:143,fields:{origin:"string"}},HIDE:{evid:145,fields:{origin:"string"}},SHOW_ON_ALL_PAGES:{evid:146,fields:{new_status:"string",origin:"string"}},FIXED_POSITION:{evid:147,fields:{component:"string",new_status:"string",origin:"string"}},BRING_TO_FRONT:{evid:148,fields:{origin:"string"}},SEND_TO_BACK:{evid:149,fields:{origin:"string"}},MOVE_FORWARD:{evid:150,fields:{origin:"string"}},MOVE_BACKWARDS:{evid:151,fields:{origin:"string"}}},editBox:{MOVE_COMPONENT:{evid:152,fields:{origin:"string"}},ROTATE_COMPONENT:{evid:153,fields:{value:"number",origin:"string"}},CANCEL_ROTATE_COMPONENT:{evid:154,fields:{}},DRAG_BY_HANDLE:{evid:155,fields:{component_type:"string"}},RESIZE_BY_HANDLE:{evid:156,fields:{component_type:"string"}},RESIZE:{evid:157,fields:{handle_value:"string",origin:"string"}},ATTACH_TO:{evid:158,fields:{component_type:"string",target_component:"string"}}},publish:{PUBLISH_CLICK:{evid:222,src:38,fields:{origin:"string"}},First_Publish_connect_domain_click:{evid:379,fields:{user_status:"string",message:"string"}},Second_Publish_connect_domain_click:{evid:443,fields:{user_status:"string",message:"string"}},First_Publish_Done_click:{evid:380,fields:{user_status:"string",message:"string"}},Second_Publish_Done_click:{evid:394,fields:{user_status:"string",message:"string"}},First_Publish_dont_show_again_click:{evid:381,fields:{toggle:"bool",user_status:"string"}},First_Publish_try_to_edit_site_name_click:{evid:382,fields:{user_status:"string"}},Second_Publish_dont_show_again_click:{evid:395,fields:{toggle:"bool"}},First_Publish_Send_ShoutOut_link_click:{evid:383,fields:{user_status:"string"}},First_Publish_get_own_Mailbox_link_click:{evid:384,fields:{user_status:"string"}},First_Publish_Traffic_Apps_link_click:{evid:385,fields:{user_status:"string"}},Second_Publish_View_Site_click:{evid:388,fields:{user_status:"string"}},Second_Publish_facebook_Share_click:{evid:389,fields:{user_status:"string"}},Second_Publish_Twitter_share_click:{evid:390,fields:{user_status:"string"}},Second_Publish_ShoutOut_Share_click:{evid:391,fields:{user_status:"string"}},Second_Publish_get_own_Mailbox_click:{evid:392,fields:{user_status:"string"}},Second_Publish_Traffic_Apps_click:{evid:393,fields:{user_status:"string"}},Publish_Work_not_Published_Error_ok_Click:{evid:396,fields:{}},Publish_Work_not_Published_Error_Help_Center_Link_Click:{evid:397,fields:{}},publish_view_your_site_click:{evid:449,fields:{is_first_publish:"bool",panel_name:"string",user_status:"string"}},publish_flow_upgrade_now_button_click:{evid:272,fields:{is_first_publish:"bool",user_status:"string",message:"string"}},publish_flow_upgrade_later_button_click:{evid:273,fields:{is_first_publish:"bool",user_status:"string",message:"string"}},publish_flow_connect_domain_now_button_click:{evid:297,fields:{is_first_publish:"bool",user_status:"string",message:"string"}},publish_flow_connect_domain_later_button_click:{evid:305,fields:{is_first_publish:"bool",user_status:"string",message:"string"}},publish_success_panel_opened_with_content:{evid:469,fields:{is_first_publish:"bool",message:"string"}}},preview:{PREVIEW_CLICK:{evid:250,src:38,fields:{origin:"string"}}},save:{saveProcess:{START_SAVE_PROCESS:{evid:461,fields:{save_type:"string"}},SUCCESS_SAVE_PROCESS:{evid:462,fields:{duration:"numeric",save_type:"string"}}},chooseDomainPanel:{DOMAIN_OPTION_CLICKED:{evid:315,fields:{selection:"string"}},ACTION_BUTTON_CLICKED:{evid:317,fields:{value_selected:"string"}}},siteWasSavedPanel:{FIRST_SAVE_ACTION_BUTTON_CLICKED:{evid:325,fields:{}},HELP_CONNECTING_DOMAIN_CLICKED:{evid:326,fields:{}},CONNECT_NEW_DOMAIN_CLICKED:{evid:327,fields:{}},CONNECT_EXISTING_DOMAIN_CLICKED:{evid:328,fields:{}},First_Save_Dialog_2_maybe_later_click:{evid:329,fields:{}},PUBLISH_NOW_CLICKED:{evid:335,fields:{is_first_save:"boolean",user_status:"string"}},SECOND_SAVE_DONT_SHOW_AGAIN_CLICKED:{evid:336,fields:{toggle:"boolean",user_status:"string"}},SECOND_SAVE_ACTION_BUTTON_CLICKED:{evid:337,fields:{user_status:"string"}},SECOND_SAVE_CONNECT_DOMAIN_CLICKED:{evid:338,fields:{user_status:"string"}},SECOND_SAVE_PUBLISH_NOW_BUTTON_CLICKED:{evid:339,fields:{user_status:"string"}}},saveFailed:{First_Save_error_work_not_saved_error_close_click:{evid:340,fields:{}},First_Save_error_work_not_saved_error_ok_click:{evid:341,fields:{}},First_Save_error_work_not_saved_error_help_center_link_click:{evid:342,fields:{}},CONCURRENT_SAVE:{evid:447,fields:{selection:"string"}}},saveReminder:{REMINDER_DISPLAYED:{evid:456,fields:{origin:"string"}},SAVE_CLICKED:{evid:457,fields:{}}}},domainInput:{DISABLED_DOMAIN_PART_CLICKED:{evid:444,fields:{user_status:"string",save_or_publish:"string",panel_name:"string",is_first_save_or_publish:"boolean"}},DOMAIN_VALIDATION_ERROR:{evid:445,fields:{user_status:"string",panel_name:"string",is_first_save:"boolean"}},DOMAIN_EDIT_SAVE_CLICKED:{evid:446,fields:{user_status:"string",panel_name:"string",is_first_save:"boolean"}},DOMAIN_EDIT_CANCEL_CLICKED:{evid:448,fields:{user_status:"string",panel_name:"string",is_first_save:"boolean"}},DOMAIN_EDIT_CLICKED:{evid:450,fields:{user_status:"string",panel_name:"string",is_first_save:"boolean"}}},selection:{MULTISELECT:{evid:127,num_of_elements_selected:"number",selection_method:"string"}},colorPicker:{CHANGE_SITE_COLORS_LINK_CLICKED:{evid:131,fields:{}},SITE_COLOR_SELECT:{evid:132,fields:{index_selected_color:"numeric"}},ADD_COLOR_BUTTON_CLICKED:{evid:133,fields:{}},ADD_COLOR_LINK_CLICKED:{evid:134,fields:{}},CUSTOM_COLOR_SELECT:{evid:135,fields:{}},MAIN_PANEL_CLOSED:{evid:251,fields:{}},ADD_COLOR_PANEL_CLOSED:{evid:252,fields:{}},CHANGE_SITE_COLOR_CLOSED:{evid:253,fields:{}}},organizeImages:{ORGIMAGES_CLICK_CLOSE:{src:26,evid:201,fields:{}},ORGIMAGES_CLICK_CANCEL:{src:26,evid:202,fields:{}},ORGIMAGES_CLICK_CONFIRMATION:{src:26,evid:203,fields:{}},ORGIMAGES_CLICK_REPLACE:{src:26,evid:204,fields:{}},ORGIMAGES_CLICK_ADD_IMAGES:{src:26,evid:205,fields:{}},ORGIMAGES_START_REORDERING:{src:26,evid:206,fields:{}},ORGIMAGES_CLICK_DELETE:{src:26,evid:207,fields:{}},ORGIMAGES_DIALOG_LOADED:{src:26,evid:208,fields:{}},ORGIMAGES_CLICK_ORGIMAGES:{src:26,evid:209,fields:{}},ORGIMAGES_EDIT_TITLE:{src:26,evid:210,fields:{}},ORGIMAGES_EDIT_DESCRIPTION:{src:26,evid:211,fields:{}},ORGIMAGES_ADD_LINK:{evid:212,fields:{}},ORGIMAGES_USER_SETS_OPEN:{src:26,evid:137,fields:{}},ORGIMAGES_USER_SETS_ORDER_CHANGED:{src:26,evid:138,fields:{import_order:"string"}},ORGIMAGES_USER_SETS_TITLES_CHANGED:{src:26,evid:139,fields:{titles_import:"string"}},ORGIMAGES_USER_SETS_CONFIRM:{src:26,evid:140,fields:{}},ORGIMAGES_USER_SETS_CLOSE:{src:26,evid:141,fields:{}}},pinToScreen:{OPEN_PIN_TO_SCREEN_PANEL:{evid:332,src:38,fields:{origin:"string",component_type:"string"}},UNPIN:{evid:333,src:38,fields:{origin:"string",component_type:"string"}},NOTIFICATION_TOO_BIG:{evid:349,src:38,fields:{state:"string",component_type:"string"}},POSITION_SELECTED:{evid:386,src:38,fields:{selected_area:"string",component_type:"string"}},DRAG_ATTEMPT:{evid:386,src:38,fields:{component_type:"string"}}},musicPromotionPopup:{submit_video_clicked:{evid:306,fields:{origin:"string"}}},applyStyle:{COPY_STYLE_CHOOSE_STYLES_TO_REPLACE_CLICK:{evid:319,src:38,fields:{status:"bool",style_id:"string",component_id:"string",component_type:"string"}},COPY_STYLE_RCM_CLICK:{evid:318,src:38,fields:{component_id:"string",component_type:"string"}},COPY_STYLE_CANCEL:{evid:320,src:38,fields:{component_id:"string",component_type:"string"}},COPY_STYLE_APPLY:{evid:321,src:38,fields:{num_of_styles_chosen:"numeric",component_id:"string",component_type:"string"}}},sectionReorganize:{SECTION_APPEARANCE:{evid:470,src:38,fields:{page_id:"string"}},HOVER_SECTION_HANDLE:{evid:471,src:38,fields:{page_id:"string",section_size:"string"}},REORDER_SECTION:{evid:472,src:38,fields:{page_id:"string",section_size:"string"}},SPACE_TOP_DRAG:{evid:473,src:38,fields:{page_id:"string",section_size:"string"}},SPACE_BOTTOM_DRAG:{evid:474,src:38,fields:{page_id:"string",section_size:"string"}},SECTION_ZOOM_IN:{evid:475,src:38,fields:{page_id:"string",scale:"numeric"}},SECTION_ZOOM_OUT:{evid:476,src:38,fields:{page_id:"string",scale:"numeric"}}}}}),define("core/bi/controlsToEvents",["core/bi/events.json"],function(a){"use strict";var b={"boolean":a.commonControls.Toggle_Click,select:a.commonControls.DropDown_Selection,combobox:a.commonControls.DropDown_Selection,slider:a.commonControls.Slider_ValueChange,RadioButtons:a.commonControls.RadioButtonsList_Selection,accordion:a.commonControls.Toggle_Click,textEffects:a.commonControls.RadioButtonsList_Selection,textOutdentLeft:a.textControls.Text_Panel_Indentation_Click,textOutdentRight:a.textControls.Text_Panel_Indentation_Click,textIndentLeft:a.textControls.Text_Panel_Indentation_Click,textIndentRight:a.textControls.Text_Panel_Indentation_Click,textWriteDirectionLeft:a.textControls.Text_Panel_Text_Orientation_Click,textWriteDirectionRight:a.textControls.Text_Panel_Text_Orientation_Click,textColor:a.textControls.Text_Panel_Color_Click,textHighlight:a.textControls.Text_Panel_Highlight_Click};return b}),define("core/utils/uiControlsBIUtil",["lodash","core/bi/controlsToEvents"],function(a,b){"use strict";function c(a){return b[a]}function d(c,d){var e=a(b[c].fields).keys().union(["value"]).value();return a(d).pick(e).mapValues(function(a){return"boolean"==typeof a?a.toString():a}).value()}return{getEventDefinition:c,getParams:d}}),define("core/bi/errors.json",[],function(){return{TEST_ERROR:{errorName:"TEST_ERROR",errorCode:1,severity:"fatal"},SAVE_ERROR:{errorName:"SAVE_ERROR",errorCode:504,severity:"fatal",fields:{p1:"String"}},FIRST_SAVE_ERROR:{errorName:"SAVE_ERROR",errorCode:505,severity:"fatal",fields:{p1:"String"}},SITE_SETTINGS_JSON_PARSE_ERROR:{errorName:"SITE_SETTINGS_JSON_PARSE_ERROR",errorCode:1e4,severity:"error"},BG_MOBILE_DATA_DUPLICATION_ERROR:{errorName:"BG_MOBILE_DATA_DUPLICATION_ERROR",errorCode:3771,severity:"error"},OLD_TEXT_MIGRATION:{errorName:"OLD_TEXT_MIGRATION",errorCode:58,severity:"error"},TEXT_NESTED_STYLES:{errorName:"TEXT_NESTED_STYLES",errorCode:12901,severity:"error"}}}),define("core/bi/bi",["core/bi/events.json","core/bi/errors.json"],function(a,b){"use strict";var c=function(b){b.bi.register("core","event",a)};return{events:a,errors:b,registerEvents:c}}),define("core/app/styleManager",["lodash"],function(a){"use strict";function b(b,c){return a.isEqual(b,c)}function c(b){var c=b.styles.getAllIds();return a.map(c,b.styles.get)}function d(b,d){var e=c(b);return a.filter(e,{skin:d})}function e(b,d){var e=c(b);return a.filter(e,function(a){return a.componentClassName===d&&"custom"===a.styleType})}function f(b,c){var d=a.find(b,function(a){return a.styles[c]});return d&&d.styles[c]}function g(a,b){var c=f(a,b);return c?{id:b,compId:"",componentClassName:"",pageId:"",styleType:"system",type:"TopLevelStyle",skin:c,style:{groups:{},properties:{},propertiesSource:{}}}:null}function h(b){var c=a.map(b,function(a,b){return[b,a]});return a.sortBy(c,a.first)}return{getStyleIdByDef:function(c,e,f,g){if("system"===f.styleType)return f.id;var h=d(c,f.skin),i=a.find(h,function(c){if(a.isUndefined(c.style)&&f.style)return!1;if(c.style&&f.style){var d=e.COMPONENT_DEFINITION_MAP[g]?a.keys(e.COMPONENT_DEFINITION_MAP[g].styles):[];return a.contains(d,c.id)||c.componentClassName===g?b(c.style.properties,f.style.properties):!1}return!0});return i?i.id:this.createNewStyleByDef(c,f,f.componentClassName)},createNewStyleByDef:function(b,c,d){var e=a.cloneDeep(c);return e.styleType="custom",e.componentClassName=e.componentClassName||d,b.styles.createItem(e)},getStyleById:function(a,b,c){var d=a.styles.get(c);return d||(d=g(b.COMPONENT_DEFINITION_MAP,c)),d},getUniqueCustomStyleList:function(b,c,d){var f=e(b,d),g=this.getUniqueThemeStyleList(b,c,d),i=a.uniq(f,function(a){return JSON.stringify(a.style?h(a.style.properties):{})});return a.remove(i,function(b){return a.find(g,function(a){return this.isEqualWithoutTypeConsideration(b,a)},this)},this),a.sortBy(i,"skin")},getUniqueThemeStyleList:function(b,c,d){var e=this.getThemedStyleForComp(b,c,d),f=a.uniq(e,function(a){return JSON.stringify(a.style?h(a.style.properties):{})+a.skin;
});return a.sortBy(f,"skin")},getThemedStyleForComp:function(b,c,d){var e=c.COMPONENT_DEFINITION_MAP[d]?a.keys(c.COMPONENT_DEFINITION_MAP[d].styles):[];return a.map(e,function(a){return this.getStyleById(b,c,a)},this)},getDuplicateToStyleList:function(b,c,d,f){var g=this.getThemedStyleForComp(b,c,f),h=e(b,f),i=g.concat(h);return a(i).reject({id:d.id}).filter(this.isEqualWithoutTypeConsideration.bind(this,d)).value()},getUniqueStyleList:function(a,b,c){var d=this.getUniqueCustomStyleList(a,b,c),e=this.getUniqueThemeStyleList(a,b,c);return e.concat(d)},isEqual:function(a,c){if(!a||!c)throw new Error("Style is not defined");return a.skin!==c.skin||a.styleType!==c.styleType?!1:"system"===a.styleType?a.id===c.id:a.style&&c.style?b(a.style.properties,c.style.properties):!0},isEqualWithoutTypeConsideration:function(a,c){if(!a||!c)throw new Error("Style is not defined");return a.skin!==c.skin?!1:a.style&&c.style?b(a.style.properties,c.style.properties):!0},getTempStyleId:function(a,b){var c=this.createNewStyleByDef(a,b);return a.styles.setExcluded(c),c},prepareTempStyleValue:function(a){a.styleType="custom"}}}),define("core/utils/defaultActions/mediaManagerDefaultActions",["lodash","util","core/app/styleManager"],function(a,b,c){"use strict";function f(a,b){var c=a.components.style.getId(b);return a.theme.styles.get(c)}function g(a,b,d){var e=f(a,b);if(d!==e.skin){e.skin=d;var g=c.getStyleIdByDef(a.theme,a.components,e,a.components.getType(b));a.components.style.setId(b,g)}}var d=["uri","width","height","title","originalImageDataRef","type"],e=["uri","width","height","title"];return{changeBgImageStrip:function(b,c){b.mediaServices.mediaManager.open(b.mediaServices.mediaManager.categories.IMAGE,{multiSelect:!1,callback:function(e){if(e){var f=a.pick(e[0],d);f.uri=e[0].fileName,f.originalImageDataRef=null,f.type="Image",b.components.data.update(c,f,!0),b.history.add("Change Image")}}})},changeClipArt:function(c,d){c.mediaServices.mediaManager.open(c.mediaServices.mediaManager.categories.CLIPART,{multiSelect:!1,translation:{title:b.translate("Clip_Art_Media_Change_Clipart"),submitButton:b.translate("Clip_Art_Media_Change_Clipart")},path:"public",callback:function(b){if(b){var f=a.pick(b[0],e);f.uri=b[0].fileName,f.originalImageDataRef=null,c.components.data.update(d,f,!0),c.history.add("Change Image")}}})},changeDocumentMedia:function(b,c){var d=b.mediaServices;d.mediaManager.open(d.mediaManager.categories.DOCUMENT,{multiSelect:!1,callback:function(d){if(!a.isEmpty(d)){var e=b.components.data.get(c),f=a.cloneDeep(e.link),g=d[0];f.name=g.title,f.docId=g.fileUrl,e.link=f,b.components.data.update(c,e)}}})},changeFlashComponent:function(b,c){var d=b.mediaServices;d.mediaManager.open(d.mediaManager.categories.FLASH,{multiSelect:!1,callback:function(d){if(!a.isEmpty(d)){var e=d[0],f=b.components.data.get(c);a.assign(f,{uri:e.fileName},a.pick(e,["width","height","title"])),b.components.data.update(c,f)}}})},changePinterestPinIt:function(b,c){var d=b.mediaServices;d.mediaManager.open(d.mediaManager.categories.IMAGE,{multiSelect:!1,callback:function(d){if(!a.isEmpty(d)){var e=b.components.data.get(c);e.uri=d[0].fileName,b.components.data.update(c,e)}}})},changeSingleAudioPlayer:function(b,c){var d=b.mediaServices;d.mediaManager.open(d.mediaManager.categories.MUSIC,{multiSelect:!1,callback:function(d){if(!a.isEmpty(d)){var e=d[0],f=b.components.data.get(c);a.assign(f,{uri:e.fileUrl,originalFileName:e.title,artist:"Unknown Artist",track:"Unknown Track"}),b.components.data.update(c,f)}}})},changeSvgShape:function(c,d,e){var f=c.mediaServices;f.mediaManager.open(f.mediaManager.categories.SHAPE,a.assign({multiSelect:!1,callback:function(e){if(!a.isEmpty(e)){var f=b.svgUrlParser.parseSvgSkinFromUrl(e[0].fileUrl);g(c,d,f),c.history.add("Change Shape")}}},e))},changeWPhoto:function(b,c){b.mediaServices.mediaManager.open(b.mediaServices.mediaManager.categories.IMAGE,{multiSelect:!1,callback:function(e){if(e){var f=a.pick(e[0],d);f.uri=e[0].fileName,f.originalImageDataRef=null,b.components.data.update(c,f,!0),b.history.add("Change Image")}}})}}}),define("core/utils/componentsDefaultAction",["lodash","core/bi/bi","core/app/constants","core/utils/defaultActions/mediaManagerDefaultActions","core/utils/spotifyUtils"],function(a,b,c,d,e){"use strict";function f(a,b){b&&a.openComponentPanel(b)}function g(a){return function(b){f(b,a)}}function h(a,b){a.openOrganizeImagesPanel(function(c){var d=a.components.data.get(b);d.items=c,a.components.data.update(b,d)})}function i(a){a.openPagesPanel()}return{WRichText:function(a,d,e){a.isMobileEditor()?f(a,c.componentPanels.settings):(a.bi.event(b.events.textControls.Text_Panel_opened,{origin:e}),a.text.startEditing())},Container:g(c.componentPanels.design),FiveGridLine:g(c.componentPanels.design),FooterContainer:g(c.componentPanels.design),HeaderContainer:g(c.componentPanels.design),screenWidthContainer:g(c.componentPanels.design),Page:g(c.componentPanels.design),VerticalLine:g(c.componentPanels.design),Anchor:g(c.componentPanels.settings),ContactForm:g(c.componentPanels.settings),FacebookLikeBox:g(c.componentPanels.settings),FacebookShare:g(c.componentPanels.settings),FlickrBadgeWidget:g(c.componentPanels.settings),BoxSlideShow:g(c.componentPanels.settings),GoogleMap:g(c.componentPanels.settings),HtmlComponent:g(c.componentPanels.settings),ImageButton:g(c.componentPanels.settings),ItunesButton:g(c.componentPanels.settings),PayPalButton:g(c.componentPanels.settings),PinItPinWidget:g(c.componentPanels.settings),PinterestFollow:g(c.componentPanels.settings),SiteButton:g(c.componentPanels.settings),SkypeCallButton:g(c.componentPanels.settings),SoundCloudWidget:g(c.componentPanels.settings),SpotifyFollow:g(c.componentPanels.settings),SubscribeForm:g(c.componentPanels.settings),Video:g(c.componentPanels.settings),VKShareButton:g(c.componentPanels.settings),WFacebookLike:g(c.componentPanels.settings),WTwitterFollow:g(c.componentPanels.settings),WTwitterTweet:g(c.componentPanels.settings),YouTubeSubscribeButton:g(c.componentPanels.settings),AudioPlayer:function(b,c){var d=b.mediaServices;d.mediaManager.open(d.mediaManager.categories.MUSIC,{multiSelect:!1,callback:function(d){if(!a.isEmpty(d)){var e=b.components.data.get(c);e.uri=d[0].fileName,b.components.data.update(c,e)}}})},BgImageStrip:d.changeBgImageStrip,ClipArt:d.changeClipArt,DocumentMedia:d.changeDocumentMedia,FlashComponent:d.changeFlashComponent,PinterestPinIt:d.changePinterestPinIt,SingleAudioPlayer:d.changeSingleAudioPlayer,SvgShape:d.changeSvgShape,WPhoto:d.changeWPhoto,DropDownMenu:i,GalleryDefaultAction:h,MatrixGallery:h,SliderGallery:h,PaginatedGridGallery:h,Impress:h,Masonry:h,Thumbnails:h,StripSlideshow:h,StripShowcase:h,Accordion:h,Freestyle:h,Collage:h,Honeycomb:h,SlideShowGallery:h,TPA3DGallery:h,TPA3DCarousel:h,LinkBar:function(a){a.openOrganizeSocialIconsPanel()},SpotifyPlayer:function(a,b){e.openIframe(a,null,function(c){var d=a.components.data.get(b);c&&c.uri&&c.uri!==d.uri&&(a.components.data.update(b,{uri:c.uri}),a.history.add("Change Spotify Track"))})},TinyMenu:i,VerticalMenu:i}}),define("core/utils/componentPreviewReadyPlugins/componentPreviewReadyPlugins",["lodash","core/utils/componentPreviewReadyPlugins/formPlugin"],function(a,b){"use strict";function c(c,d){var e=d.components.get.byType(c);a.forEach(e,function(c){var e=d.components.data.get(c),f=a.clone(e);b.updateDataWithDefaults(e,d),a.isEqual(e,f)||d.components.data.update(c,e)})}return[c.bind(null,["wysiwyg.viewer.components.ContactForm","wysiwyg.common.components.subscribeform.viewer.SubscribeForm"])]}),define("core/utils/compsSectionsAnalyzer",["lodash"],function(a){"use strict";function f(a){return a.width>=b}function g(a,b,c){c=c||1;var d=b.y>=a.y&&b.y<=a.bottomY,e=b.bottomY>=a.y&&b.bottomY<=a.bottomY,f=b.y<=a.y&&b.bottomY>=a.bottomY;return d&&a.bottomY-b.y>=b.height*c||e&&b.bottomY-a.y>=b.height*c||f&&a.height>=b*c}function h(b,c){return a.any(b,function(b){return a.contains(b.comps,c)})}function i(b,c){var d=b.components.getChildren(c);return a(d).map(function(a){var c=b.components.layout.get(a);return c.bounding&&(c=c.bounding),c.bottomY=c.y+c.height,{layout:c,comp:a}}).sortBy(function(a){return a.layout.y}).value()}function j(b){var c=a.sortBy(b,function(a){return a.layout.height});return a.forEach(c,function(c){var d=a.any(b,function(a){return a!==c&&g(a.layout,c.layout)});d&&(b=a.without(b,c))}),b}function k(b){var c=a.filter(b,function(a){return f(a.layout)}),d=a.difference(b,c),e=j(c),h=a.difference(c,e);return a.map(e,function(b){var c={position:{top:b.layout.y,bottom:b.layout.bottomY},comps:[b.comp]},e=a(d).filter(function(a){return g(b.layout,a.layout,.5)}).pluck("comp").value(),f=a(h).filter(function(a){return g(b.layout,a.layout,1)}).pluck("comp").value();return c.comps=c.comps.concat(e,f),c})}function l(a){for(var b=[],c=0;c<a.length;c++){var d=a[c],f={position:{top:d.layout.y,bottom:d.layout.bottomY},comps:[]};f.position.top=d.layout.y,f.comps.push(d.comp);for(var g=!1;!g;){var h=a[c+1];!h||h.layout.y>f.position.bottom+e?g=!0:(f.comps.push(h.comp),f.position.bottom=Math.max(f.position.bottom,h.layout.bottomY),c++)}b.push(f)}return b}function m(a){return a.position.top}function n(a){return a.position.bottom-a.position.top}function o(a,b,c){var d=a[b],e=a[c];e.comps=e.comps.concat(d.comps),e.position.top=Math.min(e.position.top,d.position.top),e.position.bottom=Math.max(e.position.bottom,d.position.bottom),a.splice(b,1)}function p(a){for(var b,e,f,g,h=0;h<a.length;h++)if(g=!1,b=a[h],n(b)<c){f=a[h-1],e=a[h+1];var i=f?b.position.top-f.position.bottom:Number.POSITIVE_INFINITY,j=e?e.position.top-b.position.bottom:Number.POSITIVE_INFINITY;j>i&&d>=i?(o(a,h,h-1),g=!0):i>j&&d>=j&&(o(a,h,h+1),g=!0),g&&h--}return a}function q(b,c){var d=i(b,c),e=k(d);d=a.reject(d,function(a){return a.layout.y<0||h(e,a.comp)});var f=l(d),g=a().union(e,f).sortBy(m).value();return g=p(g)}var b=700,c=30,d=30,e=30;return{analyzeContainer:q}}),define("core/utils/sectionsReorganizeUtil",["lodash","core/utils/compsSectionsAnalyzer"],function(a,b){"use strict";function c(a){return a.position.bottom-a.position.top}function d(b,c,d){a.forEach(c,function(a){var c=b.components.layout.get(a);b.components.layout.update(a,{y:c.y+d},!0)})}function e(a,b,d){var e=c(b),f=b.position.top+e/2;return 1===d?a.y+a.height>=f:a.y<=f}function f(b,e,f,g,h){var i,j;1===h?(i=f,j=g):(i=g,j=f);var k=a.clone(i.position),l=a.clone(j.position),m=c(i),n=c(j),o=m-n;i.position.top=l.top-o,i.position.bottom=i.position.top+m,j.position.top=k.top,j.position.bottom=j.position.top+n,1===h?d(b,g.comps,j.position.top-l.top):d(b,g.comps,i.position.top-k.top);var p=a.findIndex(e,f),q=a.findIndex(e,g);e[p]=g,e[q]=f}function g(a,b,c){b.position.top+=c,b.position.bottom+=c,d(a,b.comps,c)}function h(a){for(var b=0;b<a.length;){var c=a[b],d=a[b+1];d&&d.position.top<c.position.bottom?(c.position.bottom=Math.max(c.position.bottom,d.position.bottom),c.comps=c.comps.concat(d.comps),a.splice(b+1,1)):b++}return a}function i(c,d){d=d||c.pages.getCurrentPage();var e=b.analyzeContainer(c,d),f=c.components.layout.getRelativeToScreen(d);return a.forEach(e,function(a){a.position.top+=f.y,a.position.bottom+=f.y}),e}return{combineOverlappingSections:h,getPageSections:i,shiftSection:g,switchSections:f,isAtSectionsSwitchPoint:e}}),define("core/utils/mouseMoveActions/sectionDrag",["lodash","core/utils/layoutTransitionsUtil","core/utils/sectionsReorganizeUtil"],function(a,b,c){"use strict";function o(a){var b={x:0,y:a.pageY};return k.getLayout(b)}function p(b){for(var c=k.getBoundComponentLayouts(b),d=0;d<h.comps.length;d++)f.components.layout.updateRelativeToScreen(h.comps[d],a.pick(c[d],"y"),!0)}function q(){var b=a.pluck(h.comps,"id");a.isEmpty(b)||f.renderPlugins.setCompsToShowOnTop(b),a.isFunction(m)&&m(),setTimeout(function(){v(),n=!0},e)}function r(a){return a.pageY>i?1:-1}function s(b,d){var e=r(b);i=b.pageY;var j=a.findIndex(g,h),k=j+e;if(!(k>=g.length||0>k)){var l=g[k];l&&c.isAtSectionsSwitchPoint(d,l,e)&&(c.switchSections(f,g,h,l,e),a.defer(v))}}function t(a){var b=o({y:a.pageY,x:0});b.y=h.position.top,p(b)}function u(a,b){return b.position.top<a.position.bottom}function v(){var b=a.findIndex(g,h),e=g[b-1],i=g[b+1],j=0,k=0;if(i&&u(h,i)&&(k=h.position.bottom+d-i.position.top),e&&u(e,h)&&(j=e.position.bottom+d-h.position.top,k+=j),j&&c.shiftSection(f,h,j),k)for(var l=b+1;l<g.length;l++)c.shiftSection(f,g[l],k)}function w(){return a.isEmpty(h.comps)?{y:h.position.top,height:h.position.bottom-h.position.top}:f.components.layout.getRelativeToScreen(h.comps)}function x(c,d){if(n=!1,j=!0,f=c,h=d.draggedSection){var e={x:0,y:d.evt.pageY};i=e.y,g=a.sortBy(d.sections,function(a){return a.position.top}),l=d.onDragEnd,m=d.onDragStart;var o=w(),p=a.map(h.comps,function(a){return f.components.layout.getRelativeToScreen(a)});k=new b.Drag(o,e,p)}}function y(a){if(h)if(j)j=!1,q();else if(n){var b=o(a);p(b),s(a,b)}}function z(b){h&&!j&&(t(b),f.history.add("Dragged Components Section"),f.renderPlugins.setCompsToShowOnTop(null),a.isFunction(l)&&l())}var f,g,h,i,j,k,l,m,n,d=30,e=500;return{start:x,on:y,end:z,type:"SECTION_DRAG"}}),define("core/mixins/biMixin",[],function(){"use strict";return{sendBI:function(a,b){this.getEditorAPI().bi.event(a,b)}}}),define("core/mixins/editorAPIMixin",["react"],function(a){"use strict";return{contextTypes:{editorAPI:a.PropTypes.object},getEditorAPI:function(){return this.context.editorAPI}}}),define("core/app/lazyComponent",["react","lodash"],function(a,b){"use strict";function e(a){return a.split(".")[0]}function f(a){return a.split(".").slice(1)}function g(a,e,f){for(var g=f,h=0;h<e.length;h++){if(!g.hasOwnProperty(e[h]))return void console.warn("(lazyComponent.js) -> Module [["+a+"]] has not yet loaded. It is possible that this has not yet been implemented in the editor.");g=g[e[h]]}c[a]=g,b.forEach(d[a],function(a){b.has(a.props,"onLoad")?a.props.onLoad():a.forceUpdate()})}var c={},d={};return a.createClass({displayName:"LazyLoader",statics:{isLoaded:function(a){return b.has(c,a)}},componentWillMount:function(){},componentWillReceiveProps:function(a){this.props.moduleName!==a.moduleName&&(d[this.props.moduleName]=b.without(d[this.props.moduleName],this))},componentWillUnmount:function(){d[this.props.moduleName]=b.without(d[this.props.moduleName],this)},render:function(){var h=this.props.moduleName;if(h&&!c.hasOwnProperty(h)){var i=e(this.props.moduleName),j=f(this.props.moduleName);d.hasOwnProperty(h)||(d[h]=[]),b.contains(d[h],this)||d[h].push(this),require([i],g.bind(null,h,j))}if(!this.props.placeHolder&&c[h]){var k=b.omit(this.props,["moduleName"]);return a.createElement(c[h],k)}return null}})}),define("core/app/premiumServicesAPI",["jquery","lodash","util"],function(a,b,c){"use strict";function g(c){var e=!1,f=a(c).find("domainName");if(!b.isEmpty(f)){var g=a(c).find("checkStatus").text();g=b.parseInt(g),e=g===d}return e}function h(c){var d=a(c).find("domainName").text();return b.isEmpty(d)||b.contains(d,e)||(d=e+d),b.isEmpty(d)?null:d}function i(c){return!b.isEmpty(a(c).find("cycle"))}function j(b,c,d){var e=a.ajax({type:"POST",dataType:"xml",url:f+b});e.done(function(a,b){if("success"===b){var e=g(a),f=h(a),j=i(a);return void c({isDomainConnected:e,sitePublishedDomain:f,isSitePremium:j})}d()}),e.fail(d)}var d=0,e="http://",f=c.serviceTopology.premiumStateApiUrl;return f=f?f.replace(/getTpaPremiumState/,"getDocPremiumState?siteGuid="):"//editor.wix.com/_api/wix/getDocPremiumState?siteGuid=",{getSiteDomainInfo:j}}),define("core",["core/utils/addUtil","core/utils/AttachHandler","core/utils/AttachHandlerExperimentAttachImprovements","core/utils/updateLayoutUtil","core/utils/updateDataUtil","core/utils/DragConstraintsHandler","core/utils/layoutConstraintsLogic","core/utils/layoutTransitionsUtil","core/utils/SnapToHandler","core/utils/stageUtils","core/utils/componentPasteLogic","core/utils/fixedPositionPlugins/fixedPositionPlugins","core/utils/social","core/utils/spotifyUtils","core/utils/uiControlsBIUtil","core/utils/componentsDefaultAction","core/utils/componentPreviewReadyPlugins/componentPreviewReadyPlugins","core/utils/compsSectionsAnalyzer","core/utils/sectionsReorganizeUtil","core/utils/mouseMoveActions/sectionDrag","core/mixins/biMixin","core/mixins/editorAPIMixin","core/app/constants","core/app/lazyComponent","core/app/styleManager","core/app/premiumServicesAPI","core/bi/bi"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A){"use strict";return{constants:w,utils:{addUtil:a,AttachHandler:b,AttachHandlerExperimentAttachImprovements:c,DragConstraintsHandler:f,updateLayoutUtil:d,updateDataUtil:e,layoutConstraintsLogic:g,layoutTransitionsUtil:h,SnapToHandler:i,stageUtils:j,fixedPositionUtils:l,social:m,spotifyUtils:n,componentPasteLogic:k,uiControlsBIUtil:o,componentsDefaultAction:p,compsSectionsAnalyzer:r,sectionsReorganizeUtil:s,sectionDrag:t,componentPreviewReadyPlugins:q},mixins:{biMixin:u,editorAPIMixin:v},lazyComponent:x,styleManager:y,premiumServicesAPI:z,bi:A}});